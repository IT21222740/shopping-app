2024-06-15 12:57:11.061 +05:30  INF  User profile is available. Using 'C:\Users\iTela\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-15 12:57:11.434 +05:30  INF  Now listening on: https://localhost:7220
2024-06-15 12:57:11.438 +05:30  INF  Now listening on: http://localhost:5016
2024-06-15 12:57:11.448 +05:30  INF  Application started. Press Ctrl+C to shut down.
2024-06-15 12:57:11.453 +05:30  INF  Hosting environment: Development
2024-06-15 12:57:11.458 +05:30  INF  Content root path: C:\Users\iTela\Documents\Assignment\sample project structure\ShoppingApp\API
2024-06-15 12:57:14.927 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/index.html - null null
2024-06-15 12:57:15.500 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/index.html - 200 null text/html;charset=utf-8 582.8563ms
2024-06-15 12:57:15.532 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_vs/browserLink - null null
2024-06-15 12:57:15.532 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - null null
2024-06-15 12:57:15.584 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 52.4727ms
2024-06-15 12:57:15.799 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_vs/browserLink - 200 null text/javascript; charset=UTF-8 267.1788ms
2024-06-15 12:57:15.896 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - null null
2024-06-15 12:57:16.248 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 352.5013ms
2024-06-15 13:04:11.804 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/User/register - application/json 239
2024-06-15 13:04:11.972 +05:30  INF  Executing endpoint 'API.Controllers.UserController.Signup (API)'
2024-06-15 13:04:12.010 +05:30  INF  Route matched with {action = "Signup", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Signup(Application.DTOs.SignUpDTO) on controller API.Controllers.UserController (API).
2024-06-15 13:04:13.466 +05:30  INF  Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-15 13:04:13.493 +05:30  INF  Executed action API.Controllers.UserController.Signup (API) in 1474.3369ms
2024-06-15 13:04:13.495 +05:30  INF  Executed endpoint 'API.Controllers.UserController.Signup (API)'
2024-06-15 13:04:13.504 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/User/register - 400 null application/json; charset=utf-8 1699.9882ms
2024-06-15 13:04:45.207 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/User/register - application/json 248
2024-06-15 13:04:45.220 +05:30  INF  Executing endpoint 'API.Controllers.UserController.Signup (API)'
2024-06-15 13:04:45.221 +05:30  INF  Route matched with {action = "Signup", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Signup(Application.DTOs.SignUpDTO) on controller API.Controllers.UserController (API).
2024-06-15 13:04:49.253 +05:30  INF  Executed DbCommand (100ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([UserId], [Email], [FirstName], [LastName], [PhoneNumber], [StripeId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2024-06-15 13:04:49.377 +05:30  INF  Executed DbCommand (16ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Boolean), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Addresses] ([City], [IsPrimary], [PostalCode], [StreetName], [UserId])
OUTPUT INSERTED.[AddressId]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-06-15 13:04:51.176 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 13:04:51.184 +05:30  INF  Executed action API.Controllers.UserController.Signup (API) in 5960.2462ms
2024-06-15 13:04:51.186 +05:30  INF  Executed endpoint 'API.Controllers.UserController.Signup (API)'
2024-06-15 13:04:51.192 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/User/register - 200 null application/json; charset=utf-8 5985.1832ms
2024-06-15 13:05:23.584 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/User/login - application/json 76
2024-06-15 13:05:23.604 +05:30  INF  Executing endpoint 'API.Controllers.UserController.Login (API)'
2024-06-15 13:05:23.609 +05:30  INF  Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Application.DTOs.LoginDTO) on controller API.Controllers.UserController (API).
2024-06-15 13:05:25.888 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.User.LoginResponse'.
2024-06-15 13:05:25.891 +05:30  INF  Executed action API.Controllers.UserController.Login (API) in 2277.8476ms
2024-06-15 13:05:25.894 +05:30  INF  Executed endpoint 'API.Controllers.UserController.Login (API)'
2024-06-15 13:05:25.897 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/User/login - 200 null application/json; charset=utf-8 2313.5368ms
2024-06-15 13:05:53.243 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/User/addAddress - application/json 66
2024-06-15 13:05:54.208 +05:30  INF  Executing endpoint 'API.Controllers.UserController.Address (API)'
2024-06-15 13:05:54.213 +05:30  INF  Route matched with {action = "Address", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Address(Application.DTOs.AddressDTO) on controller API.Controllers.UserController (API).
2024-06-15 13:05:54.252 +05:30  INF  Executed DbCommand (13ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Boolean), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Addresses] ([City], [IsPrimary], [PostalCode], [StreetName], [UserId])
OUTPUT INSERTED.[AddressId]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-06-15 13:05:54.257 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 13:05:54.269 +05:30  INF  Executed action API.Controllers.UserController.Address (API) in 53.9709ms
2024-06-15 13:05:54.271 +05:30  INF  Executed endpoint 'API.Controllers.UserController.Address (API)'
2024-06-15 13:05:54.275 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/User/addAddress - 200 null application/json; charset=utf-8 1032.8476ms
2024-06-15 13:06:19.402 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/Product/products-by-id/1 - null null
2024-06-15 13:06:19.416 +05:30  INF  Executing endpoint 'API.Controllers.ProductController.GetProductById (API)'
2024-06-15 13:06:19.422 +05:30  INF  Route matched with {action = "GetProductById", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Application.DTOs.ServiceResponse] GetProductById(Int32) on controller API.Controllers.ProductController (API).
2024-06-15 13:06:19.957 +05:30  INF  Executed DbCommand (12ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity], [p0].[CategoryId], [p0].[CategoryIcon], [p0].[CategoryName]
FROM [Products] AS [p]
INNER JOIN [ProductCategories] AS [p0] ON [p].[ProductCategoryId] = [p0].[CategoryId]
WHERE [p].[ProductId] = @__id_0
2024-06-15 13:06:19.974 +05:30  INF  Executing ObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 13:06:19.981 +05:30  INF  Executed action API.Controllers.ProductController.GetProductById (API) in 557.1587ms
2024-06-15 13:06:19.984 +05:30  INF  Executed endpoint 'API.Controllers.ProductController.GetProductById (API)'
2024-06-15 13:06:19.987 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/Product/products-by-id/1 - 200 null application/json; charset=utf-8 585.071ms
2024-06-15 13:06:36.494 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/Product/products-by-category/1 - null null
2024-06-15 13:06:36.499 +05:30  INF  Executing endpoint 'API.Controllers.ProductController.GetProductsByCategory (API)'
2024-06-15 13:06:36.506 +05:30  INF  Route matched with {action = "GetProductsByCategory", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[Application.DTOs.Product.ProductResponse]] GetProductsByCategory(Int32) on controller API.Controllers.ProductController (API).
2024-06-15 13:06:36.533 +05:30  INF  Executed DbCommand (6ms) [Parameters=[@__categoryId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity], [p0].[CategoryId], [p0].[CategoryIcon], [p0].[CategoryName]
FROM [Products] AS [p]
INNER JOIN [ProductCategories] AS [p0] ON [p].[ProductCategoryId] = [p0].[CategoryId]
WHERE [p].[ProductCategoryId] = @__categoryId_0
2024-06-15 13:06:36.540 +05:30  INF  Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.DTOs.Product.ProductResponse, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-15 13:06:36.543 +05:30  INF  Executed action API.Controllers.ProductController.GetProductsByCategory (API) in 33.2067ms
2024-06-15 13:06:36.546 +05:30  INF  Executed endpoint 'API.Controllers.ProductController.GetProductsByCategory (API)'
2024-06-15 13:06:36.547 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/Product/products-by-category/1 - 200 null application/json; charset=utf-8 54.1059ms
2024-06-15 13:06:45.143 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/Product/all-products - null null
2024-06-15 13:06:45.146 +05:30  INF  Executing endpoint 'API.Controllers.ProductController.GetProducts (API)'
2024-06-15 13:06:45.153 +05:30  INF  Route matched with {action = "GetProducts", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[Application.DTOs.Product.ProductResponse]] GetProducts() on controller API.Controllers.ProductController (API).
2024-06-15 13:06:45.172 +05:30  INF  Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity], [p0].[CategoryId], [p0].[CategoryIcon], [p0].[CategoryName]
FROM [Products] AS [p]
INNER JOIN [ProductCategories] AS [p0] ON [p].[ProductCategoryId] = [p0].[CategoryId]
2024-06-15 13:06:45.176 +05:30  INF  Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.DTOs.Product.ProductResponse, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-15 13:06:45.178 +05:30  INF  Executed action API.Controllers.ProductController.GetProducts (API) in 21.9154ms
2024-06-15 13:06:45.180 +05:30  INF  Executed endpoint 'API.Controllers.ProductController.GetProducts (API)'
2024-06-15 13:06:45.182 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/Product/all-products - 200 null application/json; charset=utf-8 40.2131ms
2024-06-15 13:07:04.095 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/api/Payment/Get-User-payments-byId/1 - null null
2024-06-15 13:07:04.103 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.GetPaymentInfo (API)'
2024-06-15 13:07:04.107 +05:30  INF  Route matched with {action = "GetPaymentInfo", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPaymentInfo(Int32) on controller API.Controllers.PaymentController (API).
2024-06-15 13:07:04.137 +05:30  INF  Executed DbCommand (13ms) [Parameters=[@__orderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[OrderId], [o].[ProductId], [o].[OrderQty], [o].[UnitPrice], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [OrderProducts] AS [o]
INNER JOIN [Products] AS [p] ON [o].[ProductId] = [p].[ProductId]
WHERE [o].[OrderId] = @__orderId_0
2024-06-15 13:07:04.141 +05:30  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.DTOs.Order.PaymentProductDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-15 13:07:04.148 +05:30  INF  Executed action API.Controllers.PaymentController.GetPaymentInfo (API) in 39.0217ms
2024-06-15 13:07:04.151 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.GetPaymentInfo (API)'
2024-06-15 13:07:04.152 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/api/Payment/Get-User-payments-byId/1 - 200 null application/json; charset=utf-8 57.2444ms
2024-06-15 13:07:12.433 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/api/Payment/Get-user-payments - null null
2024-06-15 13:07:12.440 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.UserPayments (API)'
2024-06-15 13:07:12.445 +05:30  INF  Route matched with {action = "UserPayments", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UserPayments() on controller API.Controllers.PaymentController (API).
2024-06-15 13:07:12.506 +05:30  INF  Executed DbCommand (44ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[OrderId], [o].[OrderDate], [o].[PaymentId], [o].[Status], [o].[TotalAmount], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[UserId] = @__userId_0
2024-06-15 13:07:12.513 +05:30  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.DTOs.Order.PaymentInfoDTO, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-15 13:07:12.515 +05:30  INF  Executed action API.Controllers.PaymentController.UserPayments (API) in 66.699ms
2024-06-15 13:07:12.518 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.UserPayments (API)'
2024-06-15 13:07:12.519 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/api/Payment/Get-user-payments - 200 null application/json; charset=utf-8 87.0913ms
2024-06-15 13:07:18.739 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/api/Payment/webHook - null 0
2024-06-15 13:07:18.744 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 13:07:18.748 +05:30  INF  Route matched with {action = "Index", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.PaymentController (API).
2024-06-15 13:07:26.486 +05:30  INF  Executed action API.Controllers.PaymentController.Index (API) in 7735.2644ms
2024-06-15 13:07:26.488 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 13:07:26.551 +05:30  ERR  An unhandled exception has occurred while executing the request.System.NullReferenceException: Object reference not set to an instance of an object.
   at Stripe.EventUtility.ParseEvent(String json, Boolean throwOnApiVersionMismatch) in /_/src/Stripe.net/Services/Events/EventUtility.cs:line 44
   at PaymentService.webHookHandler() in C:\Users\iTela\Documents\Assignment\sample project structure\ShoppingApp\Infrastructure\Payment\PaymentService.cs:line 81
   at Application.Services.Implementation.CheckoutService.HandlePayment() in C:\Users\iTela\Documents\Assignment\sample project structure\ShoppingApp\Application\Services\Implementation\CheckoutService.cs:line 63
   at API.Controllers.PaymentController.Index() in C:\Users\iTela\Documents\Assignment\sample project structure\ShoppingApp\API\Controllers\CheckoutController.cs:line 60
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)

2024-06-15 13:07:26.581 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/api/Payment/webHook - 500 null text/plain; charset=utf-8 7842.1253ms
2024-06-15 13:07:32.882 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/api/Payment - null 0
2024-06-15 13:07:32.885 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Checkout (API)'
2024-06-15 13:07:32.890 +05:30  INF  Route matched with {action = "Checkout", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Checkout() on controller API.Controllers.PaymentController (API).
2024-06-15 13:07:32.948 +05:30  INF  Executed DbCommand (43ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
FROM [Users] AS [u]
WHERE [u].[UserId] = @__userId_0
2024-06-15 13:07:32.974 +05:30  INF  Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-06-15 13:07:32.986 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__userId_0
2024-06-15 13:07:33.033 +05:30  INF  Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([OrderDate], [PaymentId], [Status], [TotalAmount], [UserId])
OUTPUT INSERTED.[OrderId]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-06-15 13:07:34.610 +05:30  INF  Executed action API.Controllers.PaymentController.Checkout (API) in 1716.7071ms
2024-06-15 13:07:34.611 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Checkout (API)'
2024-06-15 13:07:34.624 +05:30  ERR  An unhandled exception has occurred while executing the request.Stripe.StripeException: You passed an empty string for 'line_items'. We assume empty values are an attempt to unset a parameter; however 'line_items' cannot be unset. You should remove 'line_items' from your request or supply a non-empty value.
   at Stripe.StripeClient.ProcessResponse[T](StripeResponse response) in /_/src/Stripe.net/Infrastructure/Public/StripeClient.cs:line 153
   at Stripe.StripeClient.RequestAsync[T](HttpMethod method, String path, BaseOptions options, RequestOptions requestOptions, CancellationToken cancellationToken) in /_/src/Stripe.net/Infrastructure/Public/StripeClient.cs:line 115
   at Stripe.Service`1.RequestAsync[T](HttpMethod method, String path, BaseOptions options, RequestOptions requestOptions, CancellationToken cancellationToken) in /_/src/Stripe.net/Services/_base/Service.cs:line 276
   at PaymentService.Checkout(String stripeId, IEnumerable`1 products, String orderId) in C:\Users\iTela\Documents\Assignment\sample project structure\ShoppingApp\Infrastructure\Payment\PaymentService.cs:line 57
   at Application.Services.Implementation.CheckoutService.checkout() in C:\Users\iTela\Documents\Assignment\sample project structure\ShoppingApp\Application\Services\Implementation\CheckoutService.cs:line 50
   at API.Controllers.PaymentController.Checkout() in C:\Users\iTela\Documents\Assignment\sample project structure\ShoppingApp\API\Controllers\CheckoutController.cs:line 37
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)

2024-06-15 13:07:34.641 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/api/Payment - 500 null text/plain; charset=utf-8 1759.8528ms
2024-06-15 13:07:45.785 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/api/Cart/get-all-cartItems - null null
2024-06-15 13:07:45.789 +05:30  INF  Executing endpoint 'API.Controllers.CartController.GetAllCartItems (API)'
2024-06-15 13:07:45.794 +05:30  INF  Route matched with {action = "GetAllCartItems", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllCartItems() on controller API.Controllers.CartController (API).
2024-06-15 13:07:45.809 +05:30  INF  Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-06-15 13:07:45.813 +05:30  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.DTOs.Cart.CartItemResponse, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-15 13:07:45.817 +05:30  INF  Executed action API.Controllers.CartController.GetAllCartItems (API) in 20.8413ms
2024-06-15 13:07:45.819 +05:30  INF  Executed endpoint 'API.Controllers.CartController.GetAllCartItems (API)'
2024-06-15 13:07:45.820 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/api/Cart/get-all-cartItems - 200 null application/json; charset=utf-8 35.7465ms
2024-06-15 13:08:01.551 +05:30  INF  Request starting HTTP/2 DELETE https://localhost:7220/api/Cart/delete-cart-item/1 - null null
2024-06-15 13:08:01.555 +05:30  INF  Executing endpoint 'API.Controllers.CartController.DeleteCartItem (API)'
2024-06-15 13:08:01.559 +05:30  INF  Route matched with {action = "DeleteCartItem", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteCartItem(Int32) on controller API.Controllers.CartController (API).
2024-06-15 13:08:01.607 +05:30  INF  Executed DbCommand (28ms) [Parameters=[@__userId_0='?' (Size = 450), @__itemId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__userId_0 AND [u].[ProductId] = @__itemId_1
2024-06-15 13:08:01.616 +05:30  INF  Executing BadRequestObjectResult, writing value of type 'System.String'.
2024-06-15 13:08:01.619 +05:30  INF  Executed action API.Controllers.CartController.DeleteCartItem (API) in 57.2994ms
2024-06-15 13:08:01.621 +05:30  INF  Executed endpoint 'API.Controllers.CartController.DeleteCartItem (API)'
2024-06-15 13:08:01.623 +05:30  INF  Request finished HTTP/2 DELETE https://localhost:7220/api/Cart/delete-cart-item/1 - 400 null application/json; charset=utf-8 72.0241ms
2024-06-15 13:08:25.353 +05:30  INF  Request starting HTTP/2 PUT https://localhost:7220/api/Cart/modify-cart-item - application/json 38
2024-06-15 13:08:25.357 +05:30  INF  Executing endpoint 'API.Controllers.CartController.ModifyCart (API)'
2024-06-15 13:08:25.362 +05:30  INF  Route matched with {action = "ModifyCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ModifyCart(Application.DTOs.Cart.CartItemRequset) on controller API.Controllers.CartController (API).
2024-06-15 13:08:25.376 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450), @__itemId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__userId_0 AND [u].[ProductId] = @__itemId_1
2024-06-15 13:08:25.380 +05:30  INF  Executing BadRequestObjectResult, writing value of type 'System.String'.
2024-06-15 13:08:25.382 +05:30  INF  Executed action API.Controllers.CartController.ModifyCart (API) in 15.4014ms
2024-06-15 13:08:25.384 +05:30  INF  Executed endpoint 'API.Controllers.CartController.ModifyCart (API)'
2024-06-15 13:08:25.386 +05:30  INF  Request finished HTTP/2 PUT https://localhost:7220/api/Cart/modify-cart-item - 400 null application/json; charset=utf-8 32.9632ms
2024-06-15 13:08:45.598 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/api/Cart/add-to-cart - application/json 37
2024-06-15 13:08:45.609 +05:30  INF  Executing endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-06-15 13:08:45.614 +05:30  INF  Route matched with {action = "AddToCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToCart(Application.DTOs.Cart.CartItemRequset) on controller API.Controllers.CartController (API).
2024-06-15 13:08:45.629 +05:30  INF  Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450), @__itemId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__userId_0 AND [u].[ProductId] = @__itemId_1
2024-06-15 13:08:45.710 +05:30  INF  Executed DbCommand (59ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserProducts] ([ProductId], [userId], [Quantity])
VALUES (@p0, @p1, @p2);
2024-06-15 13:08:45.721 +05:30  INF  Cart item successfully added
2024-06-15 13:08:45.723 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-06-15 13:08:45.725 +05:30  INF  Executed action API.Controllers.CartController.AddToCart (API) in 107.2821ms
2024-06-15 13:08:45.727 +05:30  INF  Executed endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-06-15 13:08:45.729 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/api/Cart/add-to-cart - 200 null application/json; charset=utf-8 131.6811ms
2024-06-15 13:08:59.149 +05:30  INF  Request starting HTTP/2 PUT https://localhost:7220/api/Cart/modify-cart-item - application/json 38
2024-06-15 13:08:59.154 +05:30  INF  Executing endpoint 'API.Controllers.CartController.ModifyCart (API)'
2024-06-15 13:08:59.156 +05:30  INF  Route matched with {action = "ModifyCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ModifyCart(Application.DTOs.Cart.CartItemRequset) on controller API.Controllers.CartController (API).
2024-06-15 13:08:59.171 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450), @__itemId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__userId_0 AND [u].[ProductId] = @__itemId_1
2024-06-15 13:08:59.192 +05:30  INF  Executed DbCommand (8ms) [Parameters=[@p1='?' (DbType = Int32), @p2='?' (Size = 450), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [UserProducts] SET [Quantity] = @p0
OUTPUT 1
WHERE [ProductId] = @p1 AND [userId] = @p2;
2024-06-15 13:08:59.201 +05:30  INF  Cart Items updated Sucessfully
2024-06-15 13:08:59.202 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-06-15 13:08:59.205 +05:30  INF  Executed action API.Controllers.CartController.ModifyCart (API) in 44.4499ms
2024-06-15 13:08:59.207 +05:30  INF  Executed endpoint 'API.Controllers.CartController.ModifyCart (API)'
2024-06-15 13:08:59.209 +05:30  INF  Request finished HTTP/2 PUT https://localhost:7220/api/Cart/modify-cart-item - 200 null application/json; charset=utf-8 61.073ms
2024-06-15 13:09:14.239 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/api/Cart/get-all-cartItems - null null
2024-06-15 13:09:14.243 +05:30  INF  Executing endpoint 'API.Controllers.CartController.GetAllCartItems (API)'
2024-06-15 13:09:14.245 +05:30  INF  Route matched with {action = "GetAllCartItems", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllCartItems() on controller API.Controllers.CartController (API).
2024-06-15 13:09:14.257 +05:30  INF  Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-06-15 13:09:14.265 +05:30  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.DTOs.Cart.CartItemResponse, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-15 13:09:14.270 +05:30  INF  Executed action API.Controllers.CartController.GetAllCartItems (API) in 21.9925ms
2024-06-15 13:09:14.273 +05:30  INF  Executed endpoint 'API.Controllers.CartController.GetAllCartItems (API)'
2024-06-15 13:09:14.275 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/api/Cart/get-all-cartItems - 200 null application/json; charset=utf-8 35.744ms
2024-06-15 13:11:54.049 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/api/Payment - null 0
2024-06-15 13:11:54.073 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Checkout (API)'
2024-06-15 13:11:54.075 +05:30  INF  Route matched with {action = "Checkout", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Checkout() on controller API.Controllers.PaymentController (API).
2024-06-15 13:11:54.093 +05:30  INF  Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
FROM [Users] AS [u]
WHERE [u].[UserId] = @__userId_0
2024-06-15 13:11:54.107 +05:30  INF  Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-06-15 13:11:54.117 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__userId_0
2024-06-15 13:11:54.129 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@__item_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__item_ProductId_0
2024-06-15 13:11:54.141 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([OrderDate], [PaymentId], [Status], [TotalAmount], [UserId])
OUTPUT INSERTED.[OrderId]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-06-15 13:11:54.168 +05:30  INF  Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderProducts] ([OrderId], [ProductId], [OrderQty], [UnitPrice])
VALUES (@p0, @p1, @p2, @p3);
2024-06-15 13:11:55.547 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-06-15 13:11:55.549 +05:30  INF  Executed action API.Controllers.PaymentController.Checkout (API) in 1469.9393ms
2024-06-15 13:11:55.550 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Checkout (API)'
2024-06-15 13:11:55.552 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/api/Payment - 200 null application/json; charset=utf-8 1502.955ms
2024-06-15 13:12:24.126 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - application/json; charset=utf-8 1960
2024-06-15 13:12:24.126 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - application/json; charset=utf-8 3508
2024-06-15 13:12:24.129 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 13:12:24.132 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 13:12:24.134 +05:30  INF  Route matched with {action = "Index", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.PaymentController (API).
2024-06-15 13:12:24.136 +05:30  INF  Route matched with {action = "Index", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.PaymentController (API).
2024-06-15 13:12:24.215 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 13:12:24.222 +05:30  INF  Executed action API.Controllers.PaymentController.Index (API) in 83.4889ms
2024-06-15 13:12:24.224 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 13:12:24.227 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - 200 null application/json; charset=utf-8 101.3643ms
2024-06-15 13:12:24.228 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 13:12:24.234 +05:30  INF  Executed action API.Controllers.PaymentController.Index (API) in 92.1324ms
2024-06-15 13:12:24.236 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 13:12:24.238 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - 200 null application/json; charset=utf-8 112.6516ms
2024-06-15 13:12:24.401 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - application/json; charset=utf-8 3294
2024-06-15 13:12:24.401 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - application/json; charset=utf-8 1918
2024-06-15 13:12:24.414 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 13:12:24.422 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 13:12:24.424 +05:30  INF  Route matched with {action = "Index", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.PaymentController (API).
2024-06-15 13:12:24.426 +05:30  INF  Route matched with {action = "Index", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.PaymentController (API).
2024-06-15 13:12:24.435 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 13:12:24.437 +05:30  INF  Executed action API.Controllers.PaymentController.Index (API) in 3.7839ms
2024-06-15 13:12:24.439 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 13:12:24.441 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - 200 null application/json; charset=utf-8 39.5908ms
2024-06-15 13:12:24.481 +05:30  INF  Executed DbCommand (37ms) [Parameters=[@__paymentResponse_OrderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[OrderId], [o].[OrderDate], [o].[PaymentId], [o].[Status], [o].[TotalAmount], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[OrderId] = @__paymentResponse_OrderId_0
2024-06-15 13:12:24.500 +05:30  INF  Executed DbCommand (8ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Orders] SET [OrderDate] = @p0, [PaymentId] = @p1, [Status] = @p2, [TotalAmount] = @p3, [UserId] = @p4
OUTPUT 1
WHERE [OrderId] = @p5;
2024-06-15 13:12:24.515 +05:30  INF  Executed DbCommand (4ms) [Parameters=[@__id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__id_0
2024-06-15 13:12:24.527 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@__cartItem_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__cartItem_ProductId_0
2024-06-15 13:12:24.556 +05:30  INF  Executed DbCommand (6ms) [Parameters=[@p7='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = Double), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Double), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Description] = @p0, [Discount] = @p1, [ImageUrl] = @p2, [Name] = @p3, [Price] = @p4, [ProductCategoryId] = @p5, [Quantity] = @p6
OUTPUT 1
WHERE [ProductId] = @p7;
2024-06-15 13:12:24.567 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@__UserId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__UserId_0
2024-06-15 13:12:24.583 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [UserProducts]
OUTPUT 1
WHERE [ProductId] = @p0 AND [userId] = @p1;
2024-06-15 13:12:24.651 +05:30  INF  Executed DbCommand (7ms) [Parameters=[@__orderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[OrderId], [t].[OrderDate], [t].[PaymentId], [t].[Status], [t].[TotalAmount], [t].[UserId], [t].[UserId0], [t].[Email], [t].[FirstName], [t].[LastName], [t].[PhoneNumber], [t].[StripeId], [t0].[OrderId], [t0].[ProductId], [t0].[OrderQty], [t0].[UnitPrice], [t0].[ProductId0], [t0].[Description], [t0].[Discount], [t0].[ImageUrl], [t0].[Name], [t0].[Price], [t0].[ProductCategoryId], [t0].[Quantity]
FROM (
    SELECT TOP(1) [o].[OrderId], [o].[OrderDate], [o].[PaymentId], [o].[Status], [o].[TotalAmount], [o].[UserId], [u].[UserId] AS [UserId0], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
    FROM [Orders] AS [o]
    INNER JOIN [Users] AS [u] ON [o].[UserId] = [u].[UserId]
    WHERE [o].[OrderId] = @__orderId_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[OrderId], [o0].[ProductId], [o0].[OrderQty], [o0].[UnitPrice], [p].[ProductId] AS [ProductId0], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
    FROM [OrderProducts] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[ProductId]
) AS [t0] ON [t].[OrderId] = [t0].[OrderId]
ORDER BY [t].[OrderId], [t].[UserId0], [t0].[OrderId], [t0].[ProductId]
2024-06-15 13:12:25.849 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - application/json; charset=utf-8 3733
2024-06-15 13:12:25.853 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 13:12:25.855 +05:30  INF  Route matched with {action = "Index", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.PaymentController (API).
2024-06-15 13:12:25.862 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 13:12:25.863 +05:30  INF  Executed action API.Controllers.PaymentController.Index (API) in 6.5815ms
2024-06-15 13:12:25.865 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 13:12:25.866 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - 200 null application/json; charset=utf-8 17.8626ms
2024-06-15 13:12:25.905 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 13:12:25.908 +05:30  INF  Executed action API.Controllers.PaymentController.Index (API) in 1478.1861ms
2024-06-15 13:12:25.910 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 13:12:25.912 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - 200 null application/json; charset=utf-8 1511.9774ms
2024-06-15 15:52:47.444 +05:30  INF  User profile is available. Using 'C:\Users\iTela\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-15 15:52:47.913 +05:30  INF  Now listening on: https://localhost:7220
2024-06-15 15:52:47.917 +05:30  INF  Now listening on: http://localhost:5016
2024-06-15 15:52:47.925 +05:30  INF  Application started. Press Ctrl+C to shut down.
2024-06-15 15:52:47.931 +05:30  INF  Hosting environment: Development
2024-06-15 15:52:47.940 +05:30  INF  Content root path: C:\Users\iTela\Documents\Assignment\sample project structure\ShoppingApp\API
2024-06-15 15:52:51.475 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/index.html - null null
2024-06-15 15:52:51.733 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/index.html - 200 null text/html;charset=utf-8 263.86ms
2024-06-15 15:52:51.757 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - null null
2024-06-15 15:52:51.757 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_vs/browserLink - null null
2024-06-15 15:52:51.765 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 7.8376ms
2024-06-15 15:52:51.812 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_vs/browserLink - 200 null text/javascript; charset=UTF-8 55.0062ms
2024-06-15 15:52:52.016 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - null null
2024-06-15 15:52:52.192 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 175.8127ms
2024-06-15 15:53:36.119 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/User/register - application/json 395
2024-06-15 15:53:36.218 +05:30  INF  Executing endpoint 'API.Controllers.UserController.Signup (API)'
2024-06-15 15:53:36.254 +05:30  INF  Route matched with {action = "Signup", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Signup(Application.DTOs.SignUpDTO) on controller API.Controllers.UserController (API).
2024-06-15 15:53:38.964 +05:30  INF  Executing BadRequestObjectResult, writing value of type 'System.String'.
2024-06-15 15:53:38.972 +05:30  INF  Executed action API.Controllers.UserController.Signup (API) in 2710.9387ms
2024-06-15 15:53:38.974 +05:30  INF  Executed endpoint 'API.Controllers.UserController.Signup (API)'
2024-06-15 15:53:38.985 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/User/register - 400 null application/json; charset=utf-8 2867.0999ms
2024-06-15 15:55:41.369 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/User/register - application/json 227
2024-06-15 15:55:41.389 +05:30  INF  Executing endpoint 'API.Controllers.UserController.Signup (API)'
2024-06-15 15:55:41.390 +05:30  INF  Route matched with {action = "Signup", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Signup(Application.DTOs.SignUpDTO) on controller API.Controllers.UserController (API).
2024-06-15 15:55:42.565 +05:30  INF  Executing BadRequestObjectResult, writing value of type 'System.String'.
2024-06-15 15:55:42.568 +05:30  INF  Executed action API.Controllers.UserController.Signup (API) in 1174.8949ms
2024-06-15 15:55:42.570 +05:30  INF  Executed endpoint 'API.Controllers.UserController.Signup (API)'
2024-06-15 15:55:42.573 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/User/register - 400 null application/json; charset=utf-8 1205.0262ms
2024-06-15 15:56:01.076 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/User/register - application/json 227
2024-06-15 15:56:01.082 +05:30  INF  Executing endpoint 'API.Controllers.UserController.Signup (API)'
2024-06-15 15:56:01.084 +05:30  INF  Route matched with {action = "Signup", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Signup(Application.DTOs.SignUpDTO) on controller API.Controllers.UserController (API).
2024-06-15 15:56:07.783 +05:30  INF  Executing BadRequestObjectResult, writing value of type 'System.String'.
2024-06-15 15:56:07.785 +05:30  INF  Executed action API.Controllers.UserController.Signup (API) in 6697.2555ms
2024-06-15 15:56:07.786 +05:30  INF  Executed endpoint 'API.Controllers.UserController.Signup (API)'
2024-06-15 15:56:07.788 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/User/register - 400 null application/json; charset=utf-8 6711.8175ms
2024-06-15 15:56:46.435 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/User/register - application/json 231
2024-06-15 15:56:46.453 +05:30  INF  Executing endpoint 'API.Controllers.UserController.Signup (API)'
2024-06-15 15:56:46.454 +05:30  INF  Route matched with {action = "Signup", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Signup(Application.DTOs.SignUpDTO) on controller API.Controllers.UserController (API).
2024-06-15 15:56:57.175 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - application/json; charset=utf-8 1102
2024-06-15 15:56:57.181 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 15:56:57.190 +05:30  INF  Route matched with {action = "Index", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.PaymentController (API).
2024-06-15 15:56:57.267 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 15:56:57.276 +05:30  INF  Executed action API.Controllers.PaymentController.Index (API) in 82.4536ms
2024-06-15 15:56:57.278 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 15:56:57.280 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - 200 null application/json; charset=utf-8 104.9403ms
2024-06-15 15:57:09.773 +05:30  INF  Executed DbCommand (54ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([UserId], [Email], [FirstName], [LastName], [PhoneNumber], [StripeId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2024-06-15 15:57:09.887 +05:30  INF  Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Boolean), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Addresses] ([City], [IsPrimary], [PostalCode], [StreetName], [UserId])
OUTPUT INSERTED.[AddressId]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-06-15 15:57:18.729 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 15:57:18.732 +05:30  INF  Executed action API.Controllers.UserController.Signup (API) in 32276.4749ms
2024-06-15 15:57:18.734 +05:30  INF  Executed endpoint 'API.Controllers.UserController.Signup (API)'
2024-06-15 15:57:18.740 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/User/register - 200 null application/json; charset=utf-8 32305.8204ms
2024-06-15 15:59:13.882 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/index.html - null null
2024-06-15 15:59:13.914 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/index.html - 200 null text/html;charset=utf-8 32.3718ms
2024-06-15 15:59:13.944 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_vs/browserLink - null null
2024-06-15 15:59:13.944 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - null null
2024-06-15 15:59:13.953 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 9.0172ms
2024-06-15 15:59:13.977 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_vs/browserLink - 200 null text/javascript; charset=UTF-8 33.0482ms
2024-06-15 15:59:14.162 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - null null
2024-06-15 15:59:14.255 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 93.052ms
2024-06-15 16:02:56.929 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/User/register - application/json 235
2024-06-15 16:02:56.946 +05:30  INF  Executing endpoint 'API.Controllers.UserController.Signup (API)'
2024-06-15 16:02:56.951 +05:30  INF  Route matched with {action = "Signup", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Signup(Application.DTOs.SignUpDTO) on controller API.Controllers.UserController (API).
2024-06-15 16:03:08.926 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - application/json; charset=utf-8 1106
2024-06-15 16:03:08.940 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:03:08.941 +05:30  INF  Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([UserId], [Email], [FirstName], [LastName], [PhoneNumber], [StripeId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2024-06-15 16:03:08.952 +05:30  INF  Route matched with {action = "Index", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.PaymentController (API).
2024-06-15 16:03:11.130 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 16:03:11.184 +05:30  INF  Executed action API.Controllers.PaymentController.Index (API) in 58.3526ms
2024-06-15 16:03:11.186 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:03:11.189 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - 200 null application/json; charset=utf-8 2262.999ms
2024-06-15 16:03:11.193 +05:30  INF  Executed DbCommand (61ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Boolean), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Addresses] ([City], [IsPrimary], [PostalCode], [StreetName], [UserId])
OUTPUT INSERTED.[AddressId]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-06-15 16:03:11.258 +05:30  ERR  An exception occurred in the database while saving changes for context type 'Infrastructure.Data.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Addresses_Users_UserId". The conflict occurred in database "Shop", table "dbo.Users", column 'UserId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:bf943be7-f69a-4f17-8920-a46fc5a2a118
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Addresses_Users_UserId". The conflict occurred in database "Shop", table "dbo.Users", column 'UserId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:bf943be7-f69a-4f17-8920-a46fc5a2a118
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)

2024-06-15 16:03:14.834 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 16:03:14.928 +05:30  INF  Executed action API.Controllers.UserController.Signup (API) in 17973.2987ms
2024-06-15 16:03:14.930 +05:30  INF  Executed endpoint 'API.Controllers.UserController.Signup (API)'
2024-06-15 16:03:14.963 +05:30  ERR  An unhandled exception has occurred while executing the request.System.Text.Json.JsonException: A possible object cycle was detected. This can either be due to a cycle or if the object depth is larger than the maximum allowed depth of 32. Consider using ReferenceHandler.Preserve on JsonSerializerOptions to support cycles. Path: $.data.Entries.Context.ChangeTracker.Context.ChangeTracker.Context.ChangeTracker.Context.ChangeTracker.Context.ChangeTracker.Context.ChangeTracker.Context.ChangeTracker.Context.ChangeTracker.Context.ChangeTracker.Context.ChangeTracker.Context.ChangeTracker.Context.ChangeTracker.Context.ChangeTracker.Context.Database.AutoTransactionsEnabled.
   at System.Text.Json.ThrowHelper.ThrowJsonException_SerializerCycleDetected(Int32 maxDepth)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWriteAsObject(Utf8JsonWriter writer, Object value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(Stream utf8Json, T rootValue, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(Stream utf8Json, T rootValue, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(Stream utf8Json, T rootValue, CancellationToken cancellationToken, Object rootValueBoxed)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)

2024-06-15 16:03:15.054 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/User/register - 500 null text/plain; charset=utf-8 18125.8496ms
2024-06-15 16:04:17.142 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/User/register - application/json 236
2024-06-15 16:04:17.154 +05:30  INF  Executing endpoint 'API.Controllers.UserController.Signup (API)'
2024-06-15 16:04:17.156 +05:30  INF  Route matched with {action = "Signup", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Signup(Application.DTOs.SignUpDTO) on controller API.Controllers.UserController (API).
2024-06-15 16:04:24.938 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - application/json; charset=utf-8 1107
2024-06-15 16:04:24.951 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:04:24.955 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([UserId], [Email], [FirstName], [LastName], [PhoneNumber], [StripeId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2024-06-15 16:04:24.956 +05:30  INF  Route matched with {action = "Index", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.PaymentController (API).
2024-06-15 16:04:34.162 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Boolean), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Addresses] ([City], [IsPrimary], [PostalCode], [StreetName], [UserId])
OUTPUT INSERTED.[AddressId]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-06-15 16:04:34.167 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 16:04:34.169 +05:30  INF  Executed action API.Controllers.PaymentController.Index (API) in 13.0404ms
2024-06-15 16:04:34.170 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:04:34.181 +05:30  ERR  An exception occurred in the database while saving changes for context type 'Infrastructure.Data.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Addresses_Users_UserId". The conflict occurred in database "Shop", table "dbo.Users", column 'UserId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:bf943be7-f69a-4f17-8920-a46fc5a2a118
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Addresses_Users_UserId". The conflict occurred in database "Shop", table "dbo.Users", column 'UserId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:bf943be7-f69a-4f17-8920-a46fc5a2a118
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)

2024-06-15 16:04:34.185 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - 200 null application/json; charset=utf-8 9246.9474ms
2024-06-15 16:04:36.410 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 16:04:36.415 +05:30  INF  Executed action API.Controllers.UserController.Signup (API) in 19254.6988ms
2024-06-15 16:04:36.417 +05:30  INF  Executed endpoint 'API.Controllers.UserController.Signup (API)'
2024-06-15 16:04:36.439 +05:30  ERR  An unhandled exception has occurred while executing the request.System.Text.Json.JsonException: A possible object cycle was detected. This can either be due to a cycle or if the object depth is larger than the maximum allowed depth of 32. Consider using ReferenceHandler.Preserve on JsonSerializerOptions to support cycles. Path: $.data.Entries.Context.ChangeTracker.Context.ChangeTracker.Context.ChangeTracker.Context.ChangeTracker.Context.ChangeTracker.Context.ChangeTracker.Context.ChangeTracker.Context.ChangeTracker.Context.ChangeTracker.Context.ChangeTracker.Context.ChangeTracker.Context.ChangeTracker.Context.ChangeTracker.Context.Database.AutoTransactionsEnabled.
   at System.Text.Json.ThrowHelper.ThrowJsonException_SerializerCycleDetected(Int32 maxDepth)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWriteAsObject(Utf8JsonWriter writer, Object value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(Stream utf8Json, T rootValue, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(Stream utf8Json, T rootValue, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(Stream utf8Json, T rootValue, CancellationToken cancellationToken, Object rootValueBoxed)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)

2024-06-15 16:04:36.532 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/User/register - 500 null text/plain; charset=utf-8 19389.5944ms
2024-06-15 16:05:44.440 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/index.html - null null
2024-06-15 16:05:44.462 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/index.html - 200 null text/html;charset=utf-8 22.2887ms
2024-06-15 16:05:44.504 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - null null
2024-06-15 16:05:44.504 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_vs/browserLink - null null
2024-06-15 16:05:44.509 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 4.966ms
2024-06-15 16:05:44.539 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_vs/browserLink - 200 null text/javascript; charset=UTF-8 34.5858ms
2024-06-15 16:05:44.759 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - null null
2024-06-15 16:05:44.793 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 34.0786ms
2024-06-15 16:06:06.847 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/User/register - application/json 231
2024-06-15 16:06:06.853 +05:30  INF  Executing endpoint 'API.Controllers.UserController.Signup (API)'
2024-06-15 16:06:06.858 +05:30  INF  Route matched with {action = "Signup", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Signup(Application.DTOs.SignUpDTO) on controller API.Controllers.UserController (API).
2024-06-15 16:06:11.153 +05:30  INF  Executed DbCommand (66ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([UserId], [Email], [FirstName], [LastName], [PhoneNumber], [StripeId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2024-06-15 16:06:15.420 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - application/json; charset=utf-8 1102
2024-06-15 16:06:15.431 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:06:15.435 +05:30  INF  Route matched with {action = "Index", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.PaymentController (API).
2024-06-15 16:06:15.441 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 16:06:15.444 +05:30  INF  Executed action API.Controllers.PaymentController.Index (API) in 4.1197ms
2024-06-15 16:06:15.445 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:06:15.447 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - 200 null application/json; charset=utf-8 27.4235ms
2024-06-15 16:06:15.462 +05:30  INF  Executed DbCommand (38ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Boolean), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Addresses] ([City], [IsPrimary], [PostalCode], [StreetName], [UserId])
OUTPUT INSERTED.[AddressId]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-06-15 16:06:19.518 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 16:06:19.520 +05:30  INF  Executed action API.Controllers.UserController.Signup (API) in 12660.1422ms
2024-06-15 16:06:19.522 +05:30  INF  Executed endpoint 'API.Controllers.UserController.Signup (API)'
2024-06-15 16:06:19.525 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/User/register - 200 null application/json; charset=utf-8 12677.8199ms
2024-06-15 16:21:40.429 +05:30  INF  User profile is available. Using 'C:\Users\iTela\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-15 16:21:40.734 +05:30  INF  Now listening on: https://localhost:7220
2024-06-15 16:21:40.740 +05:30  INF  Now listening on: http://localhost:5016
2024-06-15 16:21:40.768 +05:30  INF  Application started. Press Ctrl+C to shut down.
2024-06-15 16:21:40.774 +05:30  INF  Hosting environment: Development
2024-06-15 16:21:40.781 +05:30  INF  Content root path: C:\Users\iTela\Documents\Assignment\sample project structure\ShoppingApp\API
2024-06-15 16:21:41.221 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/index.html - null null
2024-06-15 16:21:41.530 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/index.html - 200 null text/html;charset=utf-8 314.83ms
2024-06-15 16:21:41.547 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_vs/browserLink - null null
2024-06-15 16:21:41.547 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - null null
2024-06-15 16:21:41.571 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 24.5235ms
2024-06-15 16:21:41.612 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_vs/browserLink - 200 null text/javascript; charset=UTF-8 65.4005ms
2024-06-15 16:21:41.661 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - null null
2024-06-15 16:21:41.812 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 151.1257ms
2024-06-15 16:23:14.474 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/User/login - application/json 75
2024-06-15 16:23:14.565 +05:30  INF  Executing endpoint 'API.Controllers.UserController.Login (API)'
2024-06-15 16:23:14.601 +05:30  INF  Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Application.DTOs.LoginDTO) on controller API.Controllers.UserController (API).
2024-06-15 16:23:17.460 +05:30  INF  Executed action API.Controllers.UserController.Login (API) in 2851.1577ms
2024-06-15 16:23:17.463 +05:30  INF  Executed endpoint 'API.Controllers.UserController.Login (API)'
2024-06-15 16:23:17.502 +05:30  ERR  An unhandled exception has occurred while executing the request.Auth0.Core.Exceptions.ErrorApiException: Wrong email or password.
   at Auth0.AuthenticationApi.HttpClientAuthenticationConnection.SendRequest[T](HttpRequestMessage request, CancellationToken cancellationToken)
   at Auth0.AuthenticationApi.HttpClientAuthenticationConnection.SendAsync[T](HttpMethod method, Uri uri, Object body, IDictionary`2 headers, CancellationToken cancellationToken)
   at Auth0.AuthenticationApi.AuthenticationApiClient.GetTokenAsync(ResourceOwnerTokenRequest request, CancellationToken cancellationToken)
   at Infrastructure.Authentication.Authentication.AuthenticateUser(LoginDTO user) in C:\Users\iTela\Documents\Assignment\sample project structure\ShoppingApp\Infrastructure\Authentication\Authentication.cs:line 85
   at Application.Services.Implementation.UserService.LoginAsync(LoginDTO user) in C:\Users\iTela\Documents\Assignment\sample project structure\ShoppingApp\Application\Services\Implementation\UserService.cs:line 117
   at API.Controllers.UserController.Login(LoginDTO model) in C:\Users\iTela\Documents\Assignment\sample project structure\ShoppingApp\API\Controllers\UserController.cs:line 73
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)

2024-06-15 16:23:17.538 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/User/login - 500 null text/plain; charset=utf-8 3063.3943ms
2024-06-15 16:23:26.842 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/User/login - application/json 75
2024-06-15 16:23:26.848 +05:30  INF  Executing endpoint 'API.Controllers.UserController.Login (API)'
2024-06-15 16:23:26.849 +05:30  INF  Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Application.DTOs.LoginDTO) on controller API.Controllers.UserController (API).
2024-06-15 16:23:27.942 +05:30  INF  Executed action API.Controllers.UserController.Login (API) in 1089.7078ms
2024-06-15 16:23:27.944 +05:30  INF  Executed endpoint 'API.Controllers.UserController.Login (API)'
2024-06-15 16:23:27.954 +05:30  ERR  An unhandled exception has occurred while executing the request.Auth0.Core.Exceptions.ErrorApiException: Wrong email or password.
   at Auth0.AuthenticationApi.HttpClientAuthenticationConnection.SendRequest[T](HttpRequestMessage request, CancellationToken cancellationToken)
   at Auth0.AuthenticationApi.HttpClientAuthenticationConnection.SendAsync[T](HttpMethod method, Uri uri, Object body, IDictionary`2 headers, CancellationToken cancellationToken)
   at Auth0.AuthenticationApi.AuthenticationApiClient.GetTokenAsync(ResourceOwnerTokenRequest request, CancellationToken cancellationToken)
   at Infrastructure.Authentication.Authentication.AuthenticateUser(LoginDTO user) in C:\Users\iTela\Documents\Assignment\sample project structure\ShoppingApp\Infrastructure\Authentication\Authentication.cs:line 85
   at Application.Services.Implementation.UserService.LoginAsync(LoginDTO user) in C:\Users\iTela\Documents\Assignment\sample project structure\ShoppingApp\Application\Services\Implementation\UserService.cs:line 117
   at API.Controllers.UserController.Login(LoginDTO model) in C:\Users\iTela\Documents\Assignment\sample project structure\ShoppingApp\API\Controllers\UserController.cs:line 73
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)

2024-06-15 16:23:27.975 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/User/login - 500 null text/plain; charset=utf-8 1132.9877ms
2024-06-15 16:27:40.580 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/User/login - application/json 76
2024-06-15 16:27:40.592 +05:30  INF  Executing endpoint 'API.Controllers.UserController.Login (API)'
2024-06-15 16:27:40.595 +05:30  INF  Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Application.DTOs.LoginDTO) on controller API.Controllers.UserController (API).
2024-06-15 16:27:42.745 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.User.LoginResponse'.
2024-06-15 16:27:42.751 +05:30  INF  Executed action API.Controllers.UserController.Login (API) in 2152.9756ms
2024-06-15 16:27:42.754 +05:30  INF  Executed endpoint 'API.Controllers.UserController.Login (API)'
2024-06-15 16:27:42.756 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/User/login - 200 null application/json; charset=utf-8 2176.3019ms
2024-06-15 16:27:59.528 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/api/Cart/get-all-cartItems - null null
2024-06-15 16:28:00.419 +05:30  INF  Executing endpoint 'API.Controllers.CartController.GetAllCartItems (API)'
2024-06-15 16:28:00.428 +05:30  INF  Route matched with {action = "GetAllCartItems", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllCartItems() on controller API.Controllers.CartController (API).
2024-06-15 16:28:02.406 +05:30  INF  Executed DbCommand (89ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-06-15 16:28:02.440 +05:30  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.DTOs.Cart.CartItemResponse, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-15 16:28:02.450 +05:30  INF  Executed action API.Controllers.CartController.GetAllCartItems (API) in 2019.5232ms
2024-06-15 16:28:02.453 +05:30  INF  Executed endpoint 'API.Controllers.CartController.GetAllCartItems (API)'
2024-06-15 16:28:02.459 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/api/Cart/get-all-cartItems - 200 null application/json; charset=utf-8 2931.9067ms
2024-06-15 16:28:29.228 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/api/Cart/add-to-cart - application/json 38
2024-06-15 16:28:29.243 +05:30  INF  Executing endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-06-15 16:28:29.249 +05:30  INF  Route matched with {action = "AddToCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToCart(Application.DTOs.Cart.CartItemRequset) on controller API.Controllers.CartController (API).
2024-06-15 16:28:29.317 +05:30  INF  Executed DbCommand (34ms) [Parameters=[@__userId_0='?' (Size = 450), @__itemId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__userId_0 AND [u].[ProductId] = @__itemId_1
2024-06-15 16:28:29.537 +05:30  INF  Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserProducts] ([ProductId], [userId], [Quantity])
VALUES (@p0, @p1, @p2);
2024-06-15 16:28:29.555 +05:30  INF  Cart item successfully added
2024-06-15 16:28:29.556 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-06-15 16:28:29.558 +05:30  INF  Executed action API.Controllers.CartController.AddToCart (API) in 304.2166ms
2024-06-15 16:28:29.559 +05:30  INF  Executed endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-06-15 16:28:29.561 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/api/Cart/add-to-cart - 200 null application/json; charset=utf-8 333.3412ms
2024-06-15 16:28:43.674 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/api/Cart/get-all-cartItems - null null
2024-06-15 16:28:43.691 +05:30  INF  Executing endpoint 'API.Controllers.CartController.GetAllCartItems (API)'
2024-06-15 16:28:43.692 +05:30  INF  Route matched with {action = "GetAllCartItems", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllCartItems() on controller API.Controllers.CartController (API).
2024-06-15 16:28:43.716 +05:30  INF  Executed DbCommand (10ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-06-15 16:28:43.731 +05:30  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.DTOs.Cart.CartItemResponse, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-15 16:28:43.738 +05:30  INF  Executed action API.Controllers.CartController.GetAllCartItems (API) in 42.2407ms
2024-06-15 16:28:43.740 +05:30  INF  Executed endpoint 'API.Controllers.CartController.GetAllCartItems (API)'
2024-06-15 16:28:43.742 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/api/Cart/get-all-cartItems - 200 null application/json; charset=utf-8 68.9357ms
2024-06-15 16:29:01.357 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/api/Payment - null 0
2024-06-15 16:29:01.362 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Checkout (API)'
2024-06-15 16:29:01.368 +05:30  INF  Route matched with {action = "Checkout", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Checkout() on controller API.Controllers.PaymentController (API).
2024-06-15 16:29:01.388 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
FROM [Users] AS [u]
WHERE [u].[UserId] = @__userId_0
2024-06-15 16:29:01.396 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-06-15 16:29:01.410 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__userId_0
2024-06-15 16:29:01.425 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__item_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__item_ProductId_0
2024-06-15 16:29:01.494 +05:30  INF  Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([OrderDate], [PaymentId], [Status], [TotalAmount], [UserId])
OUTPUT INSERTED.[OrderId]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-06-15 16:29:01.548 +05:30  INF  Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderProducts] ([OrderId], [ProductId], [OrderQty], [UnitPrice])
VALUES (@p0, @p1, @p2, @p3);
2024-06-15 16:29:02.672 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-06-15 16:29:02.677 +05:30  INF  Executed action API.Controllers.PaymentController.Checkout (API) in 1305.1773ms
2024-06-15 16:29:02.680 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Checkout (API)'
2024-06-15 16:29:02.682 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/api/Payment - 200 null application/json; charset=utf-8 1325.1281ms
2024-06-15 16:29:31.787 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - application/json; charset=utf-8 3508
2024-06-15 16:29:31.787 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - application/json; charset=utf-8 1960
2024-06-15 16:29:31.791 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:29:31.795 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:29:31.799 +05:30  INF  Route matched with {action = "Index", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.PaymentController (API).
2024-06-15 16:29:31.800 +05:30  INF  Route matched with {action = "Index", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.PaymentController (API).
2024-06-15 16:29:31.852 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - application/json; charset=utf-8 1918
2024-06-15 16:29:31.856 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:29:31.857 +05:30  INF  Route matched with {action = "Index", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.PaymentController (API).
2024-06-15 16:29:31.873 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - application/json; charset=utf-8 3294
2024-06-15 16:29:31.877 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:29:31.878 +05:30  INF  Route matched with {action = "Index", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.PaymentController (API).
2024-06-15 16:29:31.896 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 16:29:31.896 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 16:29:31.909 +05:30  INF  Executed action API.Controllers.PaymentController.Index (API) in 104.6465ms
2024-06-15 16:29:31.909 +05:30  INF  Executed action API.Controllers.PaymentController.Index (API) in 46.6854ms
2024-06-15 16:29:31.911 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:29:31.913 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:29:31.915 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 16:29:31.915 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - 200 null application/json; charset=utf-8 128.3587ms
2024-06-15 16:29:31.918 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - 200 null application/json; charset=utf-8 65.7606ms
2024-06-15 16:29:35.914 +05:30  INF  Executed action API.Controllers.PaymentController.Index (API) in 4111.7055ms
2024-06-15 16:29:35.925 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - application/json; charset=utf-8 3733
2024-06-15 16:29:35.927 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:29:35.932 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:29:35.933 +05:30  INF  Executed DbCommand (7ms) [Parameters=[@__paymentResponse_OrderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[OrderId], [o].[OrderDate], [o].[PaymentId], [o].[Status], [o].[TotalAmount], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[OrderId] = @__paymentResponse_OrderId_0
2024-06-15 16:29:35.934 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - 200 null application/json; charset=utf-8 4147.0386ms
2024-06-15 16:29:35.935 +05:30  INF  Route matched with {action = "Index", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.PaymentController (API).
2024-06-15 16:29:35.953 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 16:29:35.954 +05:30  INF  Executed action API.Controllers.PaymentController.Index (API) in 8.2571ms
2024-06-15 16:29:35.956 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:29:35.957 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - 200 null application/json; charset=utf-8 32.9128ms
2024-06-15 16:29:35.973 +05:30  INF  Executed DbCommand (4ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Orders] SET [OrderDate] = @p0, [PaymentId] = @p1, [Status] = @p2, [TotalAmount] = @p3, [UserId] = @p4
OUTPUT 1
WHERE [OrderId] = @p5;
2024-06-15 16:29:35.989 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__id_0
2024-06-15 16:29:36.002 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@__cartItem_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__cartItem_ProductId_0
2024-06-15 16:29:36.029 +05:30  INF  Executed DbCommand (4ms) [Parameters=[@p7='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = Double), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Double), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Description] = @p0, [Discount] = @p1, [ImageUrl] = @p2, [Name] = @p3, [Price] = @p4, [ProductCategoryId] = @p5, [Quantity] = @p6
OUTPUT 1
WHERE [ProductId] = @p7;
2024-06-15 16:29:36.041 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@__UserId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__UserId_0
2024-06-15 16:29:36.058 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [UserProducts]
OUTPUT 1
WHERE [ProductId] = @p0 AND [userId] = @p1;
2024-06-15 16:29:36.136 +05:30  INF  Executed DbCommand (15ms) [Parameters=[@__orderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[OrderId], [t].[OrderDate], [t].[PaymentId], [t].[Status], [t].[TotalAmount], [t].[UserId], [t].[UserId0], [t].[Email], [t].[FirstName], [t].[LastName], [t].[PhoneNumber], [t].[StripeId], [t0].[OrderId], [t0].[ProductId], [t0].[OrderQty], [t0].[UnitPrice], [t0].[ProductId0], [t0].[Description], [t0].[Discount], [t0].[ImageUrl], [t0].[Name], [t0].[Price], [t0].[ProductCategoryId], [t0].[Quantity]
FROM (
    SELECT TOP(1) [o].[OrderId], [o].[OrderDate], [o].[PaymentId], [o].[Status], [o].[TotalAmount], [o].[UserId], [u].[UserId] AS [UserId0], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
    FROM [Orders] AS [o]
    INNER JOIN [Users] AS [u] ON [o].[UserId] = [u].[UserId]
    WHERE [o].[OrderId] = @__orderId_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[OrderId], [o0].[ProductId], [o0].[OrderQty], [o0].[UnitPrice], [p].[ProductId] AS [ProductId0], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
    FROM [OrderProducts] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[ProductId]
) AS [t0] ON [t].[OrderId] = [t0].[OrderId]
ORDER BY [t].[OrderId], [t].[UserId0], [t0].[OrderId], [t0].[ProductId]
2024-06-15 16:29:37.424 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 16:29:37.428 +05:30  INF  Executed action API.Controllers.PaymentController.Index (API) in 5544.9742ms
2024-06-15 16:29:37.429 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:29:37.431 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - 200 null application/json; charset=utf-8 5557.983ms
2024-06-15 16:30:07.654 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/api/Cart/get-all-cartItems - null null
2024-06-15 16:30:07.657 +05:30  INF  Executing endpoint 'API.Controllers.CartController.GetAllCartItems (API)'
2024-06-15 16:30:07.659 +05:30  INF  Route matched with {action = "GetAllCartItems", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllCartItems() on controller API.Controllers.CartController (API).
2024-06-15 16:30:07.677 +05:30  INF  Executed DbCommand (11ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-06-15 16:30:07.680 +05:30  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.DTOs.Cart.CartItemResponse, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-15 16:30:07.681 +05:30  INF  Executed action API.Controllers.CartController.GetAllCartItems (API) in 19.7606ms
2024-06-15 16:30:07.684 +05:30  INF  Executed endpoint 'API.Controllers.CartController.GetAllCartItems (API)'
2024-06-15 16:30:07.685 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/api/Cart/get-all-cartItems - 200 null application/json; charset=utf-8 32.0364ms
2024-06-15 16:30:18.212 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/api/Payment/Get-user-payments - null null
2024-06-15 16:30:18.216 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.UserPayments (API)'
2024-06-15 16:30:18.220 +05:30  INF  Route matched with {action = "UserPayments", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UserPayments() on controller API.Controllers.PaymentController (API).
2024-06-15 16:30:18.269 +05:30  INF  Executed DbCommand (33ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[OrderId], [o].[OrderDate], [o].[PaymentId], [o].[Status], [o].[TotalAmount], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[UserId] = @__userId_0
2024-06-15 16:30:18.283 +05:30  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.DTOs.Order.PaymentInfoDTO, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-15 16:30:18.305 +05:30  INF  Executed action API.Controllers.PaymentController.UserPayments (API) in 82.2441ms
2024-06-15 16:30:18.315 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.UserPayments (API)'
2024-06-15 16:30:18.318 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/api/Payment/Get-user-payments - 200 null application/json; charset=utf-8 106.7006ms
2024-06-15 16:34:56.607 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/index.html - null null
2024-06-15 16:34:56.645 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/index.html - 200 null text/html;charset=utf-8 38.1569ms
2024-06-15 16:34:56.670 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - null null
2024-06-15 16:34:56.672 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_vs/browserLink - null null
2024-06-15 16:34:56.676 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 5.9465ms
2024-06-15 16:34:56.707 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_vs/browserLink - 200 null text/javascript; charset=UTF-8 35.7079ms
2024-06-15 16:34:56.854 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - null null
2024-06-15 16:34:56.901 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 48.2149ms
2024-06-15 16:35:45.113 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/api/Cart/get-all-cartItems - null null
2024-06-15 16:35:45.125 +05:30  INF  Executing endpoint 'API.Controllers.CartController.GetAllCartItems (API)'
2024-06-15 16:35:45.129 +05:30  INF  Route matched with {action = "GetAllCartItems", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllCartItems() on controller API.Controllers.CartController (API).
2024-06-15 16:35:46.186 +05:30  INF  Executed DbCommand (16ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-06-15 16:35:46.195 +05:30  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.DTOs.Cart.CartItemResponse, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-15 16:35:46.200 +05:30  INF  Executed action API.Controllers.CartController.GetAllCartItems (API) in 1069.0013ms
2024-06-15 16:35:46.203 +05:30  INF  Executed endpoint 'API.Controllers.CartController.GetAllCartItems (API)'
2024-06-15 16:35:46.204 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/api/Cart/get-all-cartItems - 200 null application/json; charset=utf-8 1092.4049ms
2024-06-15 16:36:34.877 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/api/Cart/add-to-cart - application/json 38
2024-06-15 16:36:34.890 +05:30  INF  Executing endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-06-15 16:36:34.894 +05:30  INF  Route matched with {action = "AddToCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToCart(Application.DTOs.Cart.CartItemRequset) on controller API.Controllers.CartController (API).
2024-06-15 16:36:34.913 +05:30  INF  Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450), @__itemId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__userId_0 AND [u].[ProductId] = @__itemId_1
2024-06-15 16:36:34.985 +05:30  INF  Executed DbCommand (61ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserProducts] ([ProductId], [userId], [Quantity])
VALUES (@p0, @p1, @p2);
2024-06-15 16:36:34.991 +05:30  INF  Cart item successfully added
2024-06-15 16:36:34.993 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-06-15 16:36:34.994 +05:30  INF  Executed action API.Controllers.CartController.AddToCart (API) in 97.5946ms
2024-06-15 16:36:34.997 +05:30  INF  Executed endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-06-15 16:36:34.999 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/api/Cart/add-to-cart - 200 null application/json; charset=utf-8 121.9434ms
2024-06-15 16:36:39.859 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/api/Cart/add-to-cart - application/json 38
2024-06-15 16:36:39.863 +05:30  INF  Executing endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-06-15 16:36:39.870 +05:30  INF  Route matched with {action = "AddToCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToCart(Application.DTOs.Cart.CartItemRequset) on controller API.Controllers.CartController (API).
2024-06-15 16:36:39.884 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450), @__itemId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__userId_0 AND [u].[ProductId] = @__itemId_1
2024-06-15 16:36:39.944 +05:30  INF  Executed DbCommand (48ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserProducts] ([ProductId], [userId], [Quantity])
VALUES (@p0, @p1, @p2);
2024-06-15 16:36:39.961 +05:30  INF  Cart item successfully added
2024-06-15 16:36:39.965 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-06-15 16:36:39.968 +05:30  INF  Executed action API.Controllers.CartController.AddToCart (API) in 93.8927ms
2024-06-15 16:36:39.970 +05:30  INF  Executed endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-06-15 16:36:39.972 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/api/Cart/add-to-cart - 200 null application/json; charset=utf-8 112.6146ms
2024-06-15 16:36:44.712 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/api/Cart/get-all-cartItems - null null
2024-06-15 16:36:44.716 +05:30  INF  Executing endpoint 'API.Controllers.CartController.GetAllCartItems (API)'
2024-06-15 16:36:44.717 +05:30  INF  Route matched with {action = "GetAllCartItems", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllCartItems() on controller API.Controllers.CartController (API).
2024-06-15 16:36:44.729 +05:30  INF  Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-06-15 16:36:44.733 +05:30  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.DTOs.Cart.CartItemResponse, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-15 16:36:44.736 +05:30  INF  Executed action API.Controllers.CartController.GetAllCartItems (API) in 15.3157ms
2024-06-15 16:36:44.738 +05:30  INF  Executed endpoint 'API.Controllers.CartController.GetAllCartItems (API)'
2024-06-15 16:36:44.740 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/api/Cart/get-all-cartItems - 200 null application/json; charset=utf-8 27.5615ms
2024-06-15 16:36:50.306 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/api/Payment - null 0
2024-06-15 16:36:50.311 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Checkout (API)'
2024-06-15 16:36:50.315 +05:30  INF  Route matched with {action = "Checkout", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Checkout() on controller API.Controllers.PaymentController (API).
2024-06-15 16:36:50.326 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
FROM [Users] AS [u]
WHERE [u].[UserId] = @__userId_0
2024-06-15 16:36:50.333 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-06-15 16:36:50.342 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__userId_0
2024-06-15 16:36:50.350 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@__item_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__item_ProductId_0
2024-06-15 16:36:50.358 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@__item_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__item_ProductId_0
2024-06-15 16:36:50.371 +05:30  INF  Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([OrderDate], [PaymentId], [Status], [TotalAmount], [UserId])
OUTPUT INSERTED.[OrderId]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-06-15 16:36:50.383 +05:30  INF  Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderProducts] ([OrderId], [ProductId], [OrderQty], [UnitPrice])
VALUES (@p0, @p1, @p2, @p3);
2024-06-15 16:36:50.392 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderProducts] ([OrderId], [ProductId], [OrderQty], [UnitPrice])
VALUES (@p0, @p1, @p2, @p3);
2024-06-15 16:36:51.465 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-06-15 16:36:51.468 +05:30  INF  Executed action API.Controllers.PaymentController.Checkout (API) in 1149.3666ms
2024-06-15 16:36:51.470 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Checkout (API)'
2024-06-15 16:36:51.472 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/api/Payment - 200 null application/json; charset=utf-8 1166.1188ms
2024-06-15 16:37:14.848 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - application/json; charset=utf-8 3508
2024-06-15 16:37:14.855 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:37:14.860 +05:30  INF  Route matched with {action = "Index", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.PaymentController (API).
2024-06-15 16:37:14.864 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 16:37:14.868 +05:30  INF  Executed action API.Controllers.PaymentController.Index (API) in 5.7283ms
2024-06-15 16:37:14.870 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:37:14.872 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - 200 null application/json; charset=utf-8 23.9166ms
2024-06-15 16:37:14.876 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - application/json; charset=utf-8 1960
2024-06-15 16:37:14.880 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:37:14.881 +05:30  INF  Route matched with {action = "Index", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.PaymentController (API).
2024-06-15 16:37:14.887 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 16:37:14.888 +05:30  INF  Executed action API.Controllers.PaymentController.Index (API) in 2.6492ms
2024-06-15 16:37:14.891 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:37:14.892 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - 200 null application/json; charset=utf-8 16.0031ms
2024-06-15 16:37:16.559 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - application/json; charset=utf-8 1918
2024-06-15 16:37:16.563 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - application/json; charset=utf-8 3294
2024-06-15 16:37:16.573 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:37:16.580 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:37:16.583 +05:30  INF  Route matched with {action = "Index", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.PaymentController (API).
2024-06-15 16:37:16.585 +05:30  INF  Route matched with {action = "Index", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.PaymentController (API).
2024-06-15 16:37:16.591 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 16:37:16.595 +05:30  INF  Executed action API.Controllers.PaymentController.Index (API) in 4.7848ms
2024-06-15 16:37:16.597 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:37:16.603 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - 200 null application/json; charset=utf-8 44.5299ms
2024-06-15 16:37:21.780 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - application/json; charset=utf-8 3733
2024-06-15 16:37:21.783 +05:30  INF  Executed DbCommand (4ms) [Parameters=[@__paymentResponse_OrderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[OrderId], [o].[OrderDate], [o].[PaymentId], [o].[Status], [o].[TotalAmount], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[OrderId] = @__paymentResponse_OrderId_0
2024-06-15 16:37:21.785 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:37:24.157 +05:30  INF  Route matched with {action = "Index", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.PaymentController (API).
2024-06-15 16:37:24.163 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 16:37:24.165 +05:30  INF  Executed action API.Controllers.PaymentController.Index (API) in 3.6696ms
2024-06-15 16:37:24.167 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:37:24.168 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - 200 null application/json; charset=utf-8 2388.0906ms
2024-06-15 16:37:24.202 +05:30  INF  Executed DbCommand (39ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Orders] SET [OrderDate] = @p0, [PaymentId] = @p1, [Status] = @p2, [TotalAmount] = @p3, [UserId] = @p4
OUTPUT 1
WHERE [OrderId] = @p5;
2024-06-15 16:37:24.250 +05:30  ERR  An exception occurred in the database while saving changes for context type 'Infrastructure.Data.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_Orders_Users_UserId". The conflict occurred in database "Shop", table "dbo.Users", column 'UserId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:33b6c75a-8653-4e67-95f1-327d4e65b5c0
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_Orders_Users_UserId". The conflict occurred in database "Shop", table "dbo.Users", column 'UserId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:33b6c75a-8653-4e67-95f1-327d4e65b5c0
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)

2024-06-15 16:37:24.905 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 16:37:24.978 +05:30  INF  Executed action API.Controllers.PaymentController.Index (API) in 8385.0152ms
2024-06-15 16:37:24.980 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:37:25.000 +05:30  ERR  An unhandled exception has occurred while executing the request.System.Text.Json.JsonException: A possible object cycle was detected. This can either be due to a cycle or if the object depth is larger than the maximum allowed depth of 32. Consider using ReferenceHandler.Preserve on JsonSerializerOptions to support cycles. Path: $.data.Entries.Context.ChangeTracker.Context.ChangeTracker.Context.ChangeTracker.Context.ChangeTracker.Context.ChangeTracker.Context.ChangeTracker.Context.ChangeTracker.Context.ChangeTracker.Context.ChangeTracker.Context.ChangeTracker.Context.ChangeTracker.Context.ChangeTracker.Context.ChangeTracker.Context.Database.AutoTransactionsEnabled.
   at System.Text.Json.ThrowHelper.ThrowJsonException_SerializerCycleDetected(Int32 maxDepth)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.IEnumerableDefaultConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWriteAsObject(Utf8JsonWriter writer, Object value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(Stream utf8Json, T rootValue, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(Stream utf8Json, T rootValue, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(Stream utf8Json, T rootValue, CancellationToken cancellationToken, Object rootValueBoxed)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)

2024-06-15 16:37:25.087 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - 500 null text/plain; charset=utf-8 8524.0964ms
2024-06-15 16:38:23.271 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/index.html - null null
2024-06-15 16:38:23.288 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/index.html - 200 null text/html;charset=utf-8 16.9214ms
2024-06-15 16:38:23.321 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - null null
2024-06-15 16:38:23.329 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 8.0971ms
2024-06-15 16:38:23.347 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_vs/browserLink - null null
2024-06-15 16:38:23.398 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_vs/browserLink - 200 null text/javascript; charset=UTF-8 50.5718ms
2024-06-15 16:38:23.512 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - null null
2024-06-15 16:38:23.540 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 27.7425ms
2024-06-15 16:38:38.123 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/index.html - null null
2024-06-15 16:38:38.138 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/index.html - 200 null text/html;charset=utf-8 14.6948ms
2024-06-15 16:38:38.163 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_vs/browserLink - null null
2024-06-15 16:38:38.163 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - null null
2024-06-15 16:38:38.179 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 16.9997ms
2024-06-15 16:38:38.188 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_vs/browserLink - 200 null text/javascript; charset=UTF-8 25.6019ms
2024-06-15 16:38:38.231 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - null null
2024-06-15 16:38:38.251 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 19.769ms
2024-06-15 16:39:17.183 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/api/Payment - null 0
2024-06-15 16:39:17.196 +05:30  INF  Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-06-15 16:39:17.236 +05:30  INF  AuthenticationScheme: Bearer was challenged.
2024-06-15 16:39:17.239 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/api/Payment - 401 0 null 56.0159ms
2024-06-15 16:39:38.304 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/api/Payment - null 0
2024-06-15 16:39:38.309 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Checkout (API)'
2024-06-15 16:39:38.314 +05:30  INF  Route matched with {action = "Checkout", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Checkout() on controller API.Controllers.PaymentController (API).
2024-06-15 16:39:38.328 +05:30  INF  Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
FROM [Users] AS [u]
WHERE [u].[UserId] = @__userId_0
2024-06-15 16:39:38.347 +05:30  INF  Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-06-15 16:39:38.356 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__userId_0
2024-06-15 16:39:38.364 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@__item_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__item_ProductId_0
2024-06-15 16:39:38.373 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@__item_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__item_ProductId_0
2024-06-15 16:39:38.384 +05:30  INF  Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([OrderDate], [PaymentId], [Status], [TotalAmount], [UserId])
OUTPUT INSERTED.[OrderId]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-06-15 16:39:38.395 +05:30  INF  Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderProducts] ([OrderId], [ProductId], [OrderQty], [UnitPrice])
VALUES (@p0, @p1, @p2, @p3);
2024-06-15 16:39:38.403 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderProducts] ([OrderId], [ProductId], [OrderQty], [UnitPrice])
VALUES (@p0, @p1, @p2, @p3);
2024-06-15 16:39:39.327 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-06-15 16:39:39.329 +05:30  INF  Executed action API.Controllers.PaymentController.Checkout (API) in 1012.106ms
2024-06-15 16:39:39.331 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Checkout (API)'
2024-06-15 16:39:39.333 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/api/Payment - 200 null application/json; charset=utf-8 1029.3174ms
2024-06-15 16:40:16.270 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - application/json; charset=utf-8 3508
2024-06-15 16:40:16.270 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - application/json; charset=utf-8 1960
2024-06-15 16:40:16.283 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:40:16.293 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:40:16.310 +05:30  INF  Route matched with {action = "Index", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.PaymentController (API).
2024-06-15 16:40:16.314 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - application/json; charset=utf-8 3294
2024-06-15 16:40:16.322 +05:30  INF  Route matched with {action = "Index", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.PaymentController (API).
2024-06-15 16:40:16.322 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 16:40:16.315 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - application/json; charset=utf-8 1918
2024-06-15 16:40:16.326 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:40:16.329 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 16:40:16.330 +05:30  INF  Executed action API.Controllers.PaymentController.Index (API) in 14.5143ms
2024-06-15 16:40:16.333 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:40:16.334 +05:30  INF  Route matched with {action = "Index", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.PaymentController (API).
2024-06-15 16:40:16.336 +05:30  INF  Executed action API.Controllers.PaymentController.Index (API) in 7.9872ms
2024-06-15 16:40:16.337 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:40:16.339 +05:30  INF  Route matched with {action = "Index", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.PaymentController (API).
2024-06-15 16:40:16.344 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:40:16.346 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - 200 null application/json; charset=utf-8 76.3999ms
2024-06-15 16:40:16.350 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 16:40:16.350 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - 200 null application/json; charset=utf-8 80.5489ms
2024-06-15 16:40:25.145 +05:30  INF  Executed action API.Controllers.PaymentController.Index (API) in 8796.2153ms
2024-06-15 16:40:25.159 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - application/json; charset=utf-8 3733
2024-06-15 16:40:25.160 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:40:25.164 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:40:25.165 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - 200 null application/json; charset=utf-8 8850.2913ms
2024-06-15 16:40:25.166 +05:30  INF  Route matched with {action = "Index", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.PaymentController (API).
2024-06-15 16:40:25.174 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 16:40:25.179 +05:30  INF  Executed DbCommand (23ms) [Parameters=[@__paymentResponse_OrderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[OrderId], [o].[OrderDate], [o].[PaymentId], [o].[Status], [o].[TotalAmount], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[OrderId] = @__paymentResponse_OrderId_0
2024-06-15 16:40:25.180 +05:30  INF  Executed action API.Controllers.PaymentController.Index (API) in 7.196ms
2024-06-15 16:40:25.188 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:40:25.190 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - 200 null application/json; charset=utf-8 31.181ms
2024-06-15 16:40:25.198 +05:30  INF  Executed DbCommand (7ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Orders] SET [OrderDate] = @p0, [PaymentId] = @p1, [Status] = @p2, [TotalAmount] = @p3, [UserId] = @p4
OUTPUT 1
WHERE [OrderId] = @p5;
2024-06-15 16:40:25.213 +05:30  INF  Executed DbCommand (6ms) [Parameters=[@__id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__id_0
2024-06-15 16:40:25.226 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@__cartItem_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__cartItem_ProductId_0
2024-06-15 16:40:25.239 +05:30  INF  Executed DbCommand (4ms) [Parameters=[@p7='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = Double), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Double), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Description] = @p0, [Discount] = @p1, [ImageUrl] = @p2, [Name] = @p3, [Price] = @p4, [ProductCategoryId] = @p5, [Quantity] = @p6
OUTPUT 1
WHERE [ProductId] = @p7;
2024-06-15 16:40:25.249 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@__cartItem_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__cartItem_ProductId_0
2024-06-15 16:40:25.260 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@p7='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = Double), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Double), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Description] = @p0, [Discount] = @p1, [ImageUrl] = @p2, [Name] = @p3, [Price] = @p4, [ProductCategoryId] = @p5, [Quantity] = @p6
OUTPUT 1
WHERE [ProductId] = @p7;
2024-06-15 16:40:25.269 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@__UserId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__UserId_0
2024-06-15 16:40:25.284 +05:30  INF  Executed DbCommand (8ms) [Parameters=[@__orderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[OrderId], [t].[OrderDate], [t].[PaymentId], [t].[Status], [t].[TotalAmount], [t].[UserId], [t].[UserId0], [t].[Email], [t].[FirstName], [t].[LastName], [t].[PhoneNumber], [t].[StripeId], [t0].[OrderId], [t0].[ProductId], [t0].[OrderQty], [t0].[UnitPrice], [t0].[ProductId0], [t0].[Description], [t0].[Discount], [t0].[ImageUrl], [t0].[Name], [t0].[Price], [t0].[ProductCategoryId], [t0].[Quantity]
FROM (
    SELECT TOP(1) [o].[OrderId], [o].[OrderDate], [o].[PaymentId], [o].[Status], [o].[TotalAmount], [o].[UserId], [u].[UserId] AS [UserId0], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
    FROM [Orders] AS [o]
    INNER JOIN [Users] AS [u] ON [o].[UserId] = [u].[UserId]
    WHERE [o].[OrderId] = @__orderId_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[OrderId], [o0].[ProductId], [o0].[OrderQty], [o0].[UnitPrice], [p].[ProductId] AS [ProductId0], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
    FROM [OrderProducts] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[ProductId]
) AS [t0] ON [t].[OrderId] = [t0].[OrderId]
ORDER BY [t].[OrderId], [t].[UserId0], [t0].[OrderId], [t0].[ProductId]
2024-06-15 16:40:26.464 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 16:40:26.466 +05:30  INF  Executed action API.Controllers.PaymentController.Index (API) in 10124.6215ms
2024-06-15 16:40:26.468 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:40:26.469 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - 200 null application/json; charset=utf-8 10155.187ms
2024-06-15 16:41:47.747 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/api/Cart/get-all-cartItems - null null
2024-06-15 16:41:47.751 +05:30  INF  Executing endpoint 'API.Controllers.CartController.GetAllCartItems (API)'
2024-06-15 16:41:47.755 +05:30  INF  Route matched with {action = "GetAllCartItems", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllCartItems() on controller API.Controllers.CartController (API).
2024-06-15 16:41:47.765 +05:30  INF  Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-06-15 16:41:47.768 +05:30  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.DTOs.Cart.CartItemResponse, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-15 16:41:47.771 +05:30  INF  Executed action API.Controllers.CartController.GetAllCartItems (API) in 13.8648ms
2024-06-15 16:41:47.773 +05:30  INF  Executed endpoint 'API.Controllers.CartController.GetAllCartItems (API)'
2024-06-15 16:41:47.779 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/api/Cart/get-all-cartItems - 200 null application/json; charset=utf-8 32.4045ms
2024-06-15 16:42:37.725 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/api/Payment - null 0
2024-06-15 16:42:37.737 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Checkout (API)'
2024-06-15 16:42:37.739 +05:30  INF  Route matched with {action = "Checkout", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Checkout() on controller API.Controllers.PaymentController (API).
2024-06-15 16:42:37.750 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
FROM [Users] AS [u]
WHERE [u].[UserId] = @__userId_0
2024-06-15 16:42:37.765 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-06-15 16:42:37.772 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__userId_0
2024-06-15 16:42:37.778 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@__item_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__item_ProductId_0
2024-06-15 16:42:37.784 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@__item_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__item_ProductId_0
2024-06-15 16:42:37.825 +05:30  INF  Executed DbCommand (34ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([OrderDate], [PaymentId], [Status], [TotalAmount], [UserId])
OUTPUT INSERTED.[OrderId]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-06-15 16:42:37.834 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderProducts] ([OrderId], [ProductId], [OrderQty], [UnitPrice])
VALUES (@p0, @p1, @p2, @p3);
2024-06-15 16:42:37.841 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderProducts] ([OrderId], [ProductId], [OrderQty], [UnitPrice])
VALUES (@p0, @p1, @p2, @p3);
2024-06-15 16:42:38.749 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-06-15 16:42:38.751 +05:30  INF  Executed action API.Controllers.PaymentController.Checkout (API) in 1010.2877ms
2024-06-15 16:42:38.754 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Checkout (API)'
2024-06-15 16:42:38.755 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/api/Payment - 200 null application/json; charset=utf-8 1030.2885ms
2024-06-15 16:43:04.911 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - application/json; charset=utf-8 3507
2024-06-15 16:43:04.911 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - application/json; charset=utf-8 1960
2024-06-15 16:43:04.921 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:43:04.923 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:43:04.924 +05:30  INF  Route matched with {action = "Index", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.PaymentController (API).
2024-06-15 16:43:04.925 +05:30  INF  Route matched with {action = "Index", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.PaymentController (API).
2024-06-15 16:43:04.929 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 16:43:04.937 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 16:43:04.938 +05:30  INF  Executed action API.Controllers.PaymentController.Index (API) in 11.3034ms
2024-06-15 16:43:04.943 +05:30  INF  Executed action API.Controllers.PaymentController.Index (API) in 8.428ms
2024-06-15 16:43:04.946 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:43:04.948 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:43:04.949 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - 200 null application/json; charset=utf-8 38.0245ms
2024-06-15 16:43:04.950 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - 200 null application/json; charset=utf-8 38.9297ms
2024-06-15 16:43:05.034 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - application/json; charset=utf-8 1918
2024-06-15 16:43:05.038 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:43:05.040 +05:30  INF  Route matched with {action = "Index", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.PaymentController (API).
2024-06-15 16:43:05.043 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 16:43:05.045 +05:30  INF  Executed action API.Controllers.PaymentController.Index (API) in 2.078ms
2024-06-15 16:43:05.047 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:43:05.048 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - 200 null application/json; charset=utf-8 14.3762ms
2024-06-15 16:43:05.208 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - application/json; charset=utf-8 3294
2024-06-15 16:43:05.213 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:43:05.215 +05:30  INF  Route matched with {action = "Index", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.PaymentController (API).
2024-06-15 16:43:08.160 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - application/json; charset=utf-8 3732
2024-06-15 16:43:08.175 +05:30  INF  Executed DbCommand (7ms) [Parameters=[@__paymentResponse_OrderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[OrderId], [o].[OrderDate], [o].[PaymentId], [o].[Status], [o].[TotalAmount], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[OrderId] = @__paymentResponse_OrderId_0
2024-06-15 16:43:08.176 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:43:08.180 +05:30  INF  Route matched with {action = "Index", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.PaymentController (API).
2024-06-15 16:43:08.184 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 16:43:08.185 +05:30  INF  Executed action API.Controllers.PaymentController.Index (API) in 2.2951ms
2024-06-15 16:43:08.186 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:43:08.188 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - 200 null application/json; charset=utf-8 27.7843ms
2024-06-15 16:43:08.189 +05:30  INF  Executed DbCommand (6ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Orders] SET [OrderDate] = @p0, [PaymentId] = @p1, [Status] = @p2, [TotalAmount] = @p3, [UserId] = @p4
OUTPUT 1
WHERE [OrderId] = @p5;
2024-06-15 16:43:08.201 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__id_0
2024-06-15 16:43:08.207 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@__cartItem_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__cartItem_ProductId_0
2024-06-15 16:43:08.217 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@p7='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = Double), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Double), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Description] = @p0, [Discount] = @p1, [ImageUrl] = @p2, [Name] = @p3, [Price] = @p4, [ProductCategoryId] = @p5, [Quantity] = @p6
OUTPUT 1
WHERE [ProductId] = @p7;
2024-06-15 16:43:08.223 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@__cartItem_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__cartItem_ProductId_0
2024-06-15 16:43:08.231 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@p7='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = Double), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Double), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Description] = @p0, [Discount] = @p1, [ImageUrl] = @p2, [Name] = @p3, [Price] = @p4, [ProductCategoryId] = @p5, [Quantity] = @p6
OUTPUT 1
WHERE [ProductId] = @p7;
2024-06-15 16:43:15.559 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@__UserId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__UserId_0
2024-06-15 16:43:25.256 +05:30  INF  Executed DbCommand (7ms) [Parameters=[@__orderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[OrderId], [t].[OrderDate], [t].[PaymentId], [t].[Status], [t].[TotalAmount], [t].[UserId], [t].[UserId0], [t].[Email], [t].[FirstName], [t].[LastName], [t].[PhoneNumber], [t].[StripeId], [t0].[OrderId], [t0].[ProductId], [t0].[OrderQty], [t0].[UnitPrice], [t0].[ProductId0], [t0].[Description], [t0].[Discount], [t0].[ImageUrl], [t0].[Name], [t0].[Price], [t0].[ProductCategoryId], [t0].[Quantity]
FROM (
    SELECT TOP(1) [o].[OrderId], [o].[OrderDate], [o].[PaymentId], [o].[Status], [o].[TotalAmount], [o].[UserId], [u].[UserId] AS [UserId0], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
    FROM [Orders] AS [o]
    INNER JOIN [Users] AS [u] ON [o].[UserId] = [u].[UserId]
    WHERE [o].[OrderId] = @__orderId_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[OrderId], [o0].[ProductId], [o0].[OrderQty], [o0].[UnitPrice], [p].[ProductId] AS [ProductId0], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
    FROM [OrderProducts] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[ProductId]
) AS [t0] ON [t].[OrderId] = [t0].[OrderId]
ORDER BY [t].[OrderId], [t].[UserId0], [t0].[OrderId], [t0].[ProductId]
2024-06-15 16:43:26.382 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 16:43:26.385 +05:30  INF  Executed action API.Controllers.PaymentController.Index (API) in 21168.3486ms
2024-06-15 16:43:26.387 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:43:26.389 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - 200 null application/json; charset=utf-8 21180.8921ms
2024-06-15 16:49:47.616 +05:30  INF  User profile is available. Using 'C:\Users\iTela\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-15 16:49:47.921 +05:30  INF  Now listening on: https://localhost:7220
2024-06-15 16:49:47.924 +05:30  INF  Now listening on: http://localhost:5016
2024-06-15 16:49:47.931 +05:30  INF  Application started. Press Ctrl+C to shut down.
2024-06-15 16:49:47.935 +05:30  INF  Hosting environment: Development
2024-06-15 16:49:47.938 +05:30  INF  Content root path: C:\Users\iTela\Documents\Assignment\sample project structure\ShoppingApp\API
2024-06-15 16:49:51.688 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/index.html - null null
2024-06-15 16:49:52.031 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/index.html - 200 null text/html;charset=utf-8 354.5623ms
2024-06-15 16:49:52.051 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - null null
2024-06-15 16:49:52.051 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_vs/browserLink - null null
2024-06-15 16:49:52.061 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 10.1525ms
2024-06-15 16:49:52.115 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_vs/browserLink - 200 null text/javascript; charset=UTF-8 63.9422ms
2024-06-15 16:49:52.163 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - null null
2024-06-15 16:49:52.339 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 176.0086ms
2024-06-15 16:50:06.272 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/api/Cart/get-all-cartItems - null null
2024-06-15 16:50:07.777 +05:30  INF  Executing endpoint 'API.Controllers.CartController.GetAllCartItems (API)'
2024-06-15 16:50:07.807 +05:30  INF  Route matched with {action = "GetAllCartItems", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllCartItems() on controller API.Controllers.CartController (API).
2024-06-15 16:50:10.907 +05:30  INF  Executed DbCommand (64ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-06-15 16:50:10.977 +05:30  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.DTOs.Cart.CartItemResponse, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-15 16:50:11.003 +05:30  INF  Executed action API.Controllers.CartController.GetAllCartItems (API) in 3186.8935ms
2024-06-15 16:50:11.006 +05:30  INF  Executed endpoint 'API.Controllers.CartController.GetAllCartItems (API)'
2024-06-15 16:50:11.018 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/api/Cart/get-all-cartItems - 200 null application/json; charset=utf-8 4746.8933ms
2024-06-15 16:50:19.045 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/api/Payment - null 0
2024-06-15 16:50:19.064 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Checkout (API)'
2024-06-15 16:50:19.069 +05:30  INF  Route matched with {action = "Checkout", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Checkout() on controller API.Controllers.PaymentController (API).
2024-06-15 16:50:19.190 +05:30  INF  Executed DbCommand (11ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
FROM [Users] AS [u]
WHERE [u].[UserId] = @__userId_0
2024-06-15 16:50:19.203 +05:30  INF  Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-06-15 16:50:19.219 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__userId_0
2024-06-15 16:50:19.235 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__item_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__item_ProductId_0
2024-06-15 16:50:19.243 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@__item_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__item_ProductId_0
2024-06-15 16:50:19.522 +05:30  INF  Executed DbCommand (29ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([OrderDate], [PaymentId], [Status], [TotalAmount], [UserId])
OUTPUT INSERTED.[OrderId]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-06-15 16:50:19.598 +05:30  INF  Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderProducts] ([OrderId], [ProductId], [OrderQty], [UnitPrice])
VALUES (@p0, @p1, @p2, @p3);
2024-06-15 16:50:19.610 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderProducts] ([OrderId], [ProductId], [OrderQty], [UnitPrice])
VALUES (@p0, @p1, @p2, @p3);
2024-06-15 16:50:20.947 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-06-15 16:50:20.951 +05:30  INF  Executed action API.Controllers.PaymentController.Checkout (API) in 1878.6246ms
2024-06-15 16:50:20.954 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Checkout (API)'
2024-06-15 16:50:20.959 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/api/Payment - 200 null application/json; charset=utf-8 1914.0085ms
2024-06-15 16:50:41.464 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - application/json; charset=utf-8 3508
2024-06-15 16:50:41.472 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:50:41.477 +05:30  INF  Route matched with {action = "Index", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.PaymentController (API).
2024-06-15 16:50:41.603 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 16:50:41.625 +05:30  INF  Executed action API.Controllers.PaymentController.Index (API) in 144.6099ms
2024-06-15 16:50:41.628 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:50:41.629 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - 200 null application/json; charset=utf-8 165.7609ms
2024-06-15 16:50:49.073 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - application/json; charset=utf-8 1960
2024-06-15 16:50:49.081 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:50:49.085 +05:30  INF  Route matched with {action = "Index", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.PaymentController (API).
2024-06-15 16:50:49.140 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 16:50:49.144 +05:30  INF  Executed action API.Controllers.PaymentController.Index (API) in 54.817ms
2024-06-15 16:50:49.146 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:50:49.148 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - 200 null application/json; charset=utf-8 74.6918ms
2024-06-15 16:50:58.526 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - application/json; charset=utf-8 1918
2024-06-15 16:50:58.535 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:50:58.537 +05:30  INF  Route matched with {action = "Index", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.PaymentController (API).
2024-06-15 16:50:58.541 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 16:50:58.543 +05:30  INF  Executed action API.Controllers.PaymentController.Index (API) in 3.4076ms
2024-06-15 16:50:58.544 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:50:58.546 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - 200 null application/json; charset=utf-8 19.9187ms
2024-06-15 16:50:58.548 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - application/json; charset=utf-8 3294
2024-06-15 16:50:58.551 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:50:58.552 +05:30  INF  Route matched with {action = "Index", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.PaymentController (API).
2024-06-15 16:51:03.775 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - application/json; charset=utf-8 3733
2024-06-15 16:51:03.781 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:51:03.782 +05:30  INF  Route matched with {action = "Index", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.PaymentController (API).
2024-06-15 16:51:03.790 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__paymentResponse_OrderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[OrderId], [o].[OrderDate], [o].[PaymentId], [o].[Status], [o].[TotalAmount], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[OrderId] = @__paymentResponse_OrderId_0
2024-06-15 16:51:03.795 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 16:51:03.796 +05:30  INF  Executed action API.Controllers.PaymentController.Index (API) in 10.3488ms
2024-06-15 16:51:03.797 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:51:03.798 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - 200 null application/json; charset=utf-8 25.9797ms
2024-06-15 16:51:03.833 +05:30  INF  Executed DbCommand (5ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Orders] SET [OrderDate] = @p0, [PaymentId] = @p1, [Status] = @p2, [TotalAmount] = @p3, [UserId] = @p4
OUTPUT 1
WHERE [OrderId] = @p5;
2024-06-15 16:51:03.851 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__id_0
2024-06-15 16:51:03.861 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@__cartItem_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__cartItem_ProductId_0
2024-06-15 16:51:03.887 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@p7='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = Double), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Double), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Description] = @p0, [Discount] = @p1, [ImageUrl] = @p2, [Name] = @p3, [Price] = @p4, [ProductCategoryId] = @p5, [Quantity] = @p6
OUTPUT 1
WHERE [ProductId] = @p7;
2024-06-15 16:51:03.894 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@__cartItem_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__cartItem_ProductId_0
2024-06-15 16:51:03.900 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@p7='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = Double), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Double), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Description] = @p0, [Discount] = @p1, [ImageUrl] = @p2, [Name] = @p3, [Price] = @p4, [ProductCategoryId] = @p5, [Quantity] = @p6
OUTPUT 1
WHERE [ProductId] = @p7;
2024-06-15 16:51:03.909 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@__UserId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__UserId_0
2024-06-15 16:51:03.981 +05:30  INF  Executed DbCommand (7ms) [Parameters=[@__orderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[OrderId], [t].[OrderDate], [t].[PaymentId], [t].[Status], [t].[TotalAmount], [t].[UserId], [t].[UserId0], [t].[Email], [t].[FirstName], [t].[LastName], [t].[PhoneNumber], [t].[StripeId], [t0].[OrderId], [t0].[ProductId], [t0].[OrderQty], [t0].[UnitPrice], [t0].[ProductId0], [t0].[Description], [t0].[Discount], [t0].[ImageUrl], [t0].[Name], [t0].[Price], [t0].[ProductCategoryId], [t0].[Quantity]
FROM (
    SELECT TOP(1) [o].[OrderId], [o].[OrderDate], [o].[PaymentId], [o].[Status], [o].[TotalAmount], [o].[UserId], [u].[UserId] AS [UserId0], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
    FROM [Orders] AS [o]
    INNER JOIN [Users] AS [u] ON [o].[UserId] = [u].[UserId]
    WHERE [o].[OrderId] = @__orderId_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[OrderId], [o0].[ProductId], [o0].[OrderQty], [o0].[UnitPrice], [p].[ProductId] AS [ProductId0], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
    FROM [OrderProducts] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[ProductId]
) AS [t0] ON [t].[OrderId] = [t0].[OrderId]
ORDER BY [t].[OrderId], [t].[UserId0], [t0].[OrderId], [t0].[ProductId]
2024-06-15 16:51:05.179 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 16:51:05.181 +05:30  INF  Executed action API.Controllers.PaymentController.Index (API) in 6627.9382ms
2024-06-15 16:51:05.183 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:51:05.184 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - 200 null application/json; charset=utf-8 6635.8781ms
2024-06-15 16:55:06.914 +05:30  INF  User profile is available. Using 'C:\Users\iTela\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-15 16:55:07.262 +05:30  INF  Now listening on: https://localhost:7220
2024-06-15 16:55:07.265 +05:30  INF  Now listening on: http://localhost:5016
2024-06-15 16:55:07.273 +05:30  INF  Application started. Press Ctrl+C to shut down.
2024-06-15 16:55:07.276 +05:30  INF  Hosting environment: Development
2024-06-15 16:55:07.279 +05:30  INF  Content root path: C:\Users\iTela\Documents\Assignment\sample project structure\ShoppingApp\API
2024-06-15 16:55:07.866 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/index.html - null null
2024-06-15 16:55:08.233 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/index.html - 200 null text/html;charset=utf-8 376.044ms
2024-06-15 16:55:08.248 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_vs/browserLink - null null
2024-06-15 16:55:08.248 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - null null
2024-06-15 16:55:08.262 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 13.6962ms
2024-06-15 16:55:08.304 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_vs/browserLink - 200 null text/javascript; charset=UTF-8 55.5704ms
2024-06-15 16:55:08.359 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - null null
2024-06-15 16:55:08.569 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 210.5183ms
2024-06-15 16:55:30.850 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/api/Cart/get-all-cartItems - null null
2024-06-15 16:55:32.140 +05:30  INF  Executing endpoint 'API.Controllers.CartController.GetAllCartItems (API)'
2024-06-15 16:55:32.163 +05:30  INF  Route matched with {action = "GetAllCartItems", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllCartItems() on controller API.Controllers.CartController (API).
2024-06-15 16:55:34.956 +05:30  INF  Executed DbCommand (74ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-06-15 16:55:35.012 +05:30  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.DTOs.Cart.CartItemResponse, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-15 16:55:35.037 +05:30  INF  Executed action API.Controllers.CartController.GetAllCartItems (API) in 2864.3812ms
2024-06-15 16:55:35.042 +05:30  INF  Executed endpoint 'API.Controllers.CartController.GetAllCartItems (API)'
2024-06-15 16:55:35.052 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/api/Cart/get-all-cartItems - 200 null application/json; charset=utf-8 4202.2971ms
2024-06-15 16:55:37.938 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/api/Cart/get-all-cartItems - null null
2024-06-15 16:55:37.948 +05:30  INF  Executing endpoint 'API.Controllers.CartController.GetAllCartItems (API)'
2024-06-15 16:55:37.951 +05:30  INF  Route matched with {action = "GetAllCartItems", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllCartItems() on controller API.Controllers.CartController (API).
2024-06-15 16:55:38.053 +05:30  INF  Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-06-15 16:55:38.057 +05:30  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.DTOs.Cart.CartItemResponse, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-15 16:55:38.060 +05:30  INF  Executed action API.Controllers.CartController.GetAllCartItems (API) in 105.4934ms
2024-06-15 16:55:38.062 +05:30  INF  Executed endpoint 'API.Controllers.CartController.GetAllCartItems (API)'
2024-06-15 16:55:38.064 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/api/Cart/get-all-cartItems - 200 null application/json; charset=utf-8 125.6002ms
2024-06-15 16:55:48.417 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/api/Payment - null 0
2024-06-15 16:55:48.424 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Checkout (API)'
2024-06-15 16:55:48.429 +05:30  INF  Route matched with {action = "Checkout", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Checkout() on controller API.Controllers.PaymentController (API).
2024-06-15 16:55:48.470 +05:30  INF  Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
FROM [Users] AS [u]
WHERE [u].[UserId] = @__userId_0
2024-06-15 16:55:48.482 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-06-15 16:55:48.496 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__userId_0
2024-06-15 16:55:48.510 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@__item_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__item_ProductId_0
2024-06-15 16:55:48.518 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@__item_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__item_ProductId_0
2024-06-15 16:55:48.770 +05:30  INF  Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([OrderDate], [PaymentId], [Status], [TotalAmount], [UserId])
OUTPUT INSERTED.[OrderId]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-06-15 16:55:48.849 +05:30  INF  Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderProducts] ([OrderId], [ProductId], [OrderQty], [UnitPrice])
VALUES (@p0, @p1, @p2, @p3);
2024-06-15 16:55:48.860 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderProducts] ([OrderId], [ProductId], [OrderQty], [UnitPrice])
VALUES (@p0, @p1, @p2, @p3);
2024-06-15 16:55:50.102 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-06-15 16:55:50.106 +05:30  INF  Executed action API.Controllers.PaymentController.Checkout (API) in 1674.9275ms
2024-06-15 16:55:50.108 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Checkout (API)'
2024-06-15 16:55:50.111 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/api/Payment - 200 null application/json; charset=utf-8 1694.8681ms
2024-06-15 16:56:09.298 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - application/json; charset=utf-8 3510
2024-06-15 16:56:09.304 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:56:09.308 +05:30  INF  Route matched with {action = "Index", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.PaymentController (API).
2024-06-15 16:56:09.325 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - application/json; charset=utf-8 1960
2024-06-15 16:56:09.330 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:56:09.331 +05:30  INF  Route matched with {action = "Index", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.PaymentController (API).
2024-06-15 16:56:09.416 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 16:56:09.425 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 16:56:09.437 +05:30  INF  Executed action API.Controllers.PaymentController.Index (API) in 103.3502ms
2024-06-15 16:56:09.437 +05:30  INF  Executed action API.Controllers.PaymentController.Index (API) in 126.6865ms
2024-06-15 16:56:09.438 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:56:09.439 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:56:09.441 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - 200 null application/json; charset=utf-8 115.891ms
2024-06-15 16:56:09.441 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - 200 null application/json; charset=utf-8 143.5081ms
2024-06-15 16:56:10.102 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - application/json; charset=utf-8 1918
2024-06-15 16:56:10.106 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:56:10.106 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - application/json; charset=utf-8 3294
2024-06-15 16:56:10.108 +05:30  INF  Route matched with {action = "Index", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.PaymentController (API).
2024-06-15 16:56:10.111 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:56:10.114 +05:30  INF  Route matched with {action = "Index", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.PaymentController (API).
2024-06-15 16:56:10.115 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 16:56:10.119 +05:30  INF  Executed action API.Controllers.PaymentController.Index (API) in 5.2199ms
2024-06-15 16:56:10.120 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:56:10.121 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - 200 null application/json; charset=utf-8 19.3406ms
2024-06-15 16:56:13.543 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - application/json; charset=utf-8 3735
2024-06-15 16:56:13.545 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:56:13.546 +05:30  INF  Route matched with {action = "Index", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.PaymentController (API).
2024-06-15 16:56:13.556 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__paymentResponse_OrderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[OrderId], [o].[OrderDate], [o].[PaymentId], [o].[Status], [o].[TotalAmount], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[OrderId] = @__paymentResponse_OrderId_0
2024-06-15 16:56:13.561 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 16:56:13.562 +05:30  INF  Executed action API.Controllers.PaymentController.Index (API) in 11.7151ms
2024-06-15 16:56:13.564 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:56:13.566 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - 200 null application/json; charset=utf-8 22.9297ms
2024-06-15 16:56:13.647 +05:30  INF  Executed DbCommand (48ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Orders] SET [OrderDate] = @p0, [PaymentId] = @p1, [Status] = @p2, [TotalAmount] = @p3, [UserId] = @p4
OUTPUT 1
WHERE [OrderId] = @p5;
2024-06-15 16:56:13.669 +05:30  INF  Executed DbCommand (4ms) [Parameters=[@__id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__id_0
2024-06-15 16:56:13.681 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@__cartItem_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__cartItem_ProductId_0
2024-06-15 16:56:13.722 +05:30  INF  Executed DbCommand (5ms) [Parameters=[@p7='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = Double), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Double), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Description] = @p0, [Discount] = @p1, [ImageUrl] = @p2, [Name] = @p3, [Price] = @p4, [ProductCategoryId] = @p5, [Quantity] = @p6
OUTPUT 1
WHERE [ProductId] = @p7;
2024-06-15 16:56:13.732 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@__cartItem_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__cartItem_ProductId_0
2024-06-15 16:56:13.740 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@p7='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = Double), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Double), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Description] = @p0, [Discount] = @p1, [ImageUrl] = @p2, [Name] = @p3, [Price] = @p4, [ProductCategoryId] = @p5, [Quantity] = @p6
OUTPUT 1
WHERE [ProductId] = @p7;
2024-06-15 16:56:13.751 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@__UserId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__UserId_0
2024-06-15 16:56:13.836 +05:30  INF  Executed DbCommand (10ms) [Parameters=[@__orderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[OrderId], [t].[OrderDate], [t].[PaymentId], [t].[Status], [t].[TotalAmount], [t].[UserId], [t].[UserId0], [t].[Email], [t].[FirstName], [t].[LastName], [t].[PhoneNumber], [t].[StripeId], [t0].[OrderId], [t0].[ProductId], [t0].[OrderQty], [t0].[UnitPrice], [t0].[ProductId0], [t0].[Description], [t0].[Discount], [t0].[ImageUrl], [t0].[Name], [t0].[Price], [t0].[ProductCategoryId], [t0].[Quantity]
FROM (
    SELECT TOP(1) [o].[OrderId], [o].[OrderDate], [o].[PaymentId], [o].[Status], [o].[TotalAmount], [o].[UserId], [u].[UserId] AS [UserId0], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
    FROM [Orders] AS [o]
    INNER JOIN [Users] AS [u] ON [o].[UserId] = [u].[UserId]
    WHERE [o].[OrderId] = @__orderId_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[OrderId], [o0].[ProductId], [o0].[OrderQty], [o0].[UnitPrice], [p].[ProductId] AS [ProductId0], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
    FROM [OrderProducts] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[ProductId]
) AS [t0] ON [t].[OrderId] = [t0].[OrderId]
ORDER BY [t].[OrderId], [t].[UserId0], [t0].[OrderId], [t0].[ProductId]
2024-06-15 16:56:15.004 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 16:56:15.007 +05:30  INF  Executed action API.Controllers.PaymentController.Index (API) in 4889.9304ms
2024-06-15 16:56:15.009 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:56:15.011 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - 200 null application/json; charset=utf-8 4904.1713ms
2024-06-15 16:57:21.256 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/api/Cart/get-all-cartItems - null null
2024-06-15 16:57:21.261 +05:30  INF  Executing endpoint 'API.Controllers.CartController.GetAllCartItems (API)'
2024-06-15 16:57:21.262 +05:30  INF  Route matched with {action = "GetAllCartItems", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllCartItems() on controller API.Controllers.CartController (API).
2024-06-15 16:57:21.294 +05:30  INF  Executed DbCommand (17ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-06-15 16:57:21.299 +05:30  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.DTOs.Cart.CartItemResponse, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-15 16:57:21.303 +05:30  INF  Executed action API.Controllers.CartController.GetAllCartItems (API) in 31.8616ms
2024-06-15 16:57:21.306 +05:30  INF  Executed endpoint 'API.Controllers.CartController.GetAllCartItems (API)'
2024-06-15 16:57:21.308 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/api/Cart/get-all-cartItems - 200 null application/json; charset=utf-8 51.6829ms
2024-06-15 16:57:45.837 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/api/Payment - null 0
2024-06-15 16:57:45.843 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Checkout (API)'
2024-06-15 16:57:45.848 +05:30  INF  Route matched with {action = "Checkout", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Checkout() on controller API.Controllers.PaymentController (API).
2024-06-15 16:57:45.862 +05:30  INF  Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
FROM [Users] AS [u]
WHERE [u].[UserId] = @__userId_0
2024-06-15 16:57:45.872 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-06-15 16:57:45.884 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__userId_0
2024-06-15 16:57:45.893 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@__item_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__item_ProductId_0
2024-06-15 16:57:45.902 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@__item_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__item_ProductId_0
2024-06-15 16:57:45.913 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([OrderDate], [PaymentId], [Status], [TotalAmount], [UserId])
OUTPUT INSERTED.[OrderId]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-06-15 16:57:45.922 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderProducts] ([OrderId], [ProductId], [OrderQty], [UnitPrice])
VALUES (@p0, @p1, @p2, @p3);
2024-06-15 16:57:45.933 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderProducts] ([OrderId], [ProductId], [OrderQty], [UnitPrice])
VALUES (@p0, @p1, @p2, @p3);
2024-06-15 16:57:46.857 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-06-15 16:57:46.865 +05:30  INF  Executed action API.Controllers.PaymentController.Checkout (API) in 1011.3879ms
2024-06-15 16:57:46.869 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Checkout (API)'
2024-06-15 16:57:46.874 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/api/Payment - 200 null application/json; charset=utf-8 1036.834ms
2024-06-15 16:58:06.443 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - application/json; charset=utf-8 1960
2024-06-15 16:58:06.443 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - application/json; charset=utf-8 3501
2024-06-15 16:58:06.447 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:58:06.450 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:58:06.451 +05:30  INF  Route matched with {action = "Index", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.PaymentController (API).
2024-06-15 16:58:06.453 +05:30  INF  Route matched with {action = "Index", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.PaymentController (API).
2024-06-15 16:58:06.460 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 16:58:06.463 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 16:58:06.463 +05:30  INF  Executed action API.Controllers.PaymentController.Index (API) in 4.3004ms
2024-06-15 16:58:06.465 +05:30  INF  Executed action API.Controllers.PaymentController.Index (API) in 3.1269ms
2024-06-15 16:58:06.466 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:58:06.468 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:58:06.473 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - 200 null application/json; charset=utf-8 29.3086ms
2024-06-15 16:58:06.475 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - 200 null application/json; charset=utf-8 31.8662ms
2024-06-15 16:58:07.063 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - application/json; charset=utf-8 1918
2024-06-15 16:58:07.064 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - application/json; charset=utf-8 3294
2024-06-15 16:58:07.070 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:58:07.073 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:58:07.074 +05:30  INF  Route matched with {action = "Index", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.PaymentController (API).
2024-06-15 16:58:07.076 +05:30  INF  Route matched with {action = "Index", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.PaymentController (API).
2024-06-15 16:58:07.083 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 16:58:07.091 +05:30  INF  Executed action API.Controllers.PaymentController.Index (API) in 8.8271ms
2024-06-15 16:58:07.101 +05:30  INF  Executed DbCommand (4ms) [Parameters=[@__paymentResponse_OrderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[OrderId], [o].[OrderDate], [o].[PaymentId], [o].[Status], [o].[TotalAmount], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[OrderId] = @__paymentResponse_OrderId_0
2024-06-15 16:58:07.101 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 16:58:07.110 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - 200 null application/json; charset=utf-8 47.5094ms
2024-06-15 16:58:07.141 +05:30  INF  Executed DbCommand (26ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Orders] SET [OrderDate] = @p0, [PaymentId] = @p1, [Status] = @p2, [TotalAmount] = @p3, [UserId] = @p4
OUTPUT 1
WHERE [OrderId] = @p5;
2024-06-15 16:58:07.157 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__id_0
2024-06-15 16:58:07.170 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@__cartItem_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__cartItem_ProductId_0
2024-06-15 16:58:07.191 +05:30  INF  Executed DbCommand (4ms) [Parameters=[@p7='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = Double), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Double), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Description] = @p0, [Discount] = @p1, [ImageUrl] = @p2, [Name] = @p3, [Price] = @p4, [ProductCategoryId] = @p5, [Quantity] = @p6
OUTPUT 1
WHERE [ProductId] = @p7;
2024-06-15 16:58:07.214 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@__cartItem_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__cartItem_ProductId_0
2024-06-15 16:58:07.252 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@p7='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = Double), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Double), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Description] = @p0, [Discount] = @p1, [ImageUrl] = @p2, [Name] = @p3, [Price] = @p4, [ProductCategoryId] = @p5, [Quantity] = @p6
OUTPUT 1
WHERE [ProductId] = @p7;
2024-06-15 16:58:10.519 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - application/json; charset=utf-8 3726
2024-06-15 16:58:10.524 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@__UserId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__UserId_0
2024-06-15 17:01:23.048 +05:30  INF  User profile is available. Using 'C:\Users\iTela\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-15 17:01:23.316 +05:30  INF  Now listening on: https://localhost:7220
2024-06-15 17:01:23.319 +05:30  INF  Now listening on: http://localhost:5016
2024-06-15 17:01:23.327 +05:30  INF  Application started. Press Ctrl+C to shut down.
2024-06-15 17:01:23.331 +05:30  INF  Hosting environment: Development
2024-06-15 17:01:23.333 +05:30  INF  Content root path: C:\Users\iTela\Documents\Assignment\sample project structure\ShoppingApp\API
2024-06-15 17:01:26.936 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/index.html - null null
2024-06-15 17:01:27.281 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/index.html - 200 null text/html;charset=utf-8 352.2794ms
2024-06-15 17:01:27.304 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_vs/browserLink - null null
2024-06-15 17:01:27.304 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - null null
2024-06-15 17:01:27.322 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 18.1559ms
2024-06-15 17:01:27.364 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_vs/browserLink - 200 null text/javascript; charset=UTF-8 59.926ms
2024-06-15 17:01:27.445 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - null null
2024-06-15 17:01:27.678 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 235.2944ms
2024-06-15 17:01:50.051 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/api/Cart/get-all-cartItems - null null
2024-06-15 17:01:51.399 +05:30  INF  Executing endpoint 'API.Controllers.CartController.GetAllCartItems (API)'
2024-06-15 17:01:51.421 +05:30  INF  Route matched with {action = "GetAllCartItems", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllCartItems() on controller API.Controllers.CartController (API).
2024-06-15 17:01:54.004 +05:30  INF  Executed DbCommand (55ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-06-15 17:01:54.055 +05:30  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.DTOs.Cart.CartItemResponse, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-15 17:01:54.074 +05:30  INF  Executed action API.Controllers.CartController.GetAllCartItems (API) in 2644.8231ms
2024-06-15 17:01:54.077 +05:30  INF  Executed endpoint 'API.Controllers.CartController.GetAllCartItems (API)'
2024-06-15 17:01:54.088 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/api/Cart/get-all-cartItems - 200 null application/json; charset=utf-8 4037.8211ms
2024-06-15 17:03:18.211 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/api/Payment - null 0
2024-06-15 17:03:18.227 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Checkout (API)'
2024-06-15 17:03:18.232 +05:30  INF  Route matched with {action = "Checkout", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Checkout() on controller API.Controllers.PaymentController (API).
2024-06-15 17:03:18.313 +05:30  INF  Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
FROM [Users] AS [u]
WHERE [u].[UserId] = @__userId_0
2024-06-15 17:03:18.330 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-06-15 17:03:18.349 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__userId_0
2024-06-15 17:03:18.365 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@__item_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__item_ProductId_0
2024-06-15 17:03:18.374 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@__item_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__item_ProductId_0
2024-06-15 17:03:18.568 +05:30  INF  Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([OrderDate], [PaymentId], [Status], [TotalAmount], [UserId])
OUTPUT INSERTED.[OrderId]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-06-15 17:03:18.629 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderProducts] ([OrderId], [ProductId], [OrderQty], [UnitPrice])
VALUES (@p0, @p1, @p2, @p3);
2024-06-15 17:03:18.640 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderProducts] ([OrderId], [ProductId], [OrderQty], [UnitPrice])
VALUES (@p0, @p1, @p2, @p3);
2024-06-15 17:03:19.857 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-06-15 17:03:19.859 +05:30  INF  Executed action API.Controllers.PaymentController.Checkout (API) in 1618.5586ms
2024-06-15 17:03:19.860 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Checkout (API)'
2024-06-15 17:03:19.868 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/api/Payment - 200 null application/json; charset=utf-8 1656.3994ms
2024-06-15 17:03:41.128 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - application/json; charset=utf-8 3505
2024-06-15 17:03:41.128 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - application/json; charset=utf-8 3294
2024-06-15 17:03:41.128 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - application/json; charset=utf-8 1918
2024-06-15 17:03:41.128 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - application/json; charset=utf-8 1960
2024-06-15 17:03:41.135 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 17:03:41.136 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 17:03:41.138 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 17:03:41.140 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 17:03:41.144 +05:30  INF  Route matched with {action = "Index", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.PaymentController (API).
2024-06-15 17:03:41.145 +05:30  INF  Route matched with {action = "Index", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.PaymentController (API).
2024-06-15 17:03:41.145 +05:30  INF  Route matched with {action = "Index", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.PaymentController (API).
2024-06-15 17:03:41.146 +05:30  INF  Route matched with {action = "Index", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.PaymentController (API).
2024-06-15 17:03:41.245 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 17:03:41.245 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 17:03:41.264 +05:30  INF  Executed action API.Controllers.PaymentController.Index (API) in 104.7299ms
2024-06-15 17:03:41.264 +05:30  INF  Executed action API.Controllers.PaymentController.Index (API) in 107.304ms
2024-06-15 17:03:41.266 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 17:03:41.267 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 17:03:41.269 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - 200 null application/json; charset=utf-8 140.9785ms
2024-06-15 17:03:41.270 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - 200 null application/json; charset=utf-8 142.1701ms
2024-06-15 17:03:41.277 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 17:03:41.274 +05:30  INF  Executed DbCommand (47ms) [Parameters=[@__paymentResponse_OrderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[OrderId], [o].[OrderDate], [o].[PaymentId], [o].[Status], [o].[TotalAmount], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[OrderId] = @__paymentResponse_OrderId_0
2024-06-15 17:03:41.286 +05:30  INF  Executed action API.Controllers.PaymentController.Index (API) in 137.3721ms
2024-06-15 17:03:41.291 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 17:03:41.296 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - 200 null application/json; charset=utf-8 167.7224ms
2024-06-15 17:03:41.336 +05:30  INF  Executed DbCommand (6ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Orders] SET [OrderDate] = @p0, [PaymentId] = @p1, [Status] = @p2, [TotalAmount] = @p3, [UserId] = @p4
OUTPUT 1
WHERE [OrderId] = @p5;
2024-06-15 17:03:41.358 +05:30  INF  Executed DbCommand (5ms) [Parameters=[@__id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__id_0
2024-06-15 17:03:41.372 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@__cartItem_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__cartItem_ProductId_0
2024-06-15 17:03:41.405 +05:30  INF  Executed DbCommand (5ms) [Parameters=[@p7='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = Double), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Double), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Description] = @p0, [Discount] = @p1, [ImageUrl] = @p2, [Name] = @p3, [Price] = @p4, [ProductCategoryId] = @p5, [Quantity] = @p6
OUTPUT 1
WHERE [ProductId] = @p7;
2024-06-15 17:03:41.416 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@__cartItem_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__cartItem_ProductId_0
2024-06-15 17:03:41.429 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@p7='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = Double), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Double), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Description] = @p0, [Discount] = @p1, [ImageUrl] = @p2, [Name] = @p3, [Price] = @p4, [ProductCategoryId] = @p5, [Quantity] = @p6
OUTPUT 1
WHERE [ProductId] = @p7;
2024-06-15 17:03:45.122 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - application/json; charset=utf-8 3730
2024-06-15 17:03:45.130 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@__UserId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__UserId_0
2024-06-15 17:03:45.130 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 17:03:45.137 +05:30  INF  Route matched with {action = "Index", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.PaymentController (API).
2024-06-15 17:03:48.766 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 17:03:48.769 +05:30  INF  Executed action API.Controllers.PaymentController.Index (API) in 135.3449ms
2024-06-15 17:03:48.770 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 17:03:48.772 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - 200 null application/json; charset=utf-8 3649.5101ms
2024-06-15 17:03:48.836 +05:30  INF  Executed DbCommand (25ms) [Parameters=[@__orderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[OrderId], [t].[OrderDate], [t].[PaymentId], [t].[Status], [t].[TotalAmount], [t].[UserId], [t].[UserId0], [t].[Email], [t].[FirstName], [t].[LastName], [t].[PhoneNumber], [t].[StripeId], [t0].[OrderId], [t0].[ProductId], [t0].[OrderQty], [t0].[UnitPrice], [t0].[ProductId0], [t0].[Description], [t0].[Discount], [t0].[ImageUrl], [t0].[Name], [t0].[Price], [t0].[ProductCategoryId], [t0].[Quantity]
FROM (
    SELECT TOP(1) [o].[OrderId], [o].[OrderDate], [o].[PaymentId], [o].[Status], [o].[TotalAmount], [o].[UserId], [u].[UserId] AS [UserId0], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
    FROM [Orders] AS [o]
    INNER JOIN [Users] AS [u] ON [o].[UserId] = [u].[UserId]
    WHERE [o].[OrderId] = @__orderId_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[OrderId], [o0].[ProductId], [o0].[OrderQty], [o0].[UnitPrice], [p].[ProductId] AS [ProductId0], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
    FROM [OrderProducts] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[ProductId]
) AS [t0] ON [t].[OrderId] = [t0].[OrderId]
ORDER BY [t].[OrderId], [t].[UserId0], [t0].[OrderId], [t0].[ProductId]
2024-06-15 17:03:50.134 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 17:03:50.137 +05:30  INF  Executed action API.Controllers.PaymentController.Index (API) in 8985.9494ms
2024-06-15 17:03:50.139 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 17:03:50.142 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - 200 null application/json; charset=utf-8 9013.7141ms
2024-06-15 17:04:33.285 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/api/Payment - null 0
2024-06-15 17:04:33.290 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Checkout (API)'
2024-06-15 17:04:33.291 +05:30  INF  Route matched with {action = "Checkout", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Checkout() on controller API.Controllers.PaymentController (API).
2024-06-15 17:04:33.304 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
FROM [Users] AS [u]
WHERE [u].[UserId] = @__userId_0
2024-06-15 17:04:33.319 +05:30  INF  Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-06-15 17:04:33.329 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__userId_0
2024-06-15 17:04:33.339 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@__item_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__item_ProductId_0
2024-06-15 17:04:33.345 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@__item_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__item_ProductId_0
2024-06-15 17:04:33.386 +05:30  INF  Executed DbCommand (30ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([OrderDate], [PaymentId], [Status], [TotalAmount], [UserId])
OUTPUT INSERTED.[OrderId]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-06-15 17:04:33.401 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderProducts] ([OrderId], [ProductId], [OrderQty], [UnitPrice])
VALUES (@p0, @p1, @p2, @p3);
2024-06-15 17:04:33.409 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderProducts] ([OrderId], [ProductId], [OrderQty], [UnitPrice])
VALUES (@p0, @p1, @p2, @p3);
2024-06-15 17:04:34.062 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-06-15 17:04:34.066 +05:30  INF  Executed action API.Controllers.PaymentController.Checkout (API) in 768.3614ms
2024-06-15 17:04:34.069 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Checkout (API)'
2024-06-15 17:04:34.074 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/api/Payment - 200 null application/json; charset=utf-8 790.2423ms
2024-06-15 17:05:02.478 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - application/json; charset=utf-8 3507
2024-06-15 17:05:02.488 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 17:05:02.490 +05:30  INF  Route matched with {action = "Index", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.PaymentController (API).
2024-06-15 17:05:02.500 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 17:05:02.501 +05:30  INF  Executed action API.Controllers.PaymentController.Index (API) in 3.5174ms
2024-06-15 17:05:02.503 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 17:05:02.504 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - 200 null application/json; charset=utf-8 26.6616ms
2024-06-15 17:05:02.757 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - application/json; charset=utf-8 3294
2024-06-15 17:05:02.758 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - application/json; charset=utf-8 1960
2024-06-15 17:05:02.768 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 17:05:02.771 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 17:05:02.774 +05:30  INF  Route matched with {action = "Index", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.PaymentController (API).
2024-06-15 17:05:02.775 +05:30  INF  Route matched with {action = "Index", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.PaymentController (API).
2024-06-15 17:05:02.792 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__paymentResponse_OrderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[OrderId], [o].[OrderDate], [o].[PaymentId], [o].[Status], [o].[TotalAmount], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[OrderId] = @__paymentResponse_OrderId_0
2024-06-15 17:05:02.794 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 17:05:02.801 +05:30  INF  Executed action API.Controllers.PaymentController.Index (API) in 16.4724ms
2024-06-15 17:05:02.809 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 17:05:02.811 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - 200 null application/json; charset=utf-8 52.0844ms
2024-06-15 17:05:02.867 +05:30  INF  Executed DbCommand (49ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Orders] SET [OrderDate] = @p0, [PaymentId] = @p1, [Status] = @p2, [TotalAmount] = @p3, [UserId] = @p4
OUTPUT 1
WHERE [OrderId] = @p5;
2024-06-15 17:05:02.882 +05:30  INF  Executed DbCommand (4ms) [Parameters=[@__id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__id_0
2024-06-15 17:05:02.891 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@__cartItem_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__cartItem_ProductId_0
2024-06-15 17:05:02.904 +05:30  INF  Executed DbCommand (5ms) [Parameters=[@p7='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = Double), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Double), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Description] = @p0, [Discount] = @p1, [ImageUrl] = @p2, [Name] = @p3, [Price] = @p4, [ProductCategoryId] = @p5, [Quantity] = @p6
OUTPUT 1
WHERE [ProductId] = @p7;
2024-06-15 17:05:02.911 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@__cartItem_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__cartItem_ProductId_0
2024-06-15 17:05:02.924 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@p7='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = Double), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Double), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Description] = @p0, [Discount] = @p1, [ImageUrl] = @p2, [Name] = @p3, [Price] = @p4, [ProductCategoryId] = @p5, [Quantity] = @p6
OUTPUT 1
WHERE [ProductId] = @p7;
2024-06-15 17:05:02.932 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@__UserId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__UserId_0
2024-06-15 17:05:03.289 +05:30  INF  Executed DbCommand (6ms) [Parameters=[@__orderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[OrderId], [t].[OrderDate], [t].[PaymentId], [t].[Status], [t].[TotalAmount], [t].[UserId], [t].[UserId0], [t].[Email], [t].[FirstName], [t].[LastName], [t].[PhoneNumber], [t].[StripeId], [t0].[OrderId], [t0].[ProductId], [t0].[OrderQty], [t0].[UnitPrice], [t0].[ProductId0], [t0].[Description], [t0].[Discount], [t0].[ImageUrl], [t0].[Name], [t0].[Price], [t0].[ProductCategoryId], [t0].[Quantity]
FROM (
    SELECT TOP(1) [o].[OrderId], [o].[OrderDate], [o].[PaymentId], [o].[Status], [o].[TotalAmount], [o].[UserId], [u].[UserId] AS [UserId0], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
    FROM [Orders] AS [o]
    INNER JOIN [Users] AS [u] ON [o].[UserId] = [u].[UserId]
    WHERE [o].[OrderId] = @__orderId_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[OrderId], [o0].[ProductId], [o0].[OrderQty], [o0].[UnitPrice], [p].[ProductId] AS [ProductId0], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
    FROM [OrderProducts] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[ProductId]
) AS [t0] ON [t].[OrderId] = [t0].[OrderId]
ORDER BY [t].[OrderId], [t].[UserId0], [t0].[OrderId], [t0].[ProductId]
2024-06-15 17:05:03.310 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - application/json; charset=utf-8 1918
2024-06-15 17:05:03.316 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 17:05:03.317 +05:30  INF  Route matched with {action = "Index", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.PaymentController (API).
2024-06-15 17:05:03.322 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 17:05:03.324 +05:30  INF  Executed action API.Controllers.PaymentController.Index (API) in 2.3135ms
2024-06-15 17:05:03.327 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 17:05:03.329 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - 200 null application/json; charset=utf-8 19.3054ms
2024-06-15 17:05:03.901 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 17:05:03.912 +05:30  INF  Executed action API.Controllers.PaymentController.Index (API) in 1131.7639ms
2024-06-15 17:05:03.921 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 17:05:03.922 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - 200 null application/json; charset=utf-8 1164.9159ms
2024-06-15 17:05:05.932 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - application/json; charset=utf-8 3732
2024-06-15 17:05:05.937 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 17:05:05.941 +05:30  INF  Route matched with {action = "Index", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.PaymentController (API).
2024-06-15 17:05:05.946 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 17:05:05.947 +05:30  INF  Executed action API.Controllers.PaymentController.Index (API) in 2.2435ms
2024-06-15 17:05:05.948 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 17:05:05.949 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - 200 null application/json; charset=utf-8 16.9068ms
2024-06-15 17:06:27.039 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/index.html - null null
2024-06-15 17:06:27.056 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/index.html - 200 null text/html;charset=utf-8 18.1598ms
2024-06-15 17:06:27.086 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - null null
2024-06-15 17:06:27.095 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 7.2569ms
2024-06-15 17:06:27.102 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_vs/browserLink - null null
2024-06-15 17:06:27.150 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_vs/browserLink - 200 null text/javascript; charset=UTF-8 48.4513ms
2024-06-15 17:06:27.271 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - null null
2024-06-15 17:06:27.303 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 32.5881ms
2024-06-15 17:06:36.472 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/api/Cart/get-all-cartItems - null null
2024-06-15 17:06:36.478 +05:30  INF  Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-06-15 17:06:36.484 +05:30  INF  AuthenticationScheme: Bearer was challenged.
2024-06-15 17:06:36.485 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/api/Cart/get-all-cartItems - 401 0 null 12.8212ms
2024-06-15 17:06:50.055 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/api/Cart/get-all-cartItems - null null
2024-06-15 17:06:50.061 +05:30  INF  Executing endpoint 'API.Controllers.CartController.GetAllCartItems (API)'
2024-06-15 17:06:50.066 +05:30  INF  Route matched with {action = "GetAllCartItems", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllCartItems() on controller API.Controllers.CartController (API).
2024-06-15 17:06:50.080 +05:30  INF  Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-06-15 17:06:50.084 +05:30  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.DTOs.Cart.CartItemResponse, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-15 17:06:50.087 +05:30  INF  Executed action API.Controllers.CartController.GetAllCartItems (API) in 18.3832ms
2024-06-15 17:06:50.091 +05:30  INF  Executed endpoint 'API.Controllers.CartController.GetAllCartItems (API)'
2024-06-15 17:06:50.093 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/api/Cart/get-all-cartItems - 200 null application/json; charset=utf-8 38.4697ms
2024-06-15 17:06:59.593 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/api/Payment - null 0
2024-06-15 17:06:59.598 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Checkout (API)'
2024-06-15 17:06:59.603 +05:30  INF  Route matched with {action = "Checkout", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Checkout() on controller API.Controllers.PaymentController (API).
2024-06-15 17:06:59.617 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
FROM [Users] AS [u]
WHERE [u].[UserId] = @__userId_0
2024-06-15 17:06:59.625 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-06-15 17:06:59.635 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__userId_0
2024-06-15 17:06:59.645 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@__item_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__item_ProductId_0
2024-06-15 17:06:59.652 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@__item_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__item_ProductId_0
2024-06-15 17:06:59.692 +05:30  INF  Executed DbCommand (30ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([OrderDate], [PaymentId], [Status], [TotalAmount], [UserId])
OUTPUT INSERTED.[OrderId]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-06-15 17:06:59.707 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderProducts] ([OrderId], [ProductId], [OrderQty], [UnitPrice])
VALUES (@p0, @p1, @p2, @p3);
2024-06-15 17:06:59.714 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderProducts] ([OrderId], [ProductId], [OrderQty], [UnitPrice])
VALUES (@p0, @p1, @p2, @p3);
2024-06-15 17:07:00.670 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-06-15 17:07:00.673 +05:30  INF  Executed action API.Controllers.PaymentController.Checkout (API) in 1064.6817ms
2024-06-15 17:07:00.677 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Checkout (API)'
2024-06-15 17:07:00.681 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/api/Payment - 200 null application/json; charset=utf-8 1088.3137ms
2024-06-15 17:07:19.008 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - application/json; charset=utf-8 3507
2024-06-15 17:07:19.012 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 17:07:19.020 +05:30  INF  Route matched with {action = "Index", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.PaymentController (API).
2024-06-15 17:07:19.024 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 17:07:19.027 +05:30  INF  Executed action API.Controllers.PaymentController.Index (API) in 4.3218ms
2024-06-15 17:07:19.028 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 17:07:19.030 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - 200 null application/json; charset=utf-8 22.1771ms
2024-06-15 17:07:20.552 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - application/json; charset=utf-8 1960
2024-06-15 17:07:20.553 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - application/json; charset=utf-8 1918
2024-06-15 17:07:20.559 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 17:07:20.561 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 17:07:20.564 +05:30  INF  Route matched with {action = "Index", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.PaymentController (API).
2024-06-15 17:07:20.566 +05:30  INF  Route matched with {action = "Index", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.PaymentController (API).
2024-06-15 17:07:20.572 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 17:07:20.574 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 17:07:20.574 +05:30  INF  Executed action API.Controllers.PaymentController.Index (API) in 3.9236ms
2024-06-15 17:07:20.576 +05:30  INF  Executed action API.Controllers.PaymentController.Index (API) in 2.7702ms
2024-06-15 17:07:20.580 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 17:07:20.581 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 17:07:20.587 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - 200 null application/json; charset=utf-8 34.5788ms
2024-06-15 17:07:20.588 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - 200 null application/json; charset=utf-8 35.5461ms
2024-06-15 17:07:21.930 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - application/json; charset=utf-8 3294
2024-06-15 17:07:21.945 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 17:07:21.947 +05:30  INF  Route matched with {action = "Index", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.PaymentController (API).
2024-06-15 17:07:21.960 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@__paymentResponse_OrderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[OrderId], [o].[OrderDate], [o].[PaymentId], [o].[Status], [o].[TotalAmount], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[OrderId] = @__paymentResponse_OrderId_0
2024-06-15 17:07:21.989 +05:30  INF  Executed DbCommand (11ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Orders] SET [OrderDate] = @p0, [PaymentId] = @p1, [Status] = @p2, [TotalAmount] = @p3, [UserId] = @p4
OUTPUT 1
WHERE [OrderId] = @p5;
2024-06-15 17:07:22.001 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@__id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__id_0
2024-06-15 17:07:22.011 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@__cartItem_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__cartItem_ProductId_0
2024-06-15 17:07:22.020 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@p7='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = Double), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Double), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Description] = @p0, [Discount] = @p1, [ImageUrl] = @p2, [Name] = @p3, [Price] = @p4, [ProductCategoryId] = @p5, [Quantity] = @p6
OUTPUT 1
WHERE [ProductId] = @p7;
2024-06-15 17:07:22.029 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@__cartItem_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__cartItem_ProductId_0
2024-06-15 17:07:22.037 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@p7='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = Double), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Double), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Description] = @p0, [Discount] = @p1, [ImageUrl] = @p2, [Name] = @p3, [Price] = @p4, [ProductCategoryId] = @p5, [Quantity] = @p6
OUTPUT 1
WHERE [ProductId] = @p7;
2024-06-15 17:07:22.046 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@__UserId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__UserId_0
2024-06-15 17:07:22.073 +05:30  INF  Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [UserProducts]
OUTPUT 1
WHERE [ProductId] = @p0 AND [userId] = @p1;
DELETE FROM [UserProducts]
OUTPUT 1
WHERE [ProductId] = @p2 AND [userId] = @p3;
2024-06-15 17:07:22.096 +05:30  INF  Executed DbCommand (6ms) [Parameters=[@__orderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[OrderId], [t].[OrderDate], [t].[PaymentId], [t].[Status], [t].[TotalAmount], [t].[UserId], [t].[UserId0], [t].[Email], [t].[FirstName], [t].[LastName], [t].[PhoneNumber], [t].[StripeId], [t0].[OrderId], [t0].[ProductId], [t0].[OrderQty], [t0].[UnitPrice], [t0].[ProductId0], [t0].[Description], [t0].[Discount], [t0].[ImageUrl], [t0].[Name], [t0].[Price], [t0].[ProductCategoryId], [t0].[Quantity]
FROM (
    SELECT TOP(1) [o].[OrderId], [o].[OrderDate], [o].[PaymentId], [o].[Status], [o].[TotalAmount], [o].[UserId], [u].[UserId] AS [UserId0], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
    FROM [Orders] AS [o]
    INNER JOIN [Users] AS [u] ON [o].[UserId] = [u].[UserId]
    WHERE [o].[OrderId] = @__orderId_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[OrderId], [o0].[ProductId], [o0].[OrderQty], [o0].[UnitPrice], [p].[ProductId] AS [ProductId0], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
    FROM [OrderProducts] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[ProductId]
) AS [t0] ON [t].[OrderId] = [t0].[OrderId]
ORDER BY [t].[OrderId], [t].[UserId0], [t0].[OrderId], [t0].[ProductId]
2024-06-15 17:07:22.313 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - application/json; charset=utf-8 3732
2024-06-15 17:07:22.322 +05:30  INF  Executing endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 17:07:22.324 +05:30  INF  Route matched with {action = "Index", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.PaymentController (API).
2024-06-15 17:07:22.334 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 17:07:22.336 +05:30  INF  Executed action API.Controllers.PaymentController.Index (API) in 5.1496ms
2024-06-15 17:07:22.338 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 17:07:22.340 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - 200 null application/json; charset=utf-8 26.9586ms
2024-06-15 17:07:23.186 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-06-15 17:07:23.189 +05:30  INF  Executed action API.Controllers.PaymentController.Index (API) in 1238.4956ms
2024-06-15 17:07:23.190 +05:30  INF  Executed endpoint 'API.Controllers.PaymentController.Index (API)'
2024-06-15 17:07:23.192 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/api/Payment/webHook - 200 null application/json; charset=utf-8 1261.9567ms
2024-06-15 17:08:35.620 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/api/Cart/get-all-cartItems - null null
2024-06-15 17:08:35.632 +05:30  INF  Executing endpoint 'API.Controllers.CartController.GetAllCartItems (API)'
2024-06-15 17:08:35.633 +05:30  INF  Route matched with {action = "GetAllCartItems", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllCartItems() on controller API.Controllers.CartController (API).
2024-06-15 17:08:35.647 +05:30  INF  Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-06-15 17:08:35.657 +05:30  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.DTOs.Cart.CartItemResponse, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-15 17:08:35.659 +05:30  INF  Executed action API.Controllers.CartController.GetAllCartItems (API) in 23.0952ms
2024-06-15 17:08:35.663 +05:30  INF  Executed endpoint 'API.Controllers.CartController.GetAllCartItems (API)'
2024-06-15 17:08:35.665 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/api/Cart/get-all-cartItems - 200 null application/json; charset=utf-8 45.8009ms
2024-06-15 17:09:32.391 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/index.html - null null
2024-06-15 17:09:32.423 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/index.html - 200 null text/html;charset=utf-8 32.6131ms
2024-06-15 17:09:32.472 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - null null
2024-06-15 17:09:32.473 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_vs/browserLink - null null
2024-06-15 17:09:32.478 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 6.051ms
2024-06-15 17:09:32.511 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_vs/browserLink - 200 null text/javascript; charset=UTF-8 38.7161ms
2024-06-15 17:09:32.718 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - null null
2024-06-15 17:09:32.771 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 53.3607ms
2024-06-15 22:11:09.325 +05:30  INF  User profile is available. Using 'C:\Users\iTela\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-15 22:11:09.753 +05:30  INF  Now listening on: https://localhost:7220
2024-06-15 22:11:09.757 +05:30  INF  Now listening on: http://localhost:5016
2024-06-15 22:11:09.765 +05:30  INF  Application started. Press Ctrl+C to shut down.
2024-06-15 22:11:09.769 +05:30  INF  Hosting environment: Development
2024-06-15 22:11:09.771 +05:30  INF  Content root path: C:\Users\iTela\Documents\Assignment\sample project structure\ShoppingApp\API
2024-06-15 22:11:21.992 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/index.html - null null
2024-06-15 22:11:22.434 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/index.html - 200 null text/html;charset=utf-8 449.5088ms
2024-06-15 22:11:22.463 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - null null
2024-06-15 22:11:22.463 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_vs/browserLink - null null
2024-06-15 22:11:22.489 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 26.4008ms
2024-06-15 22:11:22.587 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_vs/browserLink - 200 null text/javascript; charset=UTF-8 124.9374ms
2024-06-15 22:11:22.638 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - null null
2024-06-15 22:11:22.819 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 180.7877ms
2024-06-15 22:17:18.295 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/User/login - application/json 76
2024-06-15 22:17:18.370 +05:30  INF  Executing endpoint 'API.Controllers.UserController.Login (API)'
2024-06-15 22:17:18.406 +05:30  INF  Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Application.DTOs.LoginDTO) on controller API.Controllers.UserController (API).
2024-06-15 22:17:21.888 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.User.LoginResponse'.
2024-06-15 22:17:21.899 +05:30  INF  Executed action API.Controllers.UserController.Login (API) in 3484.6662ms
2024-06-15 22:17:21.900 +05:30  INF  Executed endpoint 'API.Controllers.UserController.Login (API)'
2024-06-15 22:17:21.909 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/User/login - 200 null application/json; charset=utf-8 3613.9775ms
2024-06-15 22:18:03.661 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/api/Cart/get-all-cartItems - null null
2024-06-15 22:18:04.740 +05:30  INF  Executing endpoint 'API.Controllers.CartController.GetAllCartItems (API)'
2024-06-15 22:18:04.746 +05:30  INF  Route matched with {action = "GetAllCartItems", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllCartItems() on controller API.Controllers.CartController (API).
2024-06-15 22:18:06.653 +05:30  INF  Executed DbCommand (73ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-06-15 22:18:06.683 +05:30  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.DTOs.Cart.CartItemResponse, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-15 22:18:06.692 +05:30  INF  Executed action API.Controllers.CartController.GetAllCartItems (API) in 1942.3195ms
2024-06-15 22:18:06.694 +05:30  INF  Executed endpoint 'API.Controllers.CartController.GetAllCartItems (API)'
2024-06-15 22:18:06.699 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/api/Cart/get-all-cartItems - 200 null application/json; charset=utf-8 3038.5755ms
2024-06-15 22:18:24.184 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/api/Cart/add-to-cart - application/json 37
2024-06-15 22:18:24.197 +05:30  INF  Executing endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-06-15 22:18:24.203 +05:30  INF  Route matched with {action = "AddToCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToCart(Application.DTOs.Cart.CartItemRequset) on controller API.Controllers.CartController (API).
2024-06-15 22:18:24.255 +05:30  INF  Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450), @__itemId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__userId_0 AND [u].[ProductId] = @__itemId_1
2024-06-15 22:18:24.418 +05:30  INF  Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserProducts] ([ProductId], [userId], [Quantity])
VALUES (@p0, @p1, @p2);
2024-06-15 22:18:24.436 +05:30  INF  Cart item successfully added
2024-06-15 22:18:24.439 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-06-15 22:18:24.440 +05:30  INF  Executed action API.Controllers.CartController.AddToCart (API) in 230.7031ms
2024-06-15 22:18:24.443 +05:30  INF  Executed endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-06-15 22:18:24.445 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/api/Cart/add-to-cart - 200 null application/json; charset=utf-8 261.2218ms
2024-06-15 22:18:30.289 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/api/Cart/add-to-cart - application/json 37
2024-06-15 22:18:30.298 +05:30  INF  Executing endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-06-15 22:18:30.300 +05:30  INF  Route matched with {action = "AddToCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToCart(Application.DTOs.Cart.CartItemRequset) on controller API.Controllers.CartController (API).
2024-06-15 22:18:30.333 +05:30  INF  Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (Size = 450), @__itemId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__userId_0 AND [u].[ProductId] = @__itemId_1
2024-06-15 22:18:30.369 +05:30  INF  Executed DbCommand (5ms) [Parameters=[@p1='?' (DbType = Int32), @p2='?' (Size = 450), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [UserProducts] SET [Quantity] = @p0
OUTPUT 1
WHERE [ProductId] = @p1 AND [userId] = @p2;
2024-06-15 22:18:30.388 +05:30  INF  Cart item updated successfully: {"User":null,"userId":"666d44166e81753ef42cf7b0","Product":null,"ProductId":1,"Quantity":2,"$type":"UserProduct"}
2024-06-15 22:18:30.397 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-06-15 22:18:30.399 +05:30  INF  Executed action API.Controllers.CartController.AddToCart (API) in 94.7463ms
2024-06-15 22:18:30.402 +05:30  INF  Executed endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-06-15 22:18:30.403 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/api/Cart/add-to-cart - 200 null application/json; charset=utf-8 115.0952ms
2024-06-15 22:19:07.506 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/index.html - null null
2024-06-15 22:19:07.552 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/index.html - 200 null text/html;charset=utf-8 45.7889ms
2024-06-15 22:19:07.574 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - null null
2024-06-15 22:19:07.574 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_vs/browserLink - null null
2024-06-15 22:19:07.578 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 5.0909ms
2024-06-15 22:19:07.629 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_vs/browserLink - 200 null text/javascript; charset=UTF-8 55.0931ms
2024-06-15 22:19:07.781 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - null null
2024-06-15 22:19:07.828 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 47.6557ms
2024-06-15 22:19:15.998 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/index.html - null null
2024-06-15 22:19:16.024 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/index.html - 200 null text/html;charset=utf-8 26.0643ms
2024-06-15 22:19:16.064 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - null null
2024-06-15 22:19:16.065 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_vs/browserLink - null null
2024-06-15 22:19:16.072 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 8.0201ms
2024-06-15 22:19:16.088 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_vs/browserLink - 200 null text/javascript; charset=UTF-8 23.5691ms
2024-06-15 22:19:16.139 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - null null
2024-06-15 22:19:16.173 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 34.3045ms
2024-06-15 22:23:19.133 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/index.html - null null
2024-06-15 22:23:19.158 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/index.html - 200 null text/html;charset=utf-8 25.6377ms
2024-06-15 22:23:19.194 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_vs/browserLink - null null
2024-06-15 22:23:19.194 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - null null
2024-06-15 22:23:19.205 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 11.0935ms
2024-06-15 22:23:19.236 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_vs/browserLink - 200 null text/javascript; charset=UTF-8 41.5402ms
2024-06-15 22:23:19.307 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - null null
2024-06-15 22:23:19.338 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 31.1319ms
2024-06-15 22:24:48.356 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/index.html - null null
2024-06-15 22:24:48.372 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/index.html - 200 null text/html;charset=utf-8 16.1798ms
2024-06-15 22:24:48.413 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - null null
2024-06-15 22:24:48.418 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 5.2839ms
2024-06-15 22:24:48.425 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_vs/browserLink - null null
2024-06-15 22:24:48.444 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_vs/browserLink - 200 null text/javascript; charset=UTF-8 19.2915ms
2024-06-15 22:24:48.517 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - null null
2024-06-15 22:24:48.548 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 31.2023ms
2024-06-15 22:25:11.524 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/index.html - null null
2024-06-15 22:25:11.536 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/index.html - 200 null text/html;charset=utf-8 11.9376ms
2024-06-15 22:25:11.567 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - null null
2024-06-15 22:25:11.567 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_vs/browserLink - null null
2024-06-15 22:25:11.572 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 4.9634ms
2024-06-15 22:25:11.599 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_vs/browserLink - 200 null text/javascript; charset=UTF-8 31.8194ms
2024-06-15 22:25:11.640 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - null null
2024-06-15 22:25:11.657 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 17.4454ms
2024-06-15 22:25:26.549 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/index.html - null null
2024-06-15 22:25:26.567 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/index.html - 200 null text/html;charset=utf-8 17.831ms
2024-06-15 22:25:26.606 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - null null
2024-06-15 22:25:26.606 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_vs/browserLink - null null
2024-06-15 22:25:26.610 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 4.106ms
2024-06-15 22:25:26.675 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_vs/browserLink - 200 null text/javascript; charset=UTF-8 69.6005ms
2024-06-15 22:25:26.708 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - null null
2024-06-15 22:25:26.727 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 18.9646ms
2024-06-15 22:25:28.966 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/index.html - null null
2024-06-15 22:25:28.984 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/index.html - 200 null text/html;charset=utf-8 18.7773ms
2024-06-15 22:25:29.021 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_vs/browserLink - null null
2024-06-15 22:25:29.021 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - null null
2024-06-15 22:25:29.030 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 9.6514ms
2024-06-15 22:25:29.037 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_vs/browserLink - 200 null text/javascript; charset=UTF-8 17.3427ms
2024-06-15 22:25:29.092 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - null null
2024-06-15 22:25:29.110 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 18.6674ms
2024-06-15 22:25:59.363 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/index.html - null null
2024-06-15 22:25:59.379 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/index.html - 200 null text/html;charset=utf-8 15.6662ms
2024-06-15 22:25:59.423 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - null null
2024-06-15 22:25:59.424 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_vs/browserLink - null null
2024-06-15 22:25:59.429 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 5.7878ms
2024-06-15 22:25:59.463 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_vs/browserLink - 200 null text/javascript; charset=UTF-8 39.4034ms
2024-06-15 22:25:59.525 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - null null
2024-06-15 22:25:59.541 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 16.352ms
2024-06-15 22:26:52.670 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/index.html - null null
2024-06-15 22:26:52.687 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/index.html - 200 null text/html;charset=utf-8 17.4582ms
2024-06-15 22:26:52.722 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - null null
2024-06-15 22:26:52.722 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_vs/browserLink - null null
2024-06-15 22:26:52.726 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 3.9324ms
2024-06-15 22:26:52.757 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_vs/browserLink - 200 null text/javascript; charset=UTF-8 34.5201ms
2024-06-15 22:26:52.827 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - null null
2024-06-15 22:26:52.844 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 17.4921ms
2024-06-15 22:27:17.655 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/index.html - null null
2024-06-15 22:27:17.673 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/index.html - 200 null text/html;charset=utf-8 18.0238ms
2024-06-15 22:27:17.710 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - null null
2024-06-15 22:27:17.710 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_vs/browserLink - null null
2024-06-15 22:27:17.717 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 7.3269ms
2024-06-15 22:27:17.742 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_vs/browserLink - 200 null text/javascript; charset=UTF-8 32.1488ms
2024-06-15 22:27:17.789 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - null null
2024-06-15 22:27:17.806 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 17.8885ms
2024-06-15 22:28:36.453 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/api/Cart/add-to-cart - application/json 37
2024-06-15 22:28:36.467 +05:30  INF  Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-06-15 22:28:36.474 +05:30  INF  AuthenticationScheme: Bearer was challenged.
2024-06-15 22:28:36.476 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/api/Cart/add-to-cart - 401 0 null 23.3314ms
2024-06-15 22:29:03.389 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/api/Cart/add-to-cart - application/json 37
2024-06-15 22:29:03.402 +05:30  INF  Executing endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-06-15 22:29:03.408 +05:30  INF  Route matched with {action = "AddToCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToCart(Application.DTOs.Cart.CartItemRequset) on controller API.Controllers.CartController (API).
2024-06-15 22:29:04.455 +05:30  INF  Executed DbCommand (13ms) [Parameters=[@__userId_0='?' (Size = 450), @__itemId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__userId_0 AND [u].[ProductId] = @__itemId_1
2024-06-15 22:29:04.466 +05:30  INF  Cart Items {"User":null,"userId":"666d44166e81753ef42cf7b0","Product":null,"ProductId":1,"Quantity":2,"$type":"UserProduct"}
2024-06-15 22:29:04.482 +05:30  INF  Executed DbCommand (6ms) [Parameters=[@p1='?' (DbType = Int32), @p2='?' (Size = 450), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [UserProducts] SET [Quantity] = @p0
OUTPUT 1
WHERE [ProductId] = @p1 AND [userId] = @p2;
2024-06-15 22:29:04.491 +05:30  INF  Cart item updated successfully: {"User":null,"userId":"666d44166e81753ef42cf7b0","Product":null,"ProductId":1,"Quantity":2,"$type":"UserProduct"}
2024-06-15 22:29:04.498 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-06-15 22:29:04.499 +05:30  INF  Executed action API.Controllers.CartController.AddToCart (API) in 1088.2351ms
2024-06-15 22:29:04.501 +05:30  INF  Executed endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-06-15 22:29:04.503 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/api/Cart/add-to-cart - 200 null application/json; charset=utf-8 1114.9695ms
2024-06-15 22:29:40.855 +05:30  INF  Request starting HTTP/2 PUT https://localhost:7220/api/Cart/modify-cart-item - application/json 38
2024-06-15 22:29:40.864 +05:30  INF  Executing endpoint 'API.Controllers.CartController.ModifyCart (API)'
2024-06-15 22:29:40.868 +05:30  INF  Route matched with {action = "ModifyCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ModifyCart(Application.DTOs.Cart.CartItemRequset) on controller API.Controllers.CartController (API).
2024-06-15 22:29:40.885 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450), @__itemId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__userId_0 AND [u].[ProductId] = @__itemId_1
2024-06-15 22:29:40.896 +05:30  INF  Cart Items {"User":null,"userId":"666d44166e81753ef42cf7b0","Product":null,"ProductId":1,"Quantity":2,"$type":"UserProduct"}
2024-06-15 22:29:40.907 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p2='?' (Size = 450), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [UserProducts] SET [Quantity] = @p0
OUTPUT 1
WHERE [ProductId] = @p1 AND [userId] = @p2;
2024-06-15 22:29:40.913 +05:30  INF  Cart Items updated Sucessfully
2024-06-15 22:29:40.915 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-06-15 22:29:40.916 +05:30  INF  Executed action API.Controllers.CartController.ModifyCart (API) in 45.3878ms
2024-06-15 22:29:40.918 +05:30  INF  Executed endpoint 'API.Controllers.CartController.ModifyCart (API)'
2024-06-15 22:29:40.920 +05:30  INF  Request finished HTTP/2 PUT https://localhost:7220/api/Cart/modify-cart-item - 200 null application/json; charset=utf-8 64.9102ms
2024-06-15 22:29:52.925 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/api/Cart/get-all-cartItems - null null
2024-06-15 22:29:52.937 +05:30  INF  Executing endpoint 'API.Controllers.CartController.GetAllCartItems (API)'
2024-06-15 22:29:52.942 +05:30  INF  Route matched with {action = "GetAllCartItems", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllCartItems() on controller API.Controllers.CartController (API).
2024-06-15 22:29:53.013 +05:30  INF  Executed DbCommand (60ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-06-15 22:29:53.037 +05:30  INF  Cart Items [{"ProductId":1,"Quantity":19,"Product":{"ProductId":1,"ImageUrl":"electronics-laptop.jpg","Description":"Powerful laptop with advanced features","Name":"Laptop","Price":999.99,"Quantity":100,"Discount":0,"ProductCategoryId":1,"$type":"ProductCartResponse"},"$type":"CartItemResponse"}]
2024-06-15 22:29:53.052 +05:30  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.DTOs.Cart.CartItemResponse, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-15 22:29:53.058 +05:30  INF  Executed action API.Controllers.CartController.GetAllCartItems (API) in 113.5527ms
2024-06-15 22:29:53.060 +05:30  INF  Executed endpoint 'API.Controllers.CartController.GetAllCartItems (API)'
2024-06-15 22:29:53.061 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/api/Cart/get-all-cartItems - 200 null application/json; charset=utf-8 136.7536ms
2024-06-15 22:30:20.310 +05:30  INF  Request starting HTTP/2 DELETE https://localhost:7220/api/Cart/delete-cart-item/1 - null null
2024-06-15 22:30:20.324 +05:30  INF  Executing endpoint 'API.Controllers.CartController.DeleteCartItem (API)'
2024-06-15 22:30:20.329 +05:30  INF  Route matched with {action = "DeleteCartItem", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteCartItem(Int32) on controller API.Controllers.CartController (API).
2024-06-15 22:30:20.379 +05:30  INF  Executed DbCommand (39ms) [Parameters=[@__userId_0='?' (Size = 450), @__itemId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__userId_0 AND [u].[ProductId] = @__itemId_1
2024-06-15 22:30:20.385 +05:30  INF  Cart Items {"User":null,"userId":"666d44166e81753ef42cf7b0","Product":null,"ProductId":1,"Quantity":19,"$type":"UserProduct"}
2024-06-15 22:30:20.411 +05:30  INF  Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [UserProducts]
OUTPUT 1
WHERE [ProductId] = @p0 AND [userId] = @p1;
2024-06-15 22:30:20.421 +05:30  INF  Cart Item remove successfully
2024-06-15 22:30:20.423 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-06-15 22:30:20.425 +05:30  INF  Executed action API.Controllers.CartController.DeleteCartItem (API) in 93.6099ms
2024-06-15 22:30:20.426 +05:30  INF  Executed endpoint 'API.Controllers.CartController.DeleteCartItem (API)'
2024-06-15 22:30:20.428 +05:30  INF  Request finished HTTP/2 DELETE https://localhost:7220/api/Cart/delete-cart-item/1 - 200 null application/json; charset=utf-8 117.9942ms
2024-06-15 22:30:38.514 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/index.html - null null
2024-06-15 22:30:38.534 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/index.html - 200 null text/html;charset=utf-8 19.7237ms
2024-06-15 22:30:38.592 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - null null
2024-06-15 22:30:38.592 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_vs/browserLink - null null
2024-06-15 22:30:38.596 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 4.0409ms
2024-06-15 22:30:38.635 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_vs/browserLink - 200 null text/javascript; charset=UTF-8 42.6284ms
2024-06-15 22:30:38.767 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - null null
2024-06-15 22:30:38.797 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 30.9134ms
