2024-05-14 07:00:34.163 +05:30  INF  User profile is available. Using 'C:\Users\iTela\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-14 07:00:34.494 +05:30  INF  Now listening on: https://localhost:7220
2024-05-14 07:00:34.498 +05:30  INF  Now listening on: http://localhost:5016
2024-05-14 07:00:34.505 +05:30  INF  Application started. Press Ctrl+C to shut down.
2024-05-14 07:00:34.509 +05:30  INF  Hosting environment: Development
2024-05-14 07:00:34.511 +05:30  INF  Content root path: C:\Users\iTela\Documents\Assignment\sample project structure\ShoppingApp\API
2024-05-14 07:00:35.067 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/index.html - null null
2024-05-14 07:00:35.459 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/index.html - 200 null text/html;charset=utf-8 398.1647ms
2024-05-14 07:00:35.495 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - null null
2024-05-14 07:00:35.495 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_vs/browserLink - null null
2024-05-14 07:00:35.522 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 27.495ms
2024-05-14 07:00:35.594 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_vs/browserLink - 200 null text/javascript; charset=UTF-8 99.5754ms
2024-05-14 07:00:35.674 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - null null
2024-05-14 07:00:35.816 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 143.0272ms
2024-05-14 13:28:53.355 +05:30  INF  User profile is available. Using 'C:\Users\iTela\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-14 13:28:54.065 +05:30  INF  Now listening on: https://localhost:7220
2024-05-14 13:28:54.068 +05:30  INF  Now listening on: http://localhost:5016
2024-05-14 13:28:54.074 +05:30  INF  Application started. Press Ctrl+C to shut down.
2024-05-14 13:28:54.078 +05:30  INF  Hosting environment: Development
2024-05-14 13:28:54.082 +05:30  INF  Content root path: C:\Users\iTela\Documents\Assignment\sample project structure\ShoppingApp\API
2024-05-14 13:28:56.763 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/index.html - null null
2024-05-14 13:28:57.134 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/index.html - 200 null text/html;charset=utf-8 379.0247ms
2024-05-14 13:28:57.157 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_vs/browserLink - null null
2024-05-14 13:28:57.157 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - null null
2024-05-14 13:28:57.190 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 32.779ms
2024-05-14 13:28:57.354 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_vs/browserLink - 200 null text/javascript; charset=UTF-8 196.5502ms
2024-05-14 13:28:57.435 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - null null
2024-05-14 13:28:57.638 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 203.0171ms
2024-05-14 13:30:28.538 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/User/login - application/json 77
2024-05-14 13:30:28.642 +05:30  INF  Executing endpoint 'API.Controllers.UserController.Login (API)'
2024-05-14 13:30:28.671 +05:30  INF  Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Application.DTOs.LoginDTO) on controller API.Controllers.UserController (API).
2024-05-14 13:30:30.927 +05:30  INF  Executing OkObjectResult, writing value of type '<>f__AnonymousType0`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-05-14 13:30:30.939 +05:30  INF  Executed action API.Controllers.UserController.Login (API) in 2261.1622ms
2024-05-14 13:30:30.941 +05:30  INF  Executed endpoint 'API.Controllers.UserController.Login (API)'
2024-05-14 13:30:30.953 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/User/login - 200 null application/json; charset=utf-8 2415.6217ms
2024-05-14 13:31:21.721 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/Cart/getAll-cartItems - null null
2024-05-14 13:31:22.777 +05:30  INF  Executing endpoint 'API.Controllers.CartController.GetAllCartItems (API)'
2024-05-14 13:31:22.783 +05:30  INF  Route matched with {action = "GetAllCartItems", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllCartItems() on controller API.Controllers.CartController (API).
2024-05-14 13:31:32.604 +05:30  INF  Executed DbCommand (72ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-05-14 13:31:32.630 +05:30  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.DTOs.Cart.CartItemResponse, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-14 13:31:32.637 +05:30  INF  Executed action API.Controllers.CartController.GetAllCartItems (API) in 9851.3254ms
2024-05-14 13:31:32.640 +05:30  INF  Executed endpoint 'API.Controllers.CartController.GetAllCartItems (API)'
2024-05-14 13:31:32.646 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/Cart/getAll-cartItems - 200 null application/json; charset=utf-8 10924.7761ms
2024-05-14 13:31:50.163 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/Product/all-products - null null
2024-05-14 13:31:50.171 +05:30  INF  Executing endpoint 'API.Controllers.ProductController.GetProducts (API)'
2024-05-14 13:31:50.177 +05:30  INF  Route matched with {action = "GetProducts", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[Application.DTOs.Product.ProductResponse]] GetProducts() on controller API.Controllers.ProductController (API).
2024-05-14 13:31:50.247 +05:30  INF  Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity], [p0].[CategoryId], [p0].[CategoryIcon], [p0].[CategoryName]
FROM [Products] AS [p]
INNER JOIN [ProductCategories] AS [p0] ON [p].[ProductCategoryId] = [p0].[CategoryId]
2024-05-14 13:31:50.262 +05:30  INF  Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.DTOs.Product.ProductResponse, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-14 13:31:50.271 +05:30  INF  Executed action API.Controllers.ProductController.GetProducts (API) in 91.6756ms
2024-05-14 13:31:50.272 +05:30  INF  Executed endpoint 'API.Controllers.ProductController.GetProducts (API)'
2024-05-14 13:31:50.274 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/Product/all-products - 200 null application/json; charset=utf-8 110.9341ms
2024-05-14 13:32:43.186 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/Cart/add-to-cart - application/json 36
2024-05-14 13:32:43.201 +05:30  INF  Executing endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-05-14 13:32:43.204 +05:30  INF  Route matched with {action = "AddToCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToCart(Application.DTOs.Cart.CartItemRequset) on controller API.Controllers.CartController (API).
2024-05-14 13:32:43.223 +05:30  INF  Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-05-14 13:32:43.237 +05:30  INF  Executed action API.Controllers.CartController.AddToCart (API) in 30.1396ms
2024-05-14 13:32:43.240 +05:30  INF  Executed endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-05-14 13:32:43.242 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/Cart/add-to-cart - 400 null application/problem+json; charset=utf-8 55.8366ms
2024-05-14 13:32:59.253 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/Cart/add-to-cart - application/json 37
2024-05-14 13:32:59.259 +05:30  INF  Executing endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-05-14 13:32:59.262 +05:30  INF  Route matched with {action = "AddToCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToCart(Application.DTOs.Cart.CartItemRequset) on controller API.Controllers.CartController (API).
2024-05-14 13:32:59.346 +05:30  INF  Executed DbCommand (56ms) [Parameters=[@__userId_0='?' (Size = 450), @__itemId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__userId_0 AND [u].[ProductId] = @__itemId_1
2024-05-14 13:32:59.490 +05:30  INF  Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserProducts] ([ProductId], [userId], [Quantity])
VALUES (@p0, @p1, @p2);
2024-05-14 13:32:59.502 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-05-14 13:32:59.504 +05:30  INF  Executed action API.Controllers.CartController.AddToCart (API) in 239.3803ms
2024-05-14 13:32:59.506 +05:30  INF  Executed endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-05-14 13:32:59.507 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/Cart/add-to-cart - 200 null text/plain; charset=utf-8 254.2448ms
2024-05-14 13:33:06.142 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/Cart/add-to-cart - application/json 37
2024-05-14 13:33:06.146 +05:30  INF  Executing endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-05-14 13:33:06.152 +05:30  INF  Route matched with {action = "AddToCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToCart(Application.DTOs.Cart.CartItemRequset) on controller API.Controllers.CartController (API).
2024-05-14 13:33:06.172 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450), @__itemId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__userId_0 AND [u].[ProductId] = @__itemId_1
2024-05-14 13:33:06.226 +05:30  INF  Executed DbCommand (40ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserProducts] ([ProductId], [userId], [Quantity])
VALUES (@p0, @p1, @p2);
2024-05-14 13:33:06.230 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-05-14 13:33:06.231 +05:30  INF  Executed action API.Controllers.CartController.AddToCart (API) in 74.329ms
2024-05-14 13:33:06.233 +05:30  INF  Executed endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-05-14 13:33:06.234 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/Cart/add-to-cart - 200 null text/plain; charset=utf-8 92.5977ms
2024-05-14 13:33:56.990 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/Cart/add-to-cart - application/json 37
2024-05-14 13:33:56.999 +05:30  INF  Executing endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-05-14 13:33:57.000 +05:30  INF  Route matched with {action = "AddToCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToCart(Application.DTOs.Cart.CartItemRequset) on controller API.Controllers.CartController (API).
2024-05-14 13:33:57.059 +05:30  INF  Executed DbCommand (51ms) [Parameters=[@__userId_0='?' (Size = 450), @__itemId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__userId_0 AND [u].[ProductId] = @__itemId_1
2024-05-14 13:33:57.076 +05:30  INF  Executed DbCommand (4ms) [Parameters=[@p1='?' (DbType = Int32), @p2='?' (Size = 450), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [UserProducts] SET [Quantity] = @p0
OUTPUT 1
WHERE [ProductId] = @p1 AND [userId] = @p2;
2024-05-14 13:33:57.082 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-05-14 13:33:57.084 +05:30  INF  Executed action API.Controllers.CartController.AddToCart (API) in 80.122ms
2024-05-14 13:33:57.090 +05:30  INF  Executed endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-05-14 13:33:57.092 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/Cart/add-to-cart - 200 null text/plain; charset=utf-8 102.9466ms
2024-05-14 13:34:05.708 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/Cart/getAll-cartItems - null null
2024-05-14 13:34:05.711 +05:30  INF  Executing endpoint 'API.Controllers.CartController.GetAllCartItems (API)'
2024-05-14 13:34:05.713 +05:30  INF  Route matched with {action = "GetAllCartItems", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllCartItems() on controller API.Controllers.CartController (API).
2024-05-14 13:34:05.772 +05:30  INF  Executed DbCommand (49ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-05-14 13:34:05.780 +05:30  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.DTOs.Cart.CartItemResponse, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-14 13:34:05.784 +05:30  INF  Executed action API.Controllers.CartController.GetAllCartItems (API) in 68.0823ms
2024-05-14 13:34:05.786 +05:30  INF  Executed endpoint 'API.Controllers.CartController.GetAllCartItems (API)'
2024-05-14 13:34:05.788 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/Cart/getAll-cartItems - 200 null application/json; charset=utf-8 79.5273ms
2024-05-14 13:34:33.314 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/Checkout - null 0
2024-05-14 13:34:33.327 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Checkout (API)'
2024-05-14 13:34:33.330 +05:30  INF  Route matched with {action = "Checkout", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Checkout() on controller API.Controllers.CheckoutController (API).
2024-05-14 13:34:33.385 +05:30  INF  Executed DbCommand (37ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
FROM [Users] AS [u]
WHERE [u].[UserId] = @__userId_0
2024-05-14 13:34:33.395 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-05-14 13:34:33.454 +05:30  INF  Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([OrderDate], [PaymentId], [Status], [TotalAmount], [UserId])
OUTPUT INSERTED.[OrderId]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-05-14 13:34:33.495 +05:30  INF  Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderProducts] ([OrderId], [ProductId], [OrderQty], [UnitPrice])
VALUES (@p0, @p1, @p2, @p3);
2024-05-14 13:34:33.504 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderProducts] ([OrderId], [ProductId], [OrderQty], [UnitPrice])
VALUES (@p0, @p1, @p2, @p3);
2024-05-14 13:34:34.604 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-05-14 13:34:34.607 +05:30  INF  Executed action API.Controllers.CheckoutController.Checkout (API) in 1271.6055ms
2024-05-14 13:34:34.609 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Checkout (API)'
2024-05-14 13:34:34.611 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/Checkout - 200 null text/plain; charset=utf-8 1297.5462ms
2024-05-14 13:35:00.552 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 1962
2024-05-14 13:35:00.552 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 1919
2024-05-14 13:35:00.552 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 3514
2024-05-14 13:35:00.556 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 13:35:00.558 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 13:35:00.561 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 13:35:00.564 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 13:35:00.564 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 13:35:00.565 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 13:35:00.637 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 13:35:00.637 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 13:35:00.644 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 76.1639ms
2024-05-14 13:35:00.644 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 78.2887ms
2024-05-14 13:35:00.645 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 13:35:00.646 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 13:35:00.647 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 13:35:00.649 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 96.339ms
2024-05-14 13:35:00.650 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 78.9137ms
2024-05-14 13:35:00.651 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 98.8391ms
2024-05-14 13:35:00.655 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 13:35:00.660 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 107.7035ms
2024-05-14 13:35:01.221 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 3257
2024-05-14 13:35:01.224 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 13:35:01.226 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 13:35:01.249 +05:30  INF  Executed DbCommand (4ms) [Parameters=[@__paymentResponse_OrderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[OrderId], [o].[OrderDate], [o].[PaymentId], [o].[Status], [o].[TotalAmount], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[OrderId] = @__paymentResponse_OrderId_0
2024-05-14 13:35:01.278 +05:30  INF  Executed DbCommand (19ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Orders] SET [OrderDate] = @p0, [PaymentId] = @p1, [Status] = @p2, [TotalAmount] = @p3, [UserId] = @p4
OUTPUT 1
WHERE [OrderId] = @p5;
2024-05-14 13:35:01.290 +05:30  INF  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE 0 = 1
2024-05-14 13:35:01.300 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@__UserId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__UserId_0
2024-05-14 13:35:01.327 +05:30  INF  Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [UserProducts]
OUTPUT 1
WHERE [ProductId] = @p0 AND [userId] = @p1;
DELETE FROM [UserProducts]
OUTPUT 1
WHERE [ProductId] = @p2 AND [userId] = @p3;
2024-05-14 13:35:01.396 +05:30  INF  Executed DbCommand (7ms) [Parameters=[@__orderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[OrderId], [t].[OrderDate], [t].[PaymentId], [t].[Status], [t].[TotalAmount], [t].[UserId], [t].[UserId0], [t].[Email], [t].[FirstName], [t].[LastName], [t].[PhoneNumber], [t].[StripeId], [t0].[OrderId], [t0].[ProductId], [t0].[OrderQty], [t0].[UnitPrice], [t0].[ProductId0], [t0].[Description], [t0].[Discount], [t0].[ImageUrl], [t0].[Name], [t0].[Price], [t0].[ProductCategoryId], [t0].[Quantity]
FROM (
    SELECT TOP(1) [o].[OrderId], [o].[OrderDate], [o].[PaymentId], [o].[Status], [o].[TotalAmount], [o].[UserId], [u].[UserId] AS [UserId0], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
    FROM [Orders] AS [o]
    INNER JOIN [Users] AS [u] ON [o].[UserId] = [u].[UserId]
    WHERE [o].[OrderId] = @__orderId_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[OrderId], [o0].[ProductId], [o0].[OrderQty], [o0].[UnitPrice], [p].[ProductId] AS [ProductId0], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
    FROM [OrderProducts] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[ProductId]
) AS [t0] ON [t].[OrderId] = [t0].[OrderId]
ORDER BY [t].[OrderId], [t].[UserId0], [t0].[OrderId], [t0].[ProductId]
2024-05-14 13:35:02.098 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 3739
2024-05-14 13:35:02.103 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 13:35:02.104 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 13:35:02.111 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 13:35:02.112 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 5.732ms
2024-05-14 13:35:02.114 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 13:35:02.116 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 18.2311ms
2024-05-14 13:35:03.841 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 13:35:03.844 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 2615.9536ms
2024-05-14 13:35:03.846 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 13:35:03.847 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 2626.7462ms
2024-05-14 13:35:17.306 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/Product/all-products - null null
2024-05-14 13:35:17.310 +05:30  INF  Executing endpoint 'API.Controllers.ProductController.GetProducts (API)'
2024-05-14 13:35:17.312 +05:30  INF  Route matched with {action = "GetProducts", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[Application.DTOs.Product.ProductResponse]] GetProducts() on controller API.Controllers.ProductController (API).
2024-05-14 13:35:17.357 +05:30  INF  Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity], [p0].[CategoryId], [p0].[CategoryIcon], [p0].[CategoryName]
FROM [Products] AS [p]
INNER JOIN [ProductCategories] AS [p0] ON [p].[ProductCategoryId] = [p0].[CategoryId]
2024-05-14 13:35:17.361 +05:30  INF  Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.DTOs.Product.ProductResponse, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-14 13:35:17.363 +05:30  INF  Executed action API.Controllers.ProductController.GetProducts (API) in 48.781ms
2024-05-14 13:35:17.365 +05:30  INF  Executed endpoint 'API.Controllers.ProductController.GetProducts (API)'
2024-05-14 13:35:17.366 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/Product/all-products - 200 null application/json; charset=utf-8 61.2615ms
2024-05-14 13:35:49.775 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/Product/all-products - null null
2024-05-14 13:35:49.780 +05:30  INF  Executing endpoint 'API.Controllers.ProductController.GetProducts (API)'
2024-05-14 13:35:49.788 +05:30  INF  Route matched with {action = "GetProducts", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[Application.DTOs.Product.ProductResponse]] GetProducts() on controller API.Controllers.ProductController (API).
2024-05-14 13:35:49.807 +05:30  INF  Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity], [p0].[CategoryId], [p0].[CategoryIcon], [p0].[CategoryName]
FROM [Products] AS [p]
INNER JOIN [ProductCategories] AS [p0] ON [p].[ProductCategoryId] = [p0].[CategoryId]
2024-05-14 13:35:49.810 +05:30  INF  Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.DTOs.Product.ProductResponse, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-14 13:35:49.811 +05:30  INF  Executed action API.Controllers.ProductController.GetProducts (API) in 19.0596ms
2024-05-14 13:35:49.813 +05:30  INF  Executed endpoint 'API.Controllers.ProductController.GetProducts (API)'
2024-05-14 13:35:49.814 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/Product/all-products - 200 null application/json; charset=utf-8 39.7289ms
2024-05-14 13:36:23.106 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/Checkout - null 0
2024-05-14 13:36:23.111 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Checkout (API)'
2024-05-14 13:36:23.118 +05:30  INF  Route matched with {action = "Checkout", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Checkout() on controller API.Controllers.CheckoutController (API).
2024-05-14 13:36:23.176 +05:30  INF  Executed DbCommand (45ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
FROM [Users] AS [u]
WHERE [u].[UserId] = @__userId_0
2024-05-14 13:36:23.188 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-05-14 13:36:23.197 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([OrderDate], [PaymentId], [Status], [TotalAmount], [UserId])
OUTPUT INSERTED.[OrderId]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-05-14 13:36:24.516 +05:30  INF  Executed action API.Controllers.CheckoutController.Checkout (API) in 1390.7824ms
2024-05-14 13:36:24.519 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Checkout (API)'
2024-05-14 13:36:24.608 +05:30  ERR  An unhandled exception has occurred while executing the request.Stripe.StripeException: You passed an empty string for 'line_items'. We assume empty values are an attempt to unset a parameter; however 'line_items' cannot be unset. You should remove 'line_items' from your request or supply a non-empty value.
   at Stripe.StripeClient.ProcessResponse[T](StripeResponse response) in /_/src/Stripe.net/Infrastructure/Public/StripeClient.cs:line 153
   at Stripe.StripeClient.RequestAsync[T](HttpMethod method, String path, BaseOptions options, RequestOptions requestOptions, CancellationToken cancellationToken) in /_/src/Stripe.net/Infrastructure/Public/StripeClient.cs:line 115
   at Stripe.Service`1.RequestAsync[T](HttpMethod method, String path, BaseOptions options, RequestOptions requestOptions, CancellationToken cancellationToken) in /_/src/Stripe.net/Services/_base/Service.cs:line 276
   at PaymentService.Checkout(String stripeId, IEnumerable`1 products, String orderId) in C:\Users\iTela\Documents\Assignment\sample project structure\ShoppingApp\Infrastructure\Payment\PaymentService.cs:line 57
   at Application.Services.Implementation.CheckoutService.checkout() in C:\Users\iTela\Documents\Assignment\sample project structure\ShoppingApp\Application\Services\Implementation\CheckoutService.cs:line 42
   at API.Controllers.CheckoutController.Checkout() in C:\Users\iTela\Documents\Assignment\sample project structure\ShoppingApp\API\Controllers\CheckoutController.cs:line 26
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)

2024-05-14 13:36:24.632 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/Checkout - 500 null text/plain; charset=utf-8 1524.8495ms
2024-05-14 13:36:32.024 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/Cart/add-to-cart - application/json 37
2024-05-14 13:36:32.027 +05:30  INF  Executing endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-05-14 13:36:32.029 +05:30  INF  Route matched with {action = "AddToCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToCart(Application.DTOs.Cart.CartItemRequset) on controller API.Controllers.CartController (API).
2024-05-14 13:36:32.040 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450), @__itemId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__userId_0 AND [u].[ProductId] = @__itemId_1
2024-05-14 13:36:32.048 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserProducts] ([ProductId], [userId], [Quantity])
VALUES (@p0, @p1, @p2);
2024-05-14 13:36:32.051 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-05-14 13:36:32.052 +05:30  INF  Executed action API.Controllers.CartController.AddToCart (API) in 20.9591ms
2024-05-14 13:36:32.054 +05:30  INF  Executed endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-05-14 13:36:32.055 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/Cart/add-to-cart - 200 null text/plain; charset=utf-8 31.4611ms
2024-05-14 13:36:42.216 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/Cart/add-to-cart - application/json 37
2024-05-14 13:36:42.220 +05:30  INF  Executing endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-05-14 13:36:42.221 +05:30  INF  Route matched with {action = "AddToCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToCart(Application.DTOs.Cart.CartItemRequset) on controller API.Controllers.CartController (API).
2024-05-14 13:36:42.234 +05:30  INF  Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450), @__itemId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__userId_0 AND [u].[ProductId] = @__itemId_1
2024-05-14 13:36:42.299 +05:30  INF  Executed DbCommand (56ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserProducts] ([ProductId], [userId], [Quantity])
VALUES (@p0, @p1, @p2);
2024-05-14 13:36:42.303 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-05-14 13:36:42.304 +05:30  INF  Executed action API.Controllers.CartController.AddToCart (API) in 78.8759ms
2024-05-14 13:36:42.306 +05:30  INF  Executed endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-05-14 13:36:42.307 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/Cart/add-to-cart - 200 null text/plain; charset=utf-8 91.6651ms
2024-05-14 13:37:04.964 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/Checkout - null 0
2024-05-14 13:37:04.974 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Checkout (API)'
2024-05-14 13:37:04.975 +05:30  INF  Route matched with {action = "Checkout", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Checkout() on controller API.Controllers.CheckoutController (API).
2024-05-14 13:37:04.984 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
FROM [Users] AS [u]
WHERE [u].[UserId] = @__userId_0
2024-05-14 13:37:04.993 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-05-14 13:37:05.053 +05:30  INF  Executed DbCommand (52ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([OrderDate], [PaymentId], [Status], [TotalAmount], [UserId])
OUTPUT INSERTED.[OrderId]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-05-14 13:37:05.064 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderProducts] ([OrderId], [ProductId], [OrderQty], [UnitPrice])
VALUES (@p0, @p1, @p2, @p3);
2024-05-14 13:37:05.070 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderProducts] ([OrderId], [ProductId], [OrderQty], [UnitPrice])
VALUES (@p0, @p1, @p2, @p3);
2024-05-14 13:37:05.771 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-05-14 13:37:05.775 +05:30  INF  Executed action API.Controllers.CheckoutController.Checkout (API) in 796.5804ms
2024-05-14 13:37:05.777 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Checkout (API)'
2024-05-14 13:37:05.778 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/Checkout - 200 null text/plain; charset=utf-8 814.937ms
2024-05-14 13:37:27.086 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 3660
2024-05-14 13:37:27.087 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 1962
2024-05-14 13:37:27.097 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 13:37:27.099 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 13:37:27.100 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 13:37:27.101 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 13:37:27.107 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 13:37:27.108 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 13:37:27.109 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 6.23ms
2024-05-14 13:37:27.110 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 2.7052ms
2024-05-14 13:37:27.112 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 13:37:27.113 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 13:37:27.114 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 28.6905ms
2024-05-14 13:37:27.115 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 28.8483ms
2024-05-14 13:37:27.363 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 1919
2024-05-14 13:37:27.367 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 3286
2024-05-14 13:37:27.367 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 13:37:27.369 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 13:37:27.371 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 13:37:27.373 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 13:37:27.376 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 13:37:27.379 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 3.9186ms
2024-05-14 13:37:27.383 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 13:37:27.389 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__paymentResponse_OrderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[OrderId], [o].[OrderDate], [o].[PaymentId], [o].[Status], [o].[TotalAmount], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[OrderId] = @__paymentResponse_OrderId_0
2024-05-14 13:37:27.390 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 26.4752ms
2024-05-14 13:37:27.402 +05:30  INF  Executed DbCommand (5ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Orders] SET [OrderDate] = @p0, [PaymentId] = @p1, [Status] = @p2, [TotalAmount] = @p3, [UserId] = @p4
OUTPUT 1
WHERE [OrderId] = @p5;
2024-05-14 13:37:27.410 +05:30  INF  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE 0 = 1
2024-05-14 13:37:27.416 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@__UserId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__UserId_0
2024-05-14 13:37:27.426 +05:30  INF  Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [UserProducts]
OUTPUT 1
WHERE [ProductId] = @p0 AND [userId] = @p1;
DELETE FROM [UserProducts]
OUTPUT 1
WHERE [ProductId] = @p2 AND [userId] = @p3;
2024-05-14 13:37:27.439 +05:30  INF  Executed DbCommand (6ms) [Parameters=[@__orderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[OrderId], [t].[OrderDate], [t].[PaymentId], [t].[Status], [t].[TotalAmount], [t].[UserId], [t].[UserId0], [t].[Email], [t].[FirstName], [t].[LastName], [t].[PhoneNumber], [t].[StripeId], [t0].[OrderId], [t0].[ProductId], [t0].[OrderQty], [t0].[UnitPrice], [t0].[ProductId0], [t0].[Description], [t0].[Discount], [t0].[ImageUrl], [t0].[Name], [t0].[Price], [t0].[ProductCategoryId], [t0].[Quantity]
FROM (
    SELECT TOP(1) [o].[OrderId], [o].[OrderDate], [o].[PaymentId], [o].[Status], [o].[TotalAmount], [o].[UserId], [u].[UserId] AS [UserId0], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
    FROM [Orders] AS [o]
    INNER JOIN [Users] AS [u] ON [o].[UserId] = [u].[UserId]
    WHERE [o].[OrderId] = @__orderId_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[OrderId], [o0].[ProductId], [o0].[OrderQty], [o0].[UnitPrice], [p].[ProductId] AS [ProductId0], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
    FROM [OrderProducts] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[ProductId]
) AS [t0] ON [t].[OrderId] = [t0].[OrderId]
ORDER BY [t].[OrderId], [t].[UserId0], [t0].[OrderId], [t0].[ProductId]
2024-05-14 13:37:28.232 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 13:37:28.235 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 858.3192ms
2024-05-14 13:37:28.237 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 13:37:28.240 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 873.336ms
2024-05-14 13:37:29.080 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 3885
2024-05-14 13:37:29.085 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 13:37:29.086 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 13:37:29.091 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 13:37:29.092 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 2.3733ms
2024-05-14 13:37:29.093 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 13:37:29.094 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 14.7645ms
2024-05-14 13:40:07.705 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/index.html - null null
2024-05-14 13:40:07.730 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/index.html - 200 null text/html;charset=utf-8 25.4829ms
2024-05-14 13:40:07.761 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - null null
2024-05-14 13:40:07.767 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 6.1089ms
2024-05-14 13:40:07.772 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_vs/browserLink - null null
2024-05-14 13:40:07.799 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_vs/browserLink - 200 null text/javascript; charset=UTF-8 27.5035ms
2024-05-14 13:40:07.925 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - null null
2024-05-14 13:40:07.939 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 14.8559ms
2024-05-14 13:42:55.379 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/Cart/add-to-cart - application/json 37
2024-05-14 13:42:55.390 +05:30  INF  Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-05-14 13:42:55.395 +05:30  INF  AuthenticationScheme: Bearer was challenged.
2024-05-14 13:42:55.397 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/Cart/add-to-cart - 401 0 null 19.5622ms
2024-05-14 13:43:04.765 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/Checkout - null 0
2024-05-14 13:43:04.769 +05:30  INF  Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-05-14 13:43:04.771 +05:30  INF  AuthenticationScheme: Bearer was challenged.
2024-05-14 13:43:04.772 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/Checkout - 401 0 null 6.9461ms
2024-05-14 13:43:08.104 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/Checkout - null 0
2024-05-14 13:43:08.108 +05:30  INF  Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-05-14 13:43:08.110 +05:30  INF  AuthenticationScheme: Bearer was challenged.
2024-05-14 13:43:08.112 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/Checkout - 401 0 null 8.2361ms
2024-05-14 13:43:35.474 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/Checkout - null 0
2024-05-14 13:43:35.492 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Checkout (API)'
2024-05-14 13:43:35.497 +05:30  INF  Route matched with {action = "Checkout", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Checkout() on controller API.Controllers.CheckoutController (API).
2024-05-14 13:43:36.530 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
FROM [Users] AS [u]
WHERE [u].[UserId] = @__userId_0
2024-05-14 13:43:36.540 +05:30  INF  Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-05-14 13:43:36.549 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([OrderDate], [PaymentId], [Status], [TotalAmount], [UserId])
OUTPUT INSERTED.[OrderId]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-05-14 13:43:37.523 +05:30  INF  Executed action API.Controllers.CheckoutController.Checkout (API) in 2023.2605ms
2024-05-14 13:43:37.525 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Checkout (API)'
2024-05-14 13:43:37.532 +05:30  ERR  An unhandled exception has occurred while executing the request.Stripe.StripeException: You passed an empty string for 'line_items'. We assume empty values are an attempt to unset a parameter; however 'line_items' cannot be unset. You should remove 'line_items' from your request or supply a non-empty value.
   at Stripe.StripeClient.ProcessResponse[T](StripeResponse response) in /_/src/Stripe.net/Infrastructure/Public/StripeClient.cs:line 153
   at Stripe.StripeClient.RequestAsync[T](HttpMethod method, String path, BaseOptions options, RequestOptions requestOptions, CancellationToken cancellationToken) in /_/src/Stripe.net/Infrastructure/Public/StripeClient.cs:line 115
   at Stripe.Service`1.RequestAsync[T](HttpMethod method, String path, BaseOptions options, RequestOptions requestOptions, CancellationToken cancellationToken) in /_/src/Stripe.net/Services/_base/Service.cs:line 276
   at PaymentService.Checkout(String stripeId, IEnumerable`1 products, String orderId)
   at Application.Services.Implementation.CheckoutService.checkout() in C:\Users\iTela\Documents\Assignment\sample project structure\ShoppingApp\Application\Services\Implementation\CheckoutService.cs:line 42
   at API.Controllers.CheckoutController.Checkout() in C:\Users\iTela\Documents\Assignment\sample project structure\ShoppingApp\API\Controllers\CheckoutController.cs:line 26
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)

2024-05-14 13:43:37.551 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/Checkout - 500 null text/plain; charset=utf-8 2076.9157ms
2024-05-14 13:43:59.184 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/Cart/add-to-cart - application/json 37
2024-05-14 13:43:59.197 +05:30  INF  Executing endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-05-14 13:43:59.204 +05:30  INF  Route matched with {action = "AddToCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToCart(Application.DTOs.Cart.CartItemRequset) on controller API.Controllers.CartController (API).
2024-05-14 13:43:59.215 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450), @__itemId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__userId_0 AND [u].[ProductId] = @__itemId_1
2024-05-14 13:43:59.269 +05:30  INF  Executed DbCommand (44ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserProducts] ([ProductId], [userId], [Quantity])
VALUES (@p0, @p1, @p2);
2024-05-14 13:43:59.273 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-05-14 13:43:59.274 +05:30  INF  Executed action API.Controllers.CartController.AddToCart (API) in 66.6523ms
2024-05-14 13:43:59.276 +05:30  INF  Executed endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-05-14 13:43:59.277 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/Cart/add-to-cart - 200 null text/plain; charset=utf-8 92.8857ms
2024-05-14 13:44:09.148 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/Checkout - null 0
2024-05-14 13:44:09.152 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Checkout (API)'
2024-05-14 13:44:09.154 +05:30  INF  Route matched with {action = "Checkout", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Checkout() on controller API.Controllers.CheckoutController (API).
2024-05-14 13:44:09.164 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
FROM [Users] AS [u]
WHERE [u].[UserId] = @__userId_0
2024-05-14 13:44:09.170 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-05-14 13:44:09.178 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([OrderDate], [PaymentId], [Status], [TotalAmount], [UserId])
OUTPUT INSERTED.[OrderId]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-05-14 13:44:09.186 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderProducts] ([OrderId], [ProductId], [OrderQty], [UnitPrice])
VALUES (@p0, @p1, @p2, @p3);
2024-05-14 13:44:09.772 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-05-14 13:44:09.776 +05:30  INF  Executed action API.Controllers.CheckoutController.Checkout (API) in 618.5919ms
2024-05-14 13:44:09.778 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Checkout (API)'
2024-05-14 13:44:09.780 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/Checkout - 200 null text/plain; charset=utf-8 631.9489ms
2024-05-14 13:44:32.969 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 3510
2024-05-14 13:44:32.978 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 13:44:32.982 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 13:45:36.250 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 13:45:36.263 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 63278.1059ms
2024-05-14 13:45:36.267 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 13:45:36.273 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 63304.1415ms
2024-05-14 13:45:36.274 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 1960
2024-05-14 13:45:36.296 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 13:45:36.301 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 13:47:02.683 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 13:47:02.723 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 86415.2761ms
2024-05-14 13:47:02.724 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 13:47:02.725 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 499 null application/json; charset=utf-8 86451.3248ms
2024-05-14 13:48:51.290 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/Cart/add-to-cart - application/json 37
2024-05-14 13:48:51.303 +05:30  INF  Executing endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-05-14 13:48:51.311 +05:30  INF  Route matched with {action = "AddToCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToCart(Application.DTOs.Cart.CartItemRequset) on controller API.Controllers.CartController (API).
2024-05-14 13:48:51.321 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450), @__itemId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__userId_0 AND [u].[ProductId] = @__itemId_1
2024-05-14 13:48:51.331 +05:30  INF  Executed DbCommand (4ms) [Parameters=[@p1='?' (DbType = Int32), @p2='?' (Size = 450), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [UserProducts] SET [Quantity] = @p0
OUTPUT 1
WHERE [ProductId] = @p1 AND [userId] = @p2;
2024-05-14 13:48:51.334 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-05-14 13:48:51.335 +05:30  INF  Executed action API.Controllers.CartController.AddToCart (API) in 21.6296ms
2024-05-14 13:48:51.337 +05:30  INF  Executed endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-05-14 13:48:51.338 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/Cart/add-to-cart - 200 null text/plain; charset=utf-8 47.9072ms
2024-05-14 13:49:04.911 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/Checkout - null 0
2024-05-14 13:49:04.917 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Checkout (API)'
2024-05-14 13:49:04.922 +05:30  INF  Route matched with {action = "Checkout", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Checkout() on controller API.Controllers.CheckoutController (API).
2024-05-14 13:49:04.932 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
FROM [Users] AS [u]
WHERE [u].[UserId] = @__userId_0
2024-05-14 13:49:04.941 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-05-14 13:49:04.950 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([OrderDate], [PaymentId], [Status], [TotalAmount], [UserId])
OUTPUT INSERTED.[OrderId]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-05-14 13:49:04.958 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderProducts] ([OrderId], [ProductId], [OrderQty], [UnitPrice])
VALUES (@p0, @p1, @p2, @p3);
2024-05-14 13:49:06.624 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-05-14 13:49:06.627 +05:30  INF  Executed action API.Controllers.CheckoutController.Checkout (API) in 1701.2812ms
2024-05-14 13:49:06.628 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Checkout (API)'
2024-05-14 13:49:06.630 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/Checkout - 200 null text/plain; charset=utf-8 1718.8229ms
2024-05-14 13:49:21.714 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 3655
2024-05-14 13:49:21.720 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 13:49:21.722 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 1960
2024-05-14 13:49:21.729 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 13:49:21.730 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 13:49:50.532 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 13:49:53.704 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 13:49:55.897 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 34165.235ms
2024-05-14 13:49:57.302 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 13:49:57.304 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 13:49:57.320 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 35606.6035ms
2024-05-14 13:49:57.321 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 3608.6251ms
2024-05-14 13:49:57.326 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 13:49:57.327 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 499 null application/json; charset=utf-8 35604.9753ms
2024-05-14 13:51:02.561 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/index.html - null null
2024-05-14 13:51:02.579 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/index.html - 200 null text/html;charset=utf-8 17.4153ms
2024-05-14 13:51:02.608 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - null null
2024-05-14 13:51:02.614 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 5.8398ms
2024-05-14 13:51:02.620 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_vs/browserLink - null null
2024-05-14 13:51:02.636 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_vs/browserLink - 200 null text/javascript; charset=UTF-8 16.735ms
2024-05-14 13:51:02.769 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - null null
2024-05-14 13:51:02.782 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 13.2622ms
2024-05-14 13:51:22.860 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/Cart/getAll-cartItems - null null
2024-05-14 13:51:22.878 +05:30  INF  Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-05-14 13:51:22.879 +05:30  INF  AuthenticationScheme: Bearer was challenged.
2024-05-14 13:51:22.880 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/Cart/getAll-cartItems - 401 0 null 20.1085ms
2024-05-14 13:51:35.211 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/Cart/getAll-cartItems - null null
2024-05-14 13:51:35.217 +05:30  INF  Executing endpoint 'API.Controllers.CartController.GetAllCartItems (API)'
2024-05-14 13:51:35.222 +05:30  INF  Route matched with {action = "GetAllCartItems", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllCartItems() on controller API.Controllers.CartController (API).
2024-05-14 13:51:35.233 +05:30  INF  Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-05-14 13:51:35.236 +05:30  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.DTOs.Cart.CartItemResponse, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-14 13:51:35.240 +05:30  INF  Executed action API.Controllers.CartController.GetAllCartItems (API) in 14.669ms
2024-05-14 13:51:35.242 +05:30  INF  Executed endpoint 'API.Controllers.CartController.GetAllCartItems (API)'
2024-05-14 13:51:35.243 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/Cart/getAll-cartItems - 200 null application/json; charset=utf-8 32.2767ms
2024-05-14 13:51:50.057 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/Checkout - null 0
2024-05-14 13:51:50.068 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Checkout (API)'
2024-05-14 13:51:50.072 +05:30  INF  Route matched with {action = "Checkout", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Checkout() on controller API.Controllers.CheckoutController (API).
2024-05-14 13:51:50.081 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
FROM [Users] AS [u]
WHERE [u].[UserId] = @__userId_0
2024-05-14 13:51:50.087 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-05-14 13:51:50.148 +05:30  INF  Executed DbCommand (53ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([OrderDate], [PaymentId], [Status], [TotalAmount], [UserId])
OUTPUT INSERTED.[OrderId]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-05-14 13:51:50.157 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderProducts] ([OrderId], [ProductId], [OrderQty], [UnitPrice])
VALUES (@p0, @p1, @p2, @p3);
2024-05-14 13:51:51.038 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-05-14 13:51:51.042 +05:30  INF  Executed action API.Controllers.CheckoutController.Checkout (API) in 967.5881ms
2024-05-14 13:51:51.044 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Checkout (API)'
2024-05-14 13:51:51.047 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/Checkout - 200 null text/plain; charset=utf-8 990.2323ms
2024-05-14 13:52:02.361 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 1960
2024-05-14 13:52:02.364 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 13:52:02.368 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 13:53:09.899 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 13:53:09.916 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 67544.5649ms
2024-05-14 13:53:09.919 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 13:53:09.924 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 499 null application/json; charset=utf-8 67561.9698ms
2024-05-14 13:53:17.702 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/Checkout - null 0
2024-05-14 13:53:17.707 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Checkout (API)'
2024-05-14 13:53:17.708 +05:30  INF  Route matched with {action = "Checkout", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Checkout() on controller API.Controllers.CheckoutController (API).
2024-05-14 13:53:17.719 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
FROM [Users] AS [u]
WHERE [u].[UserId] = @__userId_0
2024-05-14 13:53:17.729 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-05-14 13:53:17.737 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([OrderDate], [PaymentId], [Status], [TotalAmount], [UserId])
OUTPUT INSERTED.[OrderId]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-05-14 13:53:17.746 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderProducts] ([OrderId], [ProductId], [OrderQty], [UnitPrice])
VALUES (@p0, @p1, @p2, @p3);
2024-05-14 13:53:18.710 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-05-14 13:53:18.713 +05:30  INF  Executed action API.Controllers.CheckoutController.Checkout (API) in 1001.3548ms
2024-05-14 13:53:18.715 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Checkout (API)'
2024-05-14 13:53:18.716 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/Checkout - 200 null text/plain; charset=utf-8 1014.8939ms
2024-05-14 13:53:29.698 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 3656
2024-05-14 13:53:29.705 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 13:53:29.706 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 13:54:36.872 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 13:54:36.892 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 67183.0284ms
2024-05-14 13:54:36.895 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 13:54:36.901 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 499 null application/json; charset=utf-8 67203.2781ms
2024-05-14 13:54:51.176 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/Checkout - null 0
2024-05-14 13:54:51.180 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Checkout (API)'
2024-05-14 13:54:51.181 +05:30  INF  Route matched with {action = "Checkout", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Checkout() on controller API.Controllers.CheckoutController (API).
2024-05-14 13:54:51.192 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
FROM [Users] AS [u]
WHERE [u].[UserId] = @__userId_0
2024-05-14 13:54:51.201 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-05-14 13:54:51.209 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([OrderDate], [PaymentId], [Status], [TotalAmount], [UserId])
OUTPUT INSERTED.[OrderId]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-05-14 13:54:51.217 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderProducts] ([OrderId], [ProductId], [OrderQty], [UnitPrice])
VALUES (@p0, @p1, @p2, @p3);
2024-05-14 13:54:52.674 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-05-14 13:54:52.681 +05:30  INF  Executed action API.Controllers.CheckoutController.Checkout (API) in 1497.5411ms
2024-05-14 13:54:52.686 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Checkout (API)'
2024-05-14 13:54:52.687 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/Checkout - 200 null text/plain; charset=utf-8 1511.9074ms
2024-05-14 13:55:03.728 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 3656
2024-05-14 13:55:03.731 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 13:55:03.732 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 13:55:17.356 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 13:55:17.364 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 13628.4663ms
2024-05-14 13:55:17.370 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 1960
2024-05-14 13:55:17.371 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 13:55:17.383 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 3881
2024-05-14 13:55:17.387 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 13659.0656ms
2024-05-14 13:55:17.383 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 13:55:17.395 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 13:55:17.394 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 1918
2024-05-14 13:55:17.394 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 3284
2024-05-14 13:55:17.399 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 13:55:17.400 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 13:55:17.402 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 13:55:17.405 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 13:55:22.603 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 13:55:22.604 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 13:55:24.354 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 6945.4363ms
2024-05-14 13:55:26.421 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 13:55:27.463 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 13:55:28.489 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 8547.1316ms
2024-05-14 13:55:24.351 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 13:55:29.506 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 13:55:29.513 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 13:55:29.509 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 12138.9387ms
2024-05-14 13:55:31.583 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 14199.221ms
2024-05-14 13:55:35.074 +05:30  INF  Executed DbCommand (9ms) [Parameters=[@__paymentResponse_OrderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[OrderId], [o].[OrderDate], [o].[PaymentId], [o].[Status], [o].[TotalAmount], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[OrderId] = @__paymentResponse_OrderId_0
2024-05-14 13:55:30.559 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 4134.3132ms
2024-05-14 13:55:35.083 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 13:55:35.084 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 17690.0604ms
2024-05-14 13:55:35.137 +05:30  INF  Executed DbCommand (51ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Orders] SET [OrderDate] = @p0, [PaymentId] = @p1, [Status] = @p2, [TotalAmount] = @p3, [UserId] = @p4
OUTPUT 1
WHERE [OrderId] = @p5;
2024-05-14 13:55:35.144 +05:30  INF  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE 0 = 1
2024-05-14 13:55:35.151 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@__UserId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__UserId_0
2024-05-14 13:55:35.160 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [UserProducts]
OUTPUT 1
WHERE [ProductId] = @p0 AND [userId] = @p1;
2024-05-14 13:55:35.173 +05:30  INF  Executed DbCommand (6ms) [Parameters=[@__orderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[OrderId], [t].[OrderDate], [t].[PaymentId], [t].[Status], [t].[TotalAmount], [t].[UserId], [t].[UserId0], [t].[Email], [t].[FirstName], [t].[LastName], [t].[PhoneNumber], [t].[StripeId], [t0].[OrderId], [t0].[ProductId], [t0].[OrderQty], [t0].[UnitPrice], [t0].[ProductId0], [t0].[Description], [t0].[Discount], [t0].[ImageUrl], [t0].[Name], [t0].[Price], [t0].[ProductCategoryId], [t0].[Quantity]
FROM (
    SELECT TOP(1) [o].[OrderId], [o].[OrderDate], [o].[PaymentId], [o].[Status], [o].[TotalAmount], [o].[UserId], [u].[UserId] AS [UserId0], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
    FROM [Orders] AS [o]
    INNER JOIN [Users] AS [u] ON [o].[UserId] = [u].[UserId]
    WHERE [o].[OrderId] = @__orderId_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[OrderId], [o0].[ProductId], [o0].[OrderQty], [o0].[UnitPrice], [p].[ProductId] AS [ProductId0], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
    FROM [OrderProducts] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[ProductId]
) AS [t0] ON [t].[OrderId] = [t0].[OrderId]
ORDER BY [t].[OrderId], [t].[UserId0], [t0].[OrderId], [t0].[ProductId]
2024-05-14 13:55:36.391 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 13:55:36.396 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 6877.0836ms
2024-05-14 13:55:36.398 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 13:55:36.399 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 499 null application/json; charset=utf-8 19004.8675ms
2024-05-14 13:57:08.152 +05:30  INF  User profile is available. Using 'C:\Users\iTela\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-14 13:57:08.443 +05:30  INF  Now listening on: https://localhost:7220
2024-05-14 13:57:08.448 +05:30  INF  Now listening on: http://localhost:5016
2024-05-14 13:57:08.456 +05:30  INF  Application started. Press Ctrl+C to shut down.
2024-05-14 13:57:08.460 +05:30  INF  Hosting environment: Development
2024-05-14 13:57:08.464 +05:30  INF  Content root path: C:\Users\iTela\Documents\Assignment\sample project structure\ShoppingApp\API
2024-05-14 13:57:08.837 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/index.html - null null
2024-05-14 13:57:09.061 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/index.html - 200 null text/html;charset=utf-8 232.3197ms
2024-05-14 13:57:09.096 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - null null
2024-05-14 13:57:09.110 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 14.3735ms
2024-05-14 13:57:09.111 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_vs/browserLink - null null
2024-05-14 13:57:09.195 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_vs/browserLink - 200 null text/javascript; charset=UTF-8 83.7948ms
2024-05-14 13:57:09.261 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - null null
2024-05-14 13:57:09.394 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 133.5516ms
2024-05-14 13:59:30.586 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/Checkout - null 0
2024-05-14 13:59:30.680 +05:30  INF  Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-05-14 13:59:30.687 +05:30  INF  AuthenticationScheme: Bearer was challenged.
2024-05-14 13:59:30.689 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/Checkout - 401 0 null 103.0958ms
2024-05-14 13:59:45.007 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/Checkout - null 0
2024-05-14 13:59:46.182 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Checkout (API)'
2024-05-14 13:59:46.208 +05:30  INF  Route matched with {action = "Checkout", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Checkout() on controller API.Controllers.CheckoutController (API).
2024-05-14 13:59:48.762 +05:30  INF  Executed DbCommand (46ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
FROM [Users] AS [u]
WHERE [u].[UserId] = @__userId_0
2024-05-14 13:59:48.879 +05:30  INF  Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-05-14 13:59:49.107 +05:30  INF  Executed DbCommand (41ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([OrderDate], [PaymentId], [Status], [TotalAmount], [UserId])
OUTPUT INSERTED.[OrderId]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-05-14 13:59:50.610 +05:30  INF  Executed action API.Controllers.CheckoutController.Checkout (API) in 4395.3693ms
2024-05-14 13:59:50.613 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Checkout (API)'
2024-05-14 13:59:50.663 +05:30  ERR  An unhandled exception has occurred while executing the request.Stripe.StripeException: You passed an empty string for 'line_items'. We assume empty values are an attempt to unset a parameter; however 'line_items' cannot be unset. You should remove 'line_items' from your request or supply a non-empty value.
   at Stripe.StripeClient.ProcessResponse[T](StripeResponse response) in /_/src/Stripe.net/Infrastructure/Public/StripeClient.cs:line 153
   at Stripe.StripeClient.RequestAsync[T](HttpMethod method, String path, BaseOptions options, RequestOptions requestOptions, CancellationToken cancellationToken) in /_/src/Stripe.net/Infrastructure/Public/StripeClient.cs:line 115
   at Stripe.Service`1.RequestAsync[T](HttpMethod method, String path, BaseOptions options, RequestOptions requestOptions, CancellationToken cancellationToken) in /_/src/Stripe.net/Services/_base/Service.cs:line 276
   at PaymentService.Checkout(String stripeId, IEnumerable`1 products, String orderId) in C:\Users\iTela\Documents\Assignment\sample project structure\ShoppingApp\Infrastructure\Payment\PaymentService.cs:line 57
   at Application.Services.Implementation.CheckoutService.checkout() in C:\Users\iTela\Documents\Assignment\sample project structure\ShoppingApp\Application\Services\Implementation\CheckoutService.cs:line 42
   at API.Controllers.CheckoutController.Checkout() in C:\Users\iTela\Documents\Assignment\sample project structure\ShoppingApp\API\Controllers\CheckoutController.cs:line 26
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)

2024-05-14 13:59:50.729 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/Checkout - 500 null text/plain; charset=utf-8 5721.8411ms
2024-05-14 14:00:10.720 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/Cart/add-to-cart - application/json 37
2024-05-14 14:00:10.741 +05:30  INF  Executing endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-05-14 14:00:10.754 +05:30  INF  Route matched with {action = "AddToCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToCart(Application.DTOs.Cart.CartItemRequset) on controller API.Controllers.CartController (API).
2024-05-14 14:00:10.859 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450), @__itemId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__userId_0 AND [u].[ProductId] = @__itemId_1
2024-05-14 14:00:10.937 +05:30  INF  Executed DbCommand (45ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserProducts] ([ProductId], [userId], [Quantity])
VALUES (@p0, @p1, @p2);
2024-05-14 14:00:10.953 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-05-14 14:00:10.956 +05:30  INF  Executed action API.Controllers.CartController.AddToCart (API) in 195.2086ms
2024-05-14 14:00:10.958 +05:30  INF  Executed endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-05-14 14:00:10.960 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/Cart/add-to-cart - 200 null text/plain; charset=utf-8 239.7496ms
2024-05-14 14:00:21.672 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/Product/all-products - null null
2024-05-14 14:00:21.677 +05:30  INF  Executing endpoint 'API.Controllers.ProductController.GetProducts (API)'
2024-05-14 14:00:21.684 +05:30  INF  Route matched with {action = "GetProducts", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[Application.DTOs.Product.ProductResponse]] GetProducts() on controller API.Controllers.ProductController (API).
2024-05-14 14:00:21.715 +05:30  INF  Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity], [p0].[CategoryId], [p0].[CategoryIcon], [p0].[CategoryName]
FROM [Products] AS [p]
INNER JOIN [ProductCategories] AS [p0] ON [p].[ProductCategoryId] = [p0].[CategoryId]
2024-05-14 14:00:21.730 +05:30  INF  Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.DTOs.Product.ProductResponse, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-14 14:00:21.745 +05:30  INF  Executed action API.Controllers.ProductController.GetProducts (API) in 58.2286ms
2024-05-14 14:00:21.753 +05:30  INF  Executed endpoint 'API.Controllers.ProductController.GetProducts (API)'
2024-05-14 14:00:21.755 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/Product/all-products - 200 null application/json; charset=utf-8 83.0554ms
2024-05-14 14:00:35.724 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/Checkout - null 0
2024-05-14 14:00:35.728 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Checkout (API)'
2024-05-14 14:00:35.731 +05:30  INF  Route matched with {action = "Checkout", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Checkout() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:00:35.749 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
FROM [Users] AS [u]
WHERE [u].[UserId] = @__userId_0
2024-05-14 14:00:35.762 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-05-14 14:00:35.807 +05:30  INF  Executed DbCommand (30ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([OrderDate], [PaymentId], [Status], [TotalAmount], [UserId])
OUTPUT INSERTED.[OrderId]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-05-14 14:00:35.850 +05:30  INF  Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderProducts] ([OrderId], [ProductId], [OrderQty], [UnitPrice])
VALUES (@p0, @p1, @p2, @p3);
2024-05-14 14:00:36.525 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-05-14 14:00:36.528 +05:30  INF  Executed action API.Controllers.CheckoutController.Checkout (API) in 790.3333ms
2024-05-14 14:00:36.531 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Checkout (API)'
2024-05-14 14:00:36.534 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/Checkout - 200 null text/plain; charset=utf-8 810.4655ms
2024-05-14 14:00:47.605 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 3656
2024-05-14 14:00:47.609 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:00:47.613 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:05:00.031 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 14:05:00.056 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 252438.6069ms
2024-05-14 14:05:00.058 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:05:00.064 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 499 null application/json; charset=utf-8 252458.8975ms
2024-05-14 14:05:01.018 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/index.html - null null
2024-05-14 14:05:01.055 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/index.html - 200 null text/html;charset=utf-8 37.8278ms
2024-05-14 14:05:01.093 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - null null
2024-05-14 14:05:01.101 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 8.0774ms
2024-05-14 14:05:01.113 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_vs/browserLink - null null
2024-05-14 14:05:01.137 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_vs/browserLink - 200 null text/javascript; charset=UTF-8 24.2316ms
2024-05-14 14:05:01.273 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - null null
2024-05-14 14:05:01.291 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 20.7545ms
2024-05-14 14:06:15.585 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/index.html - null null
2024-05-14 14:06:15.617 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/index.html - 200 null text/html;charset=utf-8 31.8717ms
2024-05-14 14:06:15.659 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - null null
2024-05-14 14:06:15.659 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_vs/browserLink - null null
2024-05-14 14:06:15.663 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 4.7578ms
2024-05-14 14:06:15.720 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_vs/browserLink - 200 null text/javascript; charset=UTF-8 61.3805ms
2024-05-14 14:06:15.785 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - null null
2024-05-14 14:06:15.809 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 24.7486ms
2024-05-14 14:06:45.027 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/index.html - null null
2024-05-14 14:06:45.042 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/index.html - 200 null text/html;charset=utf-8 15.8347ms
2024-05-14 14:06:45.081 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_vs/browserLink - null null
2024-05-14 14:06:45.083 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - null null
2024-05-14 14:06:45.097 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 13.7407ms
2024-05-14 14:06:45.128 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_vs/browserLink - 200 null text/javascript; charset=UTF-8 47.0051ms
2024-05-14 14:06:45.147 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - null null
2024-05-14 14:06:45.161 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 14.5192ms
2024-05-14 14:07:44.618 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/index.html - null null
2024-05-14 14:07:44.632 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/index.html - 200 null text/html;charset=utf-8 14.7046ms
2024-05-14 14:07:44.664 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_vs/browserLink - null null
2024-05-14 14:07:44.667 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - null null
2024-05-14 14:07:44.692 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 24.9333ms
2024-05-14 14:07:44.701 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_vs/browserLink - 200 null text/javascript; charset=UTF-8 36.8105ms
2024-05-14 14:07:44.728 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - null null
2024-05-14 14:07:44.749 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 21.3288ms
2024-05-14 14:08:45.831 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/webHook - null 0
2024-05-14 14:08:45.841 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:08:45.845 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:08:58.422 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 12574.3543ms
2024-05-14 14:08:58.425 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:08:58.434 +05:30  ERR  An unhandled exception has occurred while executing the request.System.NullReferenceException: Object reference not set to an instance of an object.
   at Stripe.EventUtility.ParseEvent(String json, Boolean throwOnApiVersionMismatch) in /_/src/Stripe.net/Services/Events/EventUtility.cs:line 44
   at PaymentService.webHookHandler()
   at Application.Services.Implementation.CheckoutService.HandlePayment()
   at API.Controllers.CheckoutController.Index() in C:\Users\iTela\Documents\Assignment\sample project structure\ShoppingApp\API\Controllers\CheckoutController.cs:line 38
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)

2024-05-14 14:08:58.468 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/webHook - 500 null text/plain; charset=utf-8 12637.0488ms
2024-05-14 14:09:09.823 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/Checkout - null 0
2024-05-14 14:09:09.827 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Checkout (API)'
2024-05-14 14:09:09.832 +05:30  INF  Route matched with {action = "Checkout", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Checkout() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:09:10.915 +05:30  INF  Executed DbCommand (37ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
FROM [Users] AS [u]
WHERE [u].[UserId] = @__userId_0
2024-05-14 14:09:10.930 +05:30  INF  Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-05-14 14:09:10.944 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([OrderDate], [PaymentId], [Status], [TotalAmount], [UserId])
OUTPUT INSERTED.[OrderId]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-05-14 14:09:10.958 +05:30  INF  Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderProducts] ([OrderId], [ProductId], [OrderQty], [UnitPrice])
VALUES (@p0, @p1, @p2, @p3);
2024-05-14 14:09:11.933 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-05-14 14:09:11.937 +05:30  INF  Executed action API.Controllers.CheckoutController.Checkout (API) in 2101.351ms
2024-05-14 14:09:11.941 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Checkout (API)'
2024-05-14 14:09:11.945 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/Checkout - 200 null text/plain; charset=utf-8 2121.895ms
2024-05-14 14:10:05.526 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 1960
2024-05-14 14:10:05.529 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:10:05.530 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:10:12.125 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 1918
2024-05-14 14:10:12.125 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 3284
2024-05-14 14:10:12.136 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:10:12.137 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 3881
2024-05-14 14:10:12.138 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 1918
2024-05-14 14:10:12.141 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:10:12.139 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:10:12.138 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 1960
2024-05-14 14:10:12.149 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:10:12.145 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:10:12.160 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:10:12.126 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 3510
2024-05-14 14:10:14.824 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:10:14.826 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 14:10:14.825 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:10:14.826 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 14:10:32.335 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 20178.387ms
2024-05-14 14:10:32.332 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 14:10:34.436 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:10:34.432 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 28898.64ms
2024-05-14 14:10:14.822 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:10:16.455 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:10:12.145 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 3255
2024-05-14 14:10:14.822 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 3735
2024-05-14 14:10:34.429 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__paymentResponse_OrderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[OrderId], [o].[OrderDate], [o].[PaymentId], [o].[Status], [o].[TotalAmount], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[OrderId] = @__paymentResponse_OrderId_0
2024-05-14 14:10:34.446 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 9983.9149ms
2024-05-14 14:10:34.447 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 14:10:34.448 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 22323.077ms
2024-05-14 14:10:34.480 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:10:34.483 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 2145.173ms
2024-05-14 14:10:34.500 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 22361.8372ms
2024-05-14 14:10:34.452 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:10:34.511 +05:30  INF  Executed DbCommand (12ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Orders] SET [OrderDate] = @p0, [PaymentId] = @p1, [Status] = @p2, [TotalAmount] = @p3, [UserId] = @p4
OUTPUT 1
WHERE [OrderId] = @p5;
2024-05-14 14:10:34.514 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:10:34.553 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 22415.6014ms
2024-05-14 14:10:34.458 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:10:34.528 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 29002.0178ms
2024-05-14 14:10:34.568 +05:30  INF  Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE 0 = 1
2024-05-14 14:10:34.456 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:10:36.830 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 14:10:34.463 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:10:39.555 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 14:10:34.466 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:10:39.557 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 4976.6743ms
2024-05-14 14:10:39.563 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:10:39.557 +05:30  INF  Executed DbCommand (2,702ms) [Parameters=[@__UserId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__UserId_0
2024-05-14 14:10:39.566 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 2718.3113ms
2024-05-14 14:10:39.571 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:10:42.214 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:10:39.567 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:10:42.223 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 499 null application/json; charset=utf-8 30085.8108ms
2024-05-14 14:10:42.221 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 499 null application/json; charset=utf-8 30094.8028ms
2024-05-14 14:10:42.221 +05:30  INF  Executed DbCommand (6ms) [Parameters=[@__paymentResponse_OrderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[OrderId], [o].[OrderDate], [o].[PaymentId], [o].[Status], [o].[TotalAmount], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[OrderId] = @__paymentResponse_OrderId_0
2024-05-14 14:10:44.276 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 14:10:44.292 +05:30  INF  Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [UserProducts]
OUTPUT 1
WHERE [ProductId] = @p0 AND [userId] = @p1;
2024-05-14 14:10:44.319 +05:30  INF  Executed DbCommand (12ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Orders] SET [OrderDate] = @p0, [PaymentId] = @p1, [Status] = @p2, [TotalAmount] = @p3, [UserId] = @p4
OUTPUT 1
WHERE [OrderId] = @p5;
2024-05-14 14:10:44.320 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 2083.0552ms
2024-05-14 14:10:44.347 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:10:44.352 +05:30  INF  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE 0 = 1
2024-05-14 14:10:44.355 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 499 null application/json; charset=utf-8 29533.176ms
2024-05-14 14:10:44.371 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__UserId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__UserId_0
2024-05-14 14:10:44.435 +05:30  INF  Executed DbCommand (10ms) [Parameters=[@__orderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[OrderId], [t].[OrderDate], [t].[PaymentId], [t].[Status], [t].[TotalAmount], [t].[UserId], [t].[UserId0], [t].[Email], [t].[FirstName], [t].[LastName], [t].[PhoneNumber], [t].[StripeId], [t0].[OrderId], [t0].[ProductId], [t0].[OrderQty], [t0].[UnitPrice], [t0].[ProductId0], [t0].[Description], [t0].[Discount], [t0].[ImageUrl], [t0].[Name], [t0].[Price], [t0].[ProductCategoryId], [t0].[Quantity]
FROM (
    SELECT TOP(1) [o].[OrderId], [o].[OrderDate], [o].[PaymentId], [o].[Status], [o].[TotalAmount], [o].[UserId], [u].[UserId] AS [UserId0], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
    FROM [Orders] AS [o]
    INNER JOIN [Users] AS [u] ON [o].[UserId] = [u].[UserId]
    WHERE [o].[OrderId] = @__orderId_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[OrderId], [o0].[ProductId], [o0].[OrderQty], [o0].[UnitPrice], [p].[ProductId] AS [ProductId0], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
    FROM [OrderProducts] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[ProductId]
) AS [t0] ON [t].[OrderId] = [t0].[OrderId]
ORDER BY [t].[OrderId], [t].[UserId0], [t0].[OrderId], [t0].[ProductId]
2024-05-14 14:10:44.438 +05:30  INF  Executed DbCommand (12ms) [Parameters=[@__orderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[OrderId], [t].[OrderDate], [t].[PaymentId], [t].[Status], [t].[TotalAmount], [t].[UserId], [t].[UserId0], [t].[Email], [t].[FirstName], [t].[LastName], [t].[PhoneNumber], [t].[StripeId], [t0].[OrderId], [t0].[ProductId], [t0].[OrderQty], [t0].[UnitPrice], [t0].[ProductId0], [t0].[Description], [t0].[Discount], [t0].[ImageUrl], [t0].[Name], [t0].[Price], [t0].[ProductCategoryId], [t0].[Quantity]
FROM (
    SELECT TOP(1) [o].[OrderId], [o].[OrderDate], [o].[PaymentId], [o].[Status], [o].[TotalAmount], [o].[UserId], [u].[UserId] AS [UserId0], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
    FROM [Orders] AS [o]
    INNER JOIN [Users] AS [u] ON [o].[UserId] = [u].[UserId]
    WHERE [o].[OrderId] = @__orderId_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[OrderId], [o0].[ProductId], [o0].[OrderQty], [o0].[UnitPrice], [p].[ProductId] AS [ProductId0], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
    FROM [OrderProducts] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[ProductId]
) AS [t0] ON [t].[OrderId] = [t0].[OrderId]
ORDER BY [t].[OrderId], [t].[UserId0], [t0].[OrderId], [t0].[ProductId]
2024-05-14 14:10:45.595 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 14:10:45.598 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 14:10:45.599 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 6017.5067ms
2024-05-14 14:10:45.602 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 30773.2742ms
2024-05-14 14:10:45.604 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:10:45.606 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:10:45.610 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 499 null application/json; charset=utf-8 33465.0867ms
2024-05-14 14:10:45.612 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 499 null application/json; charset=utf-8 33486.6144ms
2024-05-14 14:11:24.310 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/Checkout - null 0
2024-05-14 14:11:24.314 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Checkout (API)'
2024-05-14 14:11:24.316 +05:30  INF  Route matched with {action = "Checkout", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Checkout() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:11:24.328 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
FROM [Users] AS [u]
WHERE [u].[UserId] = @__userId_0
2024-05-14 14:11:24.343 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-05-14 14:11:24.396 +05:30  INF  Executed DbCommand (39ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([OrderDate], [PaymentId], [Status], [TotalAmount], [UserId])
OUTPUT INSERTED.[OrderId]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-05-14 14:11:25.412 +05:30  INF  Executed action API.Controllers.CheckoutController.Checkout (API) in 1091.6434ms
2024-05-14 14:11:25.414 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Checkout (API)'
2024-05-14 14:11:25.423 +05:30  ERR  An unhandled exception has occurred while executing the request.Stripe.StripeException: You passed an empty string for 'line_items'. We assume empty values are an attempt to unset a parameter; however 'line_items' cannot be unset. You should remove 'line_items' from your request or supply a non-empty value.
   at Stripe.StripeClient.ProcessResponse[T](StripeResponse response) in /_/src/Stripe.net/Infrastructure/Public/StripeClient.cs:line 153
   at Stripe.StripeClient.RequestAsync[T](HttpMethod method, String path, BaseOptions options, RequestOptions requestOptions, CancellationToken cancellationToken) in /_/src/Stripe.net/Infrastructure/Public/StripeClient.cs:line 115
   at Stripe.Service`1.RequestAsync[T](HttpMethod method, String path, BaseOptions options, RequestOptions requestOptions, CancellationToken cancellationToken) in /_/src/Stripe.net/Services/_base/Service.cs:line 276
   at PaymentService.Checkout(String stripeId, IEnumerable`1 products, String orderId)
   at Application.Services.Implementation.CheckoutService.checkout()
   at API.Controllers.CheckoutController.Checkout() in C:\Users\iTela\Documents\Assignment\sample project structure\ShoppingApp\API\Controllers\CheckoutController.cs:line 26
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)

2024-05-14 14:11:25.463 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/Checkout - 500 null text/plain; charset=utf-8 1153.7452ms
2024-05-14 14:11:34.465 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/Checkout - null 0
2024-05-14 14:11:34.468 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Checkout (API)'
2024-05-14 14:11:34.470 +05:30  INF  Route matched with {action = "Checkout", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Checkout() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:11:34.480 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
FROM [Users] AS [u]
WHERE [u].[UserId] = @__userId_0
2024-05-14 14:11:34.494 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-05-14 14:11:34.506 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([OrderDate], [PaymentId], [Status], [TotalAmount], [UserId])
OUTPUT INSERTED.[OrderId]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-05-14 14:11:35.269 +05:30  INF  Executed action API.Controllers.CheckoutController.Checkout (API) in 795.2822ms
2024-05-14 14:11:35.271 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Checkout (API)'
2024-05-14 14:11:35.279 +05:30  ERR  An unhandled exception has occurred while executing the request.Stripe.StripeException: You passed an empty string for 'line_items'. We assume empty values are an attempt to unset a parameter; however 'line_items' cannot be unset. You should remove 'line_items' from your request or supply a non-empty value.
   at Stripe.StripeClient.ProcessResponse[T](StripeResponse response) in /_/src/Stripe.net/Infrastructure/Public/StripeClient.cs:line 153
   at Stripe.StripeClient.RequestAsync[T](HttpMethod method, String path, BaseOptions options, RequestOptions requestOptions, CancellationToken cancellationToken) in /_/src/Stripe.net/Infrastructure/Public/StripeClient.cs:line 115
   at Stripe.Service`1.RequestAsync[T](HttpMethod method, String path, BaseOptions options, RequestOptions requestOptions, CancellationToken cancellationToken) in /_/src/Stripe.net/Services/_base/Service.cs:line 276
   at PaymentService.Checkout(String stripeId, IEnumerable`1 products, String orderId)
   at Application.Services.Implementation.CheckoutService.checkout()
   at API.Controllers.CheckoutController.Checkout() in C:\Users\iTela\Documents\Assignment\sample project structure\ShoppingApp\API\Controllers\CheckoutController.cs:line 26
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)

2024-05-14 14:11:35.333 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/Checkout - 500 null text/plain; charset=utf-8 868.3002ms
2024-05-14 14:11:44.270 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/Cart/getAll-cartItems - null null
2024-05-14 14:11:44.274 +05:30  INF  Executing endpoint 'API.Controllers.CartController.GetAllCartItems (API)'
2024-05-14 14:11:44.281 +05:30  INF  Route matched with {action = "GetAllCartItems", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllCartItems() on controller API.Controllers.CartController (API).
2024-05-14 14:11:44.296 +05:30  INF  Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-05-14 14:11:44.305 +05:30  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.DTOs.Cart.CartItemResponse, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-14 14:11:44.310 +05:30  INF  Executed action API.Controllers.CartController.GetAllCartItems (API) in 25.0958ms
2024-05-14 14:11:44.313 +05:30  INF  Executed endpoint 'API.Controllers.CartController.GetAllCartItems (API)'
2024-05-14 14:11:44.315 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/Cart/getAll-cartItems - 200 null application/json; charset=utf-8 44.9325ms
2024-05-14 14:11:54.522 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/Cart/add-to-cart - application/json 37
2024-05-14 14:11:54.527 +05:30  INF  Executing endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-05-14 14:11:54.538 +05:30  INF  Route matched with {action = "AddToCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToCart(Application.DTOs.Cart.CartItemRequset) on controller API.Controllers.CartController (API).
2024-05-14 14:11:54.561 +05:30  INF  Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450), @__itemId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__userId_0 AND [u].[ProductId] = @__itemId_1
2024-05-14 14:11:54.599 +05:30  INF  Executed DbCommand (28ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserProducts] ([ProductId], [userId], [Quantity])
VALUES (@p0, @p1, @p2);
2024-05-14 14:11:54.607 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-05-14 14:11:54.609 +05:30  INF  Executed action API.Controllers.CartController.AddToCart (API) in 61.1772ms
2024-05-14 14:11:54.611 +05:30  INF  Executed endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-05-14 14:11:54.613 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/Cart/add-to-cart - 200 null text/plain; charset=utf-8 91.2029ms
2024-05-14 14:13:09.398 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/Cart/getAll-cartItems - null null
2024-05-14 14:13:09.409 +05:30  INF  Executing endpoint 'API.Controllers.CartController.GetAllCartItems (API)'
2024-05-14 14:13:09.410 +05:30  INF  Route matched with {action = "GetAllCartItems", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllCartItems() on controller API.Controllers.CartController (API).
2024-05-14 14:13:09.426 +05:30  INF  Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-05-14 14:13:09.432 +05:30  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.DTOs.Cart.CartItemResponse, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-14 14:13:09.436 +05:30  INF  Executed action API.Controllers.CartController.GetAllCartItems (API) in 19.2681ms
2024-05-14 14:13:09.440 +05:30  INF  Executed endpoint 'API.Controllers.CartController.GetAllCartItems (API)'
2024-05-14 14:13:09.442 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/Cart/getAll-cartItems - 200 null application/json; charset=utf-8 44.4872ms
2024-05-14 14:13:23.678 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/Checkout - null 0
2024-05-14 14:13:23.682 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Checkout (API)'
2024-05-14 14:13:23.684 +05:30  INF  Route matched with {action = "Checkout", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Checkout() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:13:23.702 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
FROM [Users] AS [u]
WHERE [u].[UserId] = @__userId_0
2024-05-14 14:13:23.711 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-05-14 14:13:23.756 +05:30  INF  Executed DbCommand (32ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([OrderDate], [PaymentId], [Status], [TotalAmount], [UserId])
OUTPUT INSERTED.[OrderId]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-05-14 14:13:23.771 +05:30  INF  Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderProducts] ([OrderId], [ProductId], [OrderQty], [UnitPrice])
VALUES (@p0, @p1, @p2, @p3);
2024-05-14 14:13:24.769 +05:30  INF  Executed action API.Controllers.CheckoutController.Checkout (API) in 1074.3068ms
2024-05-14 14:13:24.772 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Checkout (API)'
2024-05-14 14:13:24.782 +05:30  ERR  An unhandled exception has occurred while executing the request.Stripe.StripeException: This value must be greater than or equal to 1.
   at Stripe.StripeClient.ProcessResponse[T](StripeResponse response) in /_/src/Stripe.net/Infrastructure/Public/StripeClient.cs:line 153
   at Stripe.StripeClient.RequestAsync[T](HttpMethod method, String path, BaseOptions options, RequestOptions requestOptions, CancellationToken cancellationToken) in /_/src/Stripe.net/Infrastructure/Public/StripeClient.cs:line 115
   at Stripe.Service`1.RequestAsync[T](HttpMethod method, String path, BaseOptions options, RequestOptions requestOptions, CancellationToken cancellationToken) in /_/src/Stripe.net/Services/_base/Service.cs:line 276
   at PaymentService.Checkout(String stripeId, IEnumerable`1 products, String orderId)
   at Application.Services.Implementation.CheckoutService.checkout()
   at API.Controllers.CheckoutController.Checkout() in C:\Users\iTela\Documents\Assignment\sample project structure\ShoppingApp\API\Controllers\CheckoutController.cs:line 26
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)

2024-05-14 14:13:24.823 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/Checkout - 500 null text/plain; charset=utf-8 1144.8397ms
2024-05-14 14:14:12.605 +05:30  INF  Request starting HTTP/2 DELETE https://localhost:7220/Cart/delete-cart-item - application/json 37
2024-05-14 14:14:12.615 +05:30  INF  Executing endpoint 'API.Controllers.CartController.DeleteCartItem (API)'
2024-05-14 14:14:12.620 +05:30  INF  Route matched with {action = "DeleteCartItem", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteCartItem(Application.DTOs.Cart.CartItemRequset) on controller API.Controllers.CartController (API).
2024-05-14 14:14:12.636 +05:30  INF  Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450), @__itemId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__userId_0 AND [u].[ProductId] = @__itemId_1
2024-05-14 14:14:12.649 +05:30  INF  Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [UserProducts]
OUTPUT 1
WHERE [ProductId] = @p0 AND [userId] = @p1;
2024-05-14 14:14:12.655 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-05-14 14:14:12.656 +05:30  INF  Executed action API.Controllers.CartController.DeleteCartItem (API) in 29.4511ms
2024-05-14 14:14:12.661 +05:30  INF  Executed endpoint 'API.Controllers.CartController.DeleteCartItem (API)'
2024-05-14 14:14:12.662 +05:30  INF  Request finished HTTP/2 DELETE https://localhost:7220/Cart/delete-cart-item - 200 null text/plain; charset=utf-8 57.1443ms
2024-05-14 14:14:14.808 +05:30  INF  Request starting HTTP/2 DELETE https://localhost:7220/Cart/delete-cart-item - application/json 37
2024-05-14 14:14:14.813 +05:30  INF  Executing endpoint 'API.Controllers.CartController.DeleteCartItem (API)'
2024-05-14 14:14:14.814 +05:30  INF  Route matched with {action = "DeleteCartItem", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteCartItem(Application.DTOs.Cart.CartItemRequset) on controller API.Controllers.CartController (API).
2024-05-14 14:14:14.827 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450), @__itemId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__userId_0 AND [u].[ProductId] = @__itemId_1
2024-05-14 14:14:14.864 +05:30  INF  Executing BadRequestObjectResult, writing value of type 'System.String'.
2024-05-14 14:14:14.867 +05:30  INF  Executed action API.Controllers.CartController.DeleteCartItem (API) in 46.9001ms
2024-05-14 14:14:14.870 +05:30  INF  Executed endpoint 'API.Controllers.CartController.DeleteCartItem (API)'
2024-05-14 14:14:14.873 +05:30  INF  Request finished HTTP/2 DELETE https://localhost:7220/Cart/delete-cart-item - 400 null text/plain; charset=utf-8 64.7609ms
2024-05-14 14:14:37.057 +05:30  INF  Request starting HTTP/2 DELETE https://localhost:7220/Cart/delete-cart-item - application/json 37
2024-05-14 14:14:37.062 +05:30  INF  Executing endpoint 'API.Controllers.CartController.DeleteCartItem (API)'
2024-05-14 14:14:37.063 +05:30  INF  Route matched with {action = "DeleteCartItem", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteCartItem(Application.DTOs.Cart.CartItemRequset) on controller API.Controllers.CartController (API).
2024-05-14 14:14:37.075 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450), @__itemId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__userId_0 AND [u].[ProductId] = @__itemId_1
2024-05-14 14:14:37.084 +05:30  INF  Executing BadRequestObjectResult, writing value of type 'System.String'.
2024-05-14 14:14:37.085 +05:30  INF  Executed action API.Controllers.CartController.DeleteCartItem (API) in 18.1577ms
2024-05-14 14:14:37.087 +05:30  INF  Executed endpoint 'API.Controllers.CartController.DeleteCartItem (API)'
2024-05-14 14:14:37.089 +05:30  INF  Request finished HTTP/2 DELETE https://localhost:7220/Cart/delete-cart-item - 400 null text/plain; charset=utf-8 32.3461ms
2024-05-14 14:14:45.370 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/Cart/getAll-cartItems - null null
2024-05-14 14:14:45.374 +05:30  INF  Executing endpoint 'API.Controllers.CartController.GetAllCartItems (API)'
2024-05-14 14:14:45.376 +05:30  INF  Route matched with {action = "GetAllCartItems", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllCartItems() on controller API.Controllers.CartController (API).
2024-05-14 14:14:45.390 +05:30  INF  Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-05-14 14:14:45.401 +05:30  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.DTOs.Cart.CartItemResponse, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-14 14:14:45.403 +05:30  INF  Executed action API.Controllers.CartController.GetAllCartItems (API) in 21.4834ms
2024-05-14 14:14:45.406 +05:30  INF  Executed endpoint 'API.Controllers.CartController.GetAllCartItems (API)'
2024-05-14 14:14:45.411 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/Cart/getAll-cartItems - 200 null application/json; charset=utf-8 40.6892ms
2024-05-14 14:14:53.990 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/Cart/add-to-cart - application/json 38
2024-05-14 14:14:53.994 +05:30  INF  Executing endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-05-14 14:14:53.996 +05:30  INF  Route matched with {action = "AddToCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToCart(Application.DTOs.Cart.CartItemRequset) on controller API.Controllers.CartController (API).
2024-05-14 14:14:54.008 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450), @__itemId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__userId_0 AND [u].[ProductId] = @__itemId_1
2024-05-14 14:14:54.031 +05:30  INF  Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserProducts] ([ProductId], [userId], [Quantity])
VALUES (@p0, @p1, @p2);
2024-05-14 14:14:54.040 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-05-14 14:14:54.042 +05:30  INF  Executed action API.Controllers.CartController.AddToCart (API) in 41.4436ms
2024-05-14 14:14:54.044 +05:30  INF  Executed endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-05-14 14:14:54.050 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/Cart/add-to-cart - 200 null text/plain; charset=utf-8 60.6594ms
2024-05-14 14:15:14.350 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/Checkout - null 0
2024-05-14 14:15:14.354 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Checkout (API)'
2024-05-14 14:15:14.356 +05:30  INF  Route matched with {action = "Checkout", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Checkout() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:15:14.370 +05:30  INF  Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
FROM [Users] AS [u]
WHERE [u].[UserId] = @__userId_0
2024-05-14 14:15:14.385 +05:30  INF  Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-05-14 14:15:14.448 +05:30  INF  Executed DbCommand (49ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([OrderDate], [PaymentId], [Status], [TotalAmount], [UserId])
OUTPUT INSERTED.[OrderId]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-05-14 14:15:14.464 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderProducts] ([OrderId], [ProductId], [OrderQty], [UnitPrice])
VALUES (@p0, @p1, @p2, @p3);
2024-05-14 14:15:15.326 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-05-14 14:15:15.328 +05:30  INF  Executed action API.Controllers.CheckoutController.Checkout (API) in 966.3096ms
2024-05-14 14:15:15.330 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Checkout (API)'
2024-05-14 14:15:15.335 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/Checkout - 200 null text/plain; charset=utf-8 985.6486ms
2024-05-14 14:15:46.453 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 3541
2024-05-14 14:15:46.473 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:15:46.478 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 1962
2024-05-14 14:15:46.478 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:15:46.487 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:15:46.494 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 14:15:46.495 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:15:46.496 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 3.1381ms
2024-05-14 14:15:46.504 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 14:15:46.505 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:15:46.507 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 3.7339ms
2024-05-14 14:15:46.509 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 56.6465ms
2024-05-14 14:15:46.511 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:15:46.523 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 46.0171ms
2024-05-14 14:15:46.630 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 3257
2024-05-14 14:15:46.633 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:15:46.635 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:15:51.418 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 1919
2024-05-14 14:15:51.426 +05:30  INF  Executed DbCommand (4ms) [Parameters=[@__paymentResponse_OrderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[OrderId], [o].[OrderDate], [o].[PaymentId], [o].[Status], [o].[TotalAmount], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[OrderId] = @__paymentResponse_OrderId_0
2024-05-14 14:15:51.427 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 3766
2024-05-14 14:15:51.427 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:15:59.017 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:15:59.019 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:15:59.023 +05:30  INF  Executed DbCommand (13ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Orders] SET [OrderDate] = @p0, [PaymentId] = @p1, [Status] = @p2, [TotalAmount] = @p3, [UserId] = @p4
OUTPUT 1
WHERE [OrderId] = @p5;
2024-05-14 14:15:59.024 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:15:59.034 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 14:16:06.499 +05:30  INF  Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE 0 = 1
2024-05-14 14:16:06.501 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 14:16:06.502 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 7468.9978ms
2024-05-14 14:19:22.394 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 195894.2634ms
2024-05-14 14:19:22.412 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:19:22.426 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:19:22.411 +05:30  INF  Executed DbCommand (14ms) [Parameters=[@__UserId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__UserId_0
2024-05-14 14:19:22.444 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 211016.9656ms
2024-05-14 14:19:22.446 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 211028.4841ms
2024-05-14 14:19:22.506 +05:30  INF  Executed DbCommand (47ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [UserProducts]
OUTPUT 1
WHERE [ProductId] = @p0 AND [userId] = @p1;
2024-05-14 14:19:22.525 +05:30  INF  Executed DbCommand (8ms) [Parameters=[@__orderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[OrderId], [t].[OrderDate], [t].[PaymentId], [t].[Status], [t].[TotalAmount], [t].[UserId], [t].[UserId0], [t].[Email], [t].[FirstName], [t].[LastName], [t].[PhoneNumber], [t].[StripeId], [t0].[OrderId], [t0].[ProductId], [t0].[OrderQty], [t0].[UnitPrice], [t0].[ProductId0], [t0].[Description], [t0].[Discount], [t0].[ImageUrl], [t0].[Name], [t0].[Price], [t0].[ProductCategoryId], [t0].[Quantity]
FROM (
    SELECT TOP(1) [o].[OrderId], [o].[OrderDate], [o].[PaymentId], [o].[Status], [o].[TotalAmount], [o].[UserId], [u].[UserId] AS [UserId0], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
    FROM [Orders] AS [o]
    INNER JOIN [Users] AS [u] ON [o].[UserId] = [u].[UserId]
    WHERE [o].[OrderId] = @__orderId_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[OrderId], [o0].[ProductId], [o0].[OrderQty], [o0].[UnitPrice], [p].[ProductId] AS [ProductId0], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
    FROM [OrderProducts] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[ProductId]
) AS [t0] ON [t].[OrderId] = [t0].[OrderId]
ORDER BY [t].[OrderId], [t].[UserId0], [t0].[OrderId], [t0].[ProductId]
2024-05-14 14:19:23.448 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 14:19:23.451 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 216812.345ms
2024-05-14 14:19:23.452 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:19:23.454 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 499 null application/json; charset=utf-8 216824.0881ms
2024-05-14 14:19:38.897 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/Cart/getAll-cartItems - null null
2024-05-14 14:19:38.901 +05:30  INF  Executing endpoint 'API.Controllers.CartController.GetAllCartItems (API)'
2024-05-14 14:19:38.903 +05:30  INF  Route matched with {action = "GetAllCartItems", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllCartItems() on controller API.Controllers.CartController (API).
2024-05-14 14:19:38.920 +05:30  INF  Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-05-14 14:19:38.930 +05:30  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.DTOs.Cart.CartItemResponse, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-14 14:19:38.932 +05:30  INF  Executed action API.Controllers.CartController.GetAllCartItems (API) in 21.0088ms
2024-05-14 14:19:38.940 +05:30  INF  Executed endpoint 'API.Controllers.CartController.GetAllCartItems (API)'
2024-05-14 14:19:38.942 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/Cart/getAll-cartItems - 200 null application/json; charset=utf-8 44.8114ms
2024-05-14 14:19:44.343 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/Cart/add-to-cart - application/json 38
2024-05-14 14:19:44.347 +05:30  INF  Executing endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-05-14 14:19:44.349 +05:30  INF  Route matched with {action = "AddToCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToCart(Application.DTOs.Cart.CartItemRequset) on controller API.Controllers.CartController (API).
2024-05-14 14:19:44.365 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450), @__itemId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__userId_0 AND [u].[ProductId] = @__itemId_1
2024-05-14 14:19:44.417 +05:30  INF  Executed DbCommand (37ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserProducts] ([ProductId], [userId], [Quantity])
VALUES (@p0, @p1, @p2);
2024-05-14 14:19:44.425 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-05-14 14:19:44.426 +05:30  INF  Executed action API.Controllers.CartController.AddToCart (API) in 71.7232ms
2024-05-14 14:19:44.429 +05:30  INF  Executed endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-05-14 14:19:44.435 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/Cart/add-to-cart - 200 null text/plain; charset=utf-8 92.6527ms
2024-05-14 14:19:50.697 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/Cart/getAll-cartItems - null null
2024-05-14 14:19:50.701 +05:30  INF  Executing endpoint 'API.Controllers.CartController.GetAllCartItems (API)'
2024-05-14 14:19:50.703 +05:30  INF  Route matched with {action = "GetAllCartItems", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllCartItems() on controller API.Controllers.CartController (API).
2024-05-14 14:19:50.715 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-05-14 14:19:50.729 +05:30  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.DTOs.Cart.CartItemResponse, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-14 14:19:50.731 +05:30  INF  Executed action API.Controllers.CartController.GetAllCartItems (API) in 23.175ms
2024-05-14 14:19:50.735 +05:30  INF  Executed endpoint 'API.Controllers.CartController.GetAllCartItems (API)'
2024-05-14 14:19:50.737 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/Cart/getAll-cartItems - 200 null application/json; charset=utf-8 39.8773ms
2024-05-14 14:19:57.083 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/Checkout - null 0
2024-05-14 14:19:57.089 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Checkout (API)'
2024-05-14 14:19:57.100 +05:30  INF  Route matched with {action = "Checkout", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Checkout() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:19:57.118 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
FROM [Users] AS [u]
WHERE [u].[UserId] = @__userId_0
2024-05-14 14:19:57.129 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-05-14 14:19:57.186 +05:30  INF  Executed DbCommand (43ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([OrderDate], [PaymentId], [Status], [TotalAmount], [UserId])
OUTPUT INSERTED.[OrderId]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-05-14 14:19:57.201 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderProducts] ([OrderId], [ProductId], [OrderQty], [UnitPrice])
VALUES (@p0, @p1, @p2, @p3);
2024-05-14 14:19:58.083 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-05-14 14:19:58.089 +05:30  INF  Executed action API.Controllers.CheckoutController.Checkout (API) in 978.2399ms
2024-05-14 14:19:58.095 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Checkout (API)'
2024-05-14 14:19:58.099 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/Checkout - 200 null text/plain; charset=utf-8 1015.4554ms
2024-05-14 14:20:19.535 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 3541
2024-05-14 14:20:19.540 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:20:19.541 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:20:19.546 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 14:20:19.547 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 2.1447ms
2024-05-14 14:20:19.551 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:20:19.555 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 19.414ms
2024-05-14 14:20:19.572 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 1962
2024-05-14 14:20:19.574 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:20:19.576 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:20:19.583 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 14:20:19.588 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 5.8ms
2024-05-14 14:20:19.590 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:20:19.591 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 19.3523ms
2024-05-14 14:20:19.635 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 1919
2024-05-14 14:20:19.638 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:20:19.639 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:20:19.644 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 14:20:19.646 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 2.545ms
2024-05-14 14:20:19.648 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:20:19.650 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 14.8975ms
2024-05-14 14:20:19.909 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 3257
2024-05-14 14:20:19.916 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:20:19.922 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:20:19.937 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@__paymentResponse_OrderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[OrderId], [o].[OrderDate], [o].[PaymentId], [o].[Status], [o].[TotalAmount], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[OrderId] = @__paymentResponse_OrderId_0
2024-05-14 14:20:19.975 +05:30  INF  Executed DbCommand (25ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Orders] SET [OrderDate] = @p0, [PaymentId] = @p1, [Status] = @p2, [TotalAmount] = @p3, [UserId] = @p4
OUTPUT 1
WHERE [OrderId] = @p5;
2024-05-14 14:20:19.987 +05:30  INF  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE 0 = 1
2024-05-14 14:20:27.919 +05:30  INF  Executed DbCommand (8ms) [Parameters=[@__UserId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__UserId_0
2024-05-14 14:20:27.924 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 3766
2024-05-14 14:20:27.934 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:20:27.936 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:20:27.943 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 14:20:27.948 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 6.256ms
2024-05-14 14:20:27.951 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:20:27.954 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 30.2418ms
2024-05-14 14:20:27.967 +05:30  INF  Executed DbCommand (36ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [UserProducts]
OUTPUT 1
WHERE [ProductId] = @p0 AND [userId] = @p1;
2024-05-14 14:20:27.987 +05:30  INF  Executed DbCommand (11ms) [Parameters=[@__orderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[OrderId], [t].[OrderDate], [t].[PaymentId], [t].[Status], [t].[TotalAmount], [t].[UserId], [t].[UserId0], [t].[Email], [t].[FirstName], [t].[LastName], [t].[PhoneNumber], [t].[StripeId], [t0].[OrderId], [t0].[ProductId], [t0].[OrderQty], [t0].[UnitPrice], [t0].[ProductId0], [t0].[Description], [t0].[Discount], [t0].[ImageUrl], [t0].[Name], [t0].[Price], [t0].[ProductCategoryId], [t0].[Quantity]
FROM (
    SELECT TOP(1) [o].[OrderId], [o].[OrderDate], [o].[PaymentId], [o].[Status], [o].[TotalAmount], [o].[UserId], [u].[UserId] AS [UserId0], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
    FROM [Orders] AS [o]
    INNER JOIN [Users] AS [u] ON [o].[UserId] = [u].[UserId]
    WHERE [o].[OrderId] = @__orderId_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[OrderId], [o0].[ProductId], [o0].[OrderQty], [o0].[UnitPrice], [p].[ProductId] AS [ProductId0], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
    FROM [OrderProducts] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[ProductId]
) AS [t0] ON [t].[OrderId] = [t0].[OrderId]
ORDER BY [t].[OrderId], [t].[UserId0], [t0].[OrderId], [t0].[ProductId]
2024-05-14 14:20:28.536 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 14:20:28.541 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 8612.035ms
2024-05-14 14:20:28.546 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:20:28.550 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 8641.1665ms
2024-05-14 14:20:48.214 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/Product/all-products - null null
2024-05-14 14:20:48.225 +05:30  INF  Executing endpoint 'API.Controllers.ProductController.GetProducts (API)'
2024-05-14 14:20:48.233 +05:30  INF  Route matched with {action = "GetProducts", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[Application.DTOs.Product.ProductResponse]] GetProducts() on controller API.Controllers.ProductController (API).
2024-05-14 14:20:48.278 +05:30  INF  Executed DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity], [p0].[CategoryId], [p0].[CategoryIcon], [p0].[CategoryName]
FROM [Products] AS [p]
INNER JOIN [ProductCategories] AS [p0] ON [p].[ProductCategoryId] = [p0].[CategoryId]
2024-05-14 14:20:48.286 +05:30  INF  Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.DTOs.Product.ProductResponse, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-14 14:20:48.294 +05:30  INF  Executed action API.Controllers.ProductController.GetProducts (API) in 54.2802ms
2024-05-14 14:20:48.298 +05:30  INF  Executed endpoint 'API.Controllers.ProductController.GetProducts (API)'
2024-05-14 14:20:48.300 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/Product/all-products - 200 null application/json; charset=utf-8 86.2148ms
2024-05-14 14:21:23.224 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/Cart/add-to-cart - application/json 38
2024-05-14 14:21:23.235 +05:30  INF  Executing endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-05-14 14:21:23.237 +05:30  INF  Route matched with {action = "AddToCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToCart(Application.DTOs.Cart.CartItemRequset) on controller API.Controllers.CartController (API).
2024-05-14 14:21:23.252 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450), @__itemId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__userId_0 AND [u].[ProductId] = @__itemId_1
2024-05-14 14:21:23.302 +05:30  INF  Executed DbCommand (37ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserProducts] ([ProductId], [userId], [Quantity])
VALUES (@p0, @p1, @p2);
2024-05-14 14:21:23.311 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-05-14 14:21:23.312 +05:30  INF  Executed action API.Controllers.CartController.AddToCart (API) in 67.8851ms
2024-05-14 14:21:23.315 +05:30  INF  Executed endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-05-14 14:21:23.319 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/Cart/add-to-cart - 200 null text/plain; charset=utf-8 95.8406ms
2024-05-14 14:21:30.142 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/Checkout - null 0
2024-05-14 14:21:30.146 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Checkout (API)'
2024-05-14 14:21:30.147 +05:30  INF  Route matched with {action = "Checkout", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Checkout() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:21:30.158 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
FROM [Users] AS [u]
WHERE [u].[UserId] = @__userId_0
2024-05-14 14:21:30.170 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-05-14 14:21:30.182 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([OrderDate], [PaymentId], [Status], [TotalAmount], [UserId])
OUTPUT INSERTED.[OrderId]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-05-14 14:21:30.195 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderProducts] ([OrderId], [ProductId], [OrderQty], [UnitPrice])
VALUES (@p0, @p1, @p2, @p3);
2024-05-14 14:21:31.088 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-05-14 14:21:31.090 +05:30  INF  Executed action API.Controllers.CheckoutController.Checkout (API) in 937.7638ms
2024-05-14 14:21:31.093 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Checkout (API)'
2024-05-14 14:21:31.096 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/Checkout - 200 null text/plain; charset=utf-8 954.4637ms
2024-05-14 14:21:58.344 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 3541
2024-05-14 14:21:58.350 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:21:58.352 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:21:58.357 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 14:21:58.359 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 2.7531ms
2024-05-14 14:21:58.361 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:21:58.363 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 18.7828ms
2024-05-14 14:21:58.414 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 1962
2024-05-14 14:21:58.423 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:21:58.429 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:21:58.439 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 14:21:58.440 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 2.313ms
2024-05-14 14:21:58.443 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:21:58.445 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 30.8915ms
2024-05-14 14:21:58.486 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 1919
2024-05-14 14:21:58.490 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:21:58.492 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:21:58.496 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 14:21:58.498 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 2.183ms
2024-05-14 14:21:58.499 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:21:58.505 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 18.8714ms
2024-05-14 14:21:59.003 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 3257
2024-05-14 14:21:59.011 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:21:59.014 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:21:59.030 +05:30  INF  Executed DbCommand (5ms) [Parameters=[@__paymentResponse_OrderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[OrderId], [o].[OrderDate], [o].[PaymentId], [o].[Status], [o].[TotalAmount], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[OrderId] = @__paymentResponse_OrderId_0
2024-05-14 14:21:59.047 +05:30  INF  Executed DbCommand (5ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Orders] SET [OrderDate] = @p0, [PaymentId] = @p1, [Status] = @p2, [TotalAmount] = @p3, [UserId] = @p4
OUTPUT 1
WHERE [OrderId] = @p5;
2024-05-14 14:21:59.058 +05:30  INF  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE 0 = 1
2024-05-14 14:22:01.750 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 3766
2024-05-14 14:23:26.400 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__UserId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__UserId_0
2024-05-14 14:23:26.403 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:23:26.409 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:23:26.414 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [UserProducts]
OUTPUT 1
WHERE [ProductId] = @p0 AND [userId] = @p1;
2024-05-14 14:23:26.420 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 14:23:26.427 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 7.7455ms
2024-05-14 14:23:26.432 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:23:26.436 +05:30  INF  Executed DbCommand (8ms) [Parameters=[@__orderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[OrderId], [t].[OrderDate], [t].[PaymentId], [t].[Status], [t].[TotalAmount], [t].[UserId], [t].[UserId0], [t].[Email], [t].[FirstName], [t].[LastName], [t].[PhoneNumber], [t].[StripeId], [t0].[OrderId], [t0].[ProductId], [t0].[OrderQty], [t0].[UnitPrice], [t0].[ProductId0], [t0].[Description], [t0].[Discount], [t0].[ImageUrl], [t0].[Name], [t0].[Price], [t0].[ProductCategoryId], [t0].[Quantity]
FROM (
    SELECT TOP(1) [o].[OrderId], [o].[OrderDate], [o].[PaymentId], [o].[Status], [o].[TotalAmount], [o].[UserId], [u].[UserId] AS [UserId0], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
    FROM [Orders] AS [o]
    INNER JOIN [Users] AS [u] ON [o].[UserId] = [u].[UserId]
    WHERE [o].[OrderId] = @__orderId_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[OrderId], [o0].[ProductId], [o0].[OrderQty], [o0].[UnitPrice], [p].[ProductId] AS [ProductId0], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
    FROM [OrderProducts] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[ProductId]
) AS [t0] ON [t].[OrderId] = [t0].[OrderId]
ORDER BY [t].[OrderId], [t].[UserId0], [t0].[OrderId], [t0].[ProductId]
2024-05-14 14:23:26.439 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 499 null application/json; charset=utf-8 84688.8801ms
2024-05-14 14:23:26.955 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 14:23:26.969 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 87949.4982ms
2024-05-14 14:23:26.975 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:23:26.980 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 499 null application/json; charset=utf-8 87977.1633ms
2024-05-14 14:23:50.993 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/Cart/add-to-cart - application/json 38
2024-05-14 14:23:51.002 +05:30  INF  Executing endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-05-14 14:23:51.003 +05:30  INF  Route matched with {action = "AddToCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToCart(Application.DTOs.Cart.CartItemRequset) on controller API.Controllers.CartController (API).
2024-05-14 14:23:51.016 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450), @__itemId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__userId_0 AND [u].[ProductId] = @__itemId_1
2024-05-14 14:23:51.051 +05:30  INF  Executed DbCommand (25ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserProducts] ([ProductId], [userId], [Quantity])
VALUES (@p0, @p1, @p2);
2024-05-14 14:23:51.058 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-05-14 14:23:51.061 +05:30  INF  Executed action API.Controllers.CartController.AddToCart (API) in 51.9895ms
2024-05-14 14:23:51.069 +05:30  INF  Executed endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-05-14 14:23:51.072 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/Cart/add-to-cart - 200 null text/plain; charset=utf-8 79.4583ms
2024-05-14 14:23:58.252 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/Checkout - null 0
2024-05-14 14:23:58.256 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Checkout (API)'
2024-05-14 14:23:58.257 +05:30  INF  Route matched with {action = "Checkout", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Checkout() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:23:58.273 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
FROM [Users] AS [u]
WHERE [u].[UserId] = @__userId_0
2024-05-14 14:23:58.290 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-05-14 14:23:58.346 +05:30  INF  Executed DbCommand (42ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([OrderDate], [PaymentId], [Status], [TotalAmount], [UserId])
OUTPUT INSERTED.[OrderId]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-05-14 14:23:58.360 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderProducts] ([OrderId], [ProductId], [OrderQty], [UnitPrice])
VALUES (@p0, @p1, @p2, @p3);
2024-05-14 14:23:59.333 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-05-14 14:23:59.335 +05:30  INF  Executed action API.Controllers.CheckoutController.Checkout (API) in 1072.5419ms
2024-05-14 14:23:59.342 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Checkout (API)'
2024-05-14 14:23:59.344 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/Checkout - 200 null text/plain; charset=utf-8 1092.9558ms
2024-05-14 14:24:31.849 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 3514
2024-05-14 14:24:31.866 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:24:31.868 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 1962
2024-05-14 14:24:31.869 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:24:31.872 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:24:31.877 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 14:24:31.878 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:24:31.882 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 5.5239ms
2024-05-14 14:24:31.887 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 14:24:31.888 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:24:31.890 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 3.6365ms
2024-05-14 14:24:31.892 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 43.296ms
2024-05-14 14:24:31.897 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:24:31.903 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 34.5828ms
2024-05-14 14:24:31.994 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 1919
2024-05-14 14:24:31.997 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:24:31.999 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:24:32.003 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 14:24:32.006 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 3.529ms
2024-05-14 14:24:32.008 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:24:32.011 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 17.4531ms
2024-05-14 14:24:32.374 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 3257
2024-05-14 14:24:32.379 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:24:32.381 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:24:32.393 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@__paymentResponse_OrderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[OrderId], [o].[OrderDate], [o].[PaymentId], [o].[Status], [o].[TotalAmount], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[OrderId] = @__paymentResponse_OrderId_0
2024-05-14 14:24:32.448 +05:30  INF  Executed DbCommand (44ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Orders] SET [OrderDate] = @p0, [PaymentId] = @p1, [Status] = @p2, [TotalAmount] = @p3, [UserId] = @p4
OUTPUT 1
WHERE [OrderId] = @p5;
2024-05-14 14:24:32.460 +05:30  INF  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE 0 = 1
2024-05-14 14:24:35.332 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 3739
2024-05-14 14:24:35.338 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@__UserId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__UserId_0
2024-05-14 14:24:35.341 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:24:35.353 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:24:35.359 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 14:24:35.363 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 5.5204ms
2024-05-14 14:24:35.365 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:24:35.368 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 35.9913ms
2024-05-14 14:24:35.393 +05:30  INF  Executed DbCommand (39ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [UserProducts]
OUTPUT 1
WHERE [ProductId] = @p0 AND [userId] = @p1;
2024-05-14 14:24:35.415 +05:30  INF  Executed DbCommand (10ms) [Parameters=[@__orderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[OrderId], [t].[OrderDate], [t].[PaymentId], [t].[Status], [t].[TotalAmount], [t].[UserId], [t].[UserId0], [t].[Email], [t].[FirstName], [t].[LastName], [t].[PhoneNumber], [t].[StripeId], [t0].[OrderId], [t0].[ProductId], [t0].[OrderQty], [t0].[UnitPrice], [t0].[ProductId0], [t0].[Description], [t0].[Discount], [t0].[ImageUrl], [t0].[Name], [t0].[Price], [t0].[ProductCategoryId], [t0].[Quantity]
FROM (
    SELECT TOP(1) [o].[OrderId], [o].[OrderDate], [o].[PaymentId], [o].[Status], [o].[TotalAmount], [o].[UserId], [u].[UserId] AS [UserId0], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
    FROM [Orders] AS [o]
    INNER JOIN [Users] AS [u] ON [o].[UserId] = [u].[UserId]
    WHERE [o].[OrderId] = @__orderId_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[OrderId], [o0].[ProductId], [o0].[OrderQty], [o0].[UnitPrice], [p].[ProductId] AS [ProductId0], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
    FROM [OrderProducts] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[ProductId]
) AS [t0] ON [t].[OrderId] = [t0].[OrderId]
ORDER BY [t].[OrderId], [t].[UserId0], [t0].[OrderId], [t0].[ProductId]
2024-05-14 14:24:35.653 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 14:24:35.657 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 3272.5888ms
2024-05-14 14:24:35.661 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:24:35.664 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 3290.843ms
2024-05-14 14:25:11.989 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/Cart/add-to-cart - application/json 38
2024-05-14 14:25:11.993 +05:30  INF  Executing endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-05-14 14:25:11.994 +05:30  INF  Route matched with {action = "AddToCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToCart(Application.DTOs.Cart.CartItemRequset) on controller API.Controllers.CartController (API).
2024-05-14 14:25:12.005 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450), @__itemId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__userId_0 AND [u].[ProductId] = @__itemId_1
2024-05-14 14:25:12.021 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserProducts] ([ProductId], [userId], [Quantity])
VALUES (@p0, @p1, @p2);
2024-05-14 14:25:12.030 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-05-14 14:25:12.031 +05:30  INF  Executed action API.Controllers.CartController.AddToCart (API) in 34.1205ms
2024-05-14 14:25:12.033 +05:30  INF  Executed endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-05-14 14:25:12.035 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/Cart/add-to-cart - 200 null text/plain; charset=utf-8 46.3354ms
2024-05-14 14:25:19.310 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/Checkout - null 0
2024-05-14 14:25:19.314 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Checkout (API)'
2024-05-14 14:25:19.315 +05:30  INF  Route matched with {action = "Checkout", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Checkout() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:25:19.328 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
FROM [Users] AS [u]
WHERE [u].[UserId] = @__userId_0
2024-05-14 14:25:19.343 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-05-14 14:25:19.384 +05:30  INF  Executed DbCommand (27ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([OrderDate], [PaymentId], [Status], [TotalAmount], [UserId])
OUTPUT INSERTED.[OrderId]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-05-14 14:25:19.401 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderProducts] ([OrderId], [ProductId], [OrderQty], [UnitPrice])
VALUES (@p0, @p1, @p2, @p3);
2024-05-14 14:25:20.393 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-05-14 14:25:20.397 +05:30  INF  Executed action API.Controllers.CheckoutController.Checkout (API) in 1075.6905ms
2024-05-14 14:25:20.400 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Checkout (API)'
2024-05-14 14:25:20.405 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/Checkout - 200 null text/plain; charset=utf-8 1094.4587ms
2024-05-14 14:25:43.596 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 3509
2024-05-14 14:25:43.603 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:25:43.606 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:25:43.618 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 14:25:43.621 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 3.9172ms
2024-05-14 14:25:43.623 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:25:43.626 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 30.5139ms
2024-05-14 14:25:43.634 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 1962
2024-05-14 14:25:43.637 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:25:43.639 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:25:43.647 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 14:25:43.649 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 2.0476ms
2024-05-14 14:25:43.651 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:25:43.653 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 18.4172ms
2024-05-14 14:25:43.712 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 1919
2024-05-14 14:25:43.715 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:25:43.719 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:25:43.723 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 14:25:43.725 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 1.9764ms
2024-05-14 14:25:43.726 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:25:43.728 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 16.1384ms
2024-05-14 14:25:44.236 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 3257
2024-05-14 14:25:44.241 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:25:44.243 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:25:44.260 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@__paymentResponse_OrderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[OrderId], [o].[OrderDate], [o].[PaymentId], [o].[Status], [o].[TotalAmount], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[OrderId] = @__paymentResponse_OrderId_0
2024-05-14 14:25:44.275 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Orders] SET [OrderDate] = @p0, [PaymentId] = @p1, [Status] = @p2, [TotalAmount] = @p3, [UserId] = @p4
OUTPUT 1
WHERE [OrderId] = @p5;
2024-05-14 14:25:44.289 +05:30  INF  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE 0 = 1
2024-05-14 14:26:08.678 +05:30  INF  Executed DbCommand (9ms) [Parameters=[@__UserId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__UserId_0
2024-05-14 14:26:08.681 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 3734
2024-05-14 14:26:08.699 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:26:08.701 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:26:08.707 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 14:26:08.711 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 4.209ms
2024-05-14 14:26:08.713 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:26:08.714 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 33.6135ms
2024-05-14 14:26:08.736 +05:30  INF  Executed DbCommand (39ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [UserProducts]
OUTPUT 1
WHERE [ProductId] = @p0 AND [userId] = @p1;
2024-05-14 14:26:08.754 +05:30  INF  Executed DbCommand (8ms) [Parameters=[@__orderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[OrderId], [t].[OrderDate], [t].[PaymentId], [t].[Status], [t].[TotalAmount], [t].[UserId], [t].[UserId0], [t].[Email], [t].[FirstName], [t].[LastName], [t].[PhoneNumber], [t].[StripeId], [t0].[OrderId], [t0].[ProductId], [t0].[OrderQty], [t0].[UnitPrice], [t0].[ProductId0], [t0].[Description], [t0].[Discount], [t0].[ImageUrl], [t0].[Name], [t0].[Price], [t0].[ProductCategoryId], [t0].[Quantity]
FROM (
    SELECT TOP(1) [o].[OrderId], [o].[OrderDate], [o].[PaymentId], [o].[Status], [o].[TotalAmount], [o].[UserId], [u].[UserId] AS [UserId0], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
    FROM [Orders] AS [o]
    INNER JOIN [Users] AS [u] ON [o].[UserId] = [u].[UserId]
    WHERE [o].[OrderId] = @__orderId_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[OrderId], [o0].[ProductId], [o0].[OrderQty], [o0].[UnitPrice], [p].[ProductId] AS [ProductId0], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
    FROM [OrderProducts] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[ProductId]
) AS [t0] ON [t].[OrderId] = [t0].[OrderId]
ORDER BY [t].[OrderId], [t].[UserId0], [t0].[OrderId], [t0].[ProductId]
2024-05-14 14:26:09.286 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 14:26:09.291 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 25037.1937ms
2024-05-14 14:26:09.293 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:26:09.297 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 25060.7822ms
2024-05-14 14:26:33.587 +05:30  INF  User profile is available. Using 'C:\Users\iTela\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-14 14:26:33.889 +05:30  INF  Now listening on: https://localhost:7220
2024-05-14 14:26:33.894 +05:30  INF  Now listening on: http://localhost:5016
2024-05-14 14:26:33.902 +05:30  INF  Application started. Press Ctrl+C to shut down.
2024-05-14 14:26:33.906 +05:30  INF  Hosting environment: Development
2024-05-14 14:26:33.912 +05:30  INF  Content root path: C:\Users\iTela\Documents\Assignment\sample project structure\ShoppingApp\API
2024-05-14 14:26:37.308 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/index.html - null null
2024-05-14 14:26:37.601 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/index.html - 200 null text/html;charset=utf-8 301.5723ms
2024-05-14 14:26:37.610 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - null null
2024-05-14 14:26:37.610 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_vs/browserLink - null null
2024-05-14 14:26:37.620 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 10.1616ms
2024-05-14 14:26:37.713 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_vs/browserLink - 200 null text/javascript; charset=UTF-8 102.8083ms
2024-05-14 14:26:37.773 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - null null
2024-05-14 14:26:37.933 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 160.8353ms
2024-05-14 14:26:52.447 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/Cart/add-to-cart - application/json 37
2024-05-14 14:26:52.540 +05:30  INF  Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-05-14 14:26:52.547 +05:30  INF  AuthenticationScheme: Bearer was challenged.
2024-05-14 14:26:52.549 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/Cart/add-to-cart - 401 0 null 102.0975ms
2024-05-14 14:27:24.304 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/Cart/add-to-cart - application/json 37
2024-05-14 14:27:25.397 +05:30  INF  Executing endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-05-14 14:27:25.426 +05:30  INF  Route matched with {action = "AddToCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToCart(Application.DTOs.Cart.CartItemRequset) on controller API.Controllers.CartController (API).
2024-05-14 14:27:28.007 +05:30  INF  Executed DbCommand (51ms) [Parameters=[@__userId_0='?' (Size = 450), @__itemId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__userId_0 AND [u].[ProductId] = @__itemId_1
2024-05-14 14:27:28.192 +05:30  INF  Executed DbCommand (12ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserProducts] ([ProductId], [userId], [Quantity])
VALUES (@p0, @p1, @p2);
2024-05-14 14:27:28.219 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-05-14 14:27:28.226 +05:30  INF  Executed action API.Controllers.CartController.AddToCart (API) in 2788.7939ms
2024-05-14 14:27:28.228 +05:30  INF  Executed endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-05-14 14:27:28.239 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/Cart/add-to-cart - 200 null text/plain; charset=utf-8 3935.9438ms
2024-05-14 14:27:34.156 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/Checkout - null 0
2024-05-14 14:27:34.164 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Checkout (API)'
2024-05-14 14:27:34.170 +05:30  INF  Route matched with {action = "Checkout", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Checkout() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:27:34.247 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
FROM [Users] AS [u]
WHERE [u].[UserId] = @__userId_0
2024-05-14 14:27:34.334 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-05-14 14:27:34.447 +05:30  INF  Executed DbCommand (45ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([OrderDate], [PaymentId], [Status], [TotalAmount], [UserId])
OUTPUT INSERTED.[OrderId]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-05-14 14:27:34.498 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderProducts] ([OrderId], [ProductId], [OrderQty], [UnitPrice])
VALUES (@p0, @p1, @p2, @p3);
2024-05-14 14:27:35.691 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-05-14 14:27:35.694 +05:30  INF  Executed action API.Controllers.CheckoutController.Checkout (API) in 1514.0954ms
2024-05-14 14:27:35.697 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Checkout (API)'
2024-05-14 14:27:35.700 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/Checkout - 200 null text/plain; charset=utf-8 1543.3073ms
2024-05-14 14:28:02.064 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 3510
2024-05-14 14:28:02.067 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:28:02.072 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:28:02.092 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 1962
2024-05-14 14:28:02.096 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:28:02.098 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:28:02.161 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 1919
2024-05-14 14:28:02.164 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:28:02.166 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:28:02.185 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 14:28:02.185 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 14:28:02.196 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 94.9247ms
2024-05-14 14:28:02.196 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 23.5001ms
2024-05-14 14:28:02.196 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 14:28:02.198 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:28:02.200 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:28:02.202 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 126.6405ms
2024-05-14 14:28:02.206 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 113.9732ms
2024-05-14 14:28:02.208 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 47.5806ms
2024-05-14 14:28:02.211 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:28:02.226 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 162.6812ms
2024-05-14 14:28:02.413 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 3257
2024-05-14 14:28:02.416 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:28:02.418 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:28:02.441 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__paymentResponse_OrderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[OrderId], [o].[OrderDate], [o].[PaymentId], [o].[Status], [o].[TotalAmount], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[OrderId] = @__paymentResponse_OrderId_0
2024-05-14 14:28:02.499 +05:30  INF  Executed DbCommand (43ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Orders] SET [OrderDate] = @p0, [PaymentId] = @p1, [Status] = @p2, [TotalAmount] = @p3, [UserId] = @p4
OUTPUT 1
WHERE [OrderId] = @p5;
2024-05-14 14:28:02.521 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__id_0
2024-05-14 14:28:09.639 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 3735
2024-05-14 14:28:13.545 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:28:13.547 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:28:13.557 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 14:28:13.560 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 8.2108ms
2024-05-14 14:28:13.565 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:28:13.567 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 3927.9885ms
2024-05-14 14:28:21.646 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 19223.4719ms
2024-05-14 14:28:21.649 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:28:21.699 +05:30  ERR  An unhandled exception has occurred while executing the request.System.NullReferenceException: Object reference not set to an instance of an object.
   at Application.Services.Implementation.OrderService.UpdateOrder(PaymentCreation paymentResponse) in C:\Users\iTela\Documents\Assignment\sample project structure\ShoppingApp\Application\Services\Implementation\OrderService.cs:line 80
   at Application.Services.Implementation.CheckoutService.HandlePayment() in C:\Users\iTela\Documents\Assignment\sample project structure\ShoppingApp\Application\Services\Implementation\CheckoutService.cs:line 55
   at API.Controllers.CheckoutController.Index() in C:\Users\iTela\Documents\Assignment\sample project structure\ShoppingApp\API\Controllers\CheckoutController.cs:line 38
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)

2024-05-14 14:28:21.727 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 500 null text/plain; charset=utf-8 19314.6832ms
2024-05-14 14:28:34.890 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/Checkout - null 0
2024-05-14 14:28:34.895 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Checkout (API)'
2024-05-14 14:28:34.897 +05:30  INF  Route matched with {action = "Checkout", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Checkout() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:28:34.914 +05:30  INF  Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
FROM [Users] AS [u]
WHERE [u].[UserId] = @__userId_0
2024-05-14 14:28:34.929 +05:30  INF  Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-05-14 14:28:34.943 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([OrderDate], [PaymentId], [Status], [TotalAmount], [UserId])
OUTPUT INSERTED.[OrderId]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-05-14 14:28:34.956 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderProducts] ([OrderId], [ProductId], [OrderQty], [UnitPrice])
VALUES (@p0, @p1, @p2, @p3);
2024-05-14 14:28:35.572 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-05-14 14:28:35.575 +05:30  INF  Executed action API.Controllers.CheckoutController.Checkout (API) in 672.3226ms
2024-05-14 14:28:35.583 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Checkout (API)'
2024-05-14 14:28:35.586 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/Checkout - 200 null text/plain; charset=utf-8 696.5869ms
2024-05-14 14:28:56.717 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 3514
2024-05-14 14:28:56.722 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:28:56.724 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:28:56.730 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 14:28:56.732 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 3.1231ms
2024-05-14 14:28:56.734 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:28:56.735 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 18.734ms
2024-05-14 14:28:56.771 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 1962
2024-05-14 14:28:56.776 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:28:56.777 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:28:56.782 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 14:28:56.783 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 2.5044ms
2024-05-14 14:28:56.785 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:28:56.789 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 18.0444ms
2024-05-14 14:28:56.841 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 1919
2024-05-14 14:28:56.846 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:28:56.848 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:28:56.854 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 14:28:56.856 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 2.9453ms
2024-05-14 14:28:56.859 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:28:56.861 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 19.9667ms
2024-05-14 14:28:56.969 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 3257
2024-05-14 14:28:56.972 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:28:56.975 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:28:56.988 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__paymentResponse_OrderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[OrderId], [o].[OrderDate], [o].[PaymentId], [o].[Status], [o].[TotalAmount], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[OrderId] = @__paymentResponse_OrderId_0
2024-05-14 14:28:57.031 +05:30  INF  Executed DbCommand (31ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Orders] SET [OrderDate] = @p0, [PaymentId] = @p1, [Status] = @p2, [TotalAmount] = @p3, [UserId] = @p4
OUTPUT 1
WHERE [OrderId] = @p5;
2024-05-14 14:28:57.045 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__id_0
2024-05-14 14:33:39.036 +05:30  INF  User profile is available. Using 'C:\Users\iTela\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-14 14:33:39.334 +05:30  INF  Now listening on: https://localhost:7220
2024-05-14 14:33:39.338 +05:30  INF  Now listening on: http://localhost:5016
2024-05-14 14:33:39.345 +05:30  INF  Application started. Press Ctrl+C to shut down.
2024-05-14 14:33:39.349 +05:30  INF  Hosting environment: Development
2024-05-14 14:33:39.352 +05:30  INF  Content root path: C:\Users\iTela\Documents\Assignment\sample project structure\ShoppingApp\API
2024-05-14 14:33:39.813 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/index.html - null null
2024-05-14 14:33:40.092 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/index.html - 200 null text/html;charset=utf-8 287.4074ms
2024-05-14 14:33:40.111 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_vs/browserLink - null null
2024-05-14 14:33:40.111 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - null null
2024-05-14 14:33:40.126 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 14.9627ms
2024-05-14 14:33:40.190 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_vs/browserLink - 200 null text/javascript; charset=UTF-8 79.1576ms
2024-05-14 14:33:40.244 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - null null
2024-05-14 14:33:40.391 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 147.5135ms
2024-05-14 14:33:55.516 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/Checkout - null 0
2024-05-14 14:33:56.920 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Checkout (API)'
2024-05-14 14:33:56.939 +05:30  INF  Route matched with {action = "Checkout", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Checkout() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:33:59.585 +05:30  INF  Executed DbCommand (83ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
FROM [Users] AS [u]
WHERE [u].[UserId] = @__userId_0
2024-05-14 14:33:59.703 +05:30  INF  Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-05-14 14:33:59.905 +05:30  INF  Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([OrderDate], [PaymentId], [Status], [TotalAmount], [UserId])
OUTPUT INSERTED.[OrderId]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-05-14 14:33:59.975 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderProducts] ([OrderId], [ProductId], [OrderQty], [UnitPrice])
VALUES (@p0, @p1, @p2, @p3);
2024-05-14 14:34:01.139 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-05-14 14:34:01.147 +05:30  INF  Executed action API.Controllers.CheckoutController.Checkout (API) in 4201.2606ms
2024-05-14 14:34:01.150 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Checkout (API)'
2024-05-14 14:34:01.162 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/Checkout - 200 null text/plain; charset=utf-8 5646.3866ms
2024-05-14 14:34:29.891 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 3514
2024-05-14 14:34:29.896 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:34:29.902 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:34:29.943 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 1962
2024-05-14 14:34:29.954 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:34:29.955 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:34:30.032 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 1919
2024-05-14 14:34:30.037 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:34:30.040 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:34:30.058 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 14:34:30.058 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 14:34:30.067 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 14:34:30.084 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 126.138ms
2024-05-14 14:34:30.084 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 40.5421ms
2024-05-14 14:34:30.084 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 178.9176ms
2024-05-14 14:34:30.095 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:34:30.100 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:34:30.107 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:34:30.109 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 165.9514ms
2024-05-14 14:34:30.111 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 78.8358ms
2024-05-14 14:34:30.112 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 221.4882ms
2024-05-14 14:34:30.195 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 3257
2024-05-14 14:34:30.198 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:34:30.202 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:34:30.228 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@__paymentResponse_OrderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[OrderId], [o].[OrderDate], [o].[PaymentId], [o].[Status], [o].[TotalAmount], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[OrderId] = @__paymentResponse_OrderId_0
2024-05-14 14:34:30.255 +05:30  INF  Executed DbCommand (5ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Orders] SET [OrderDate] = @p0, [PaymentId] = @p1, [Status] = @p2, [TotalAmount] = @p3, [UserId] = @p4
OUTPUT 1
WHERE [OrderId] = @p5;
2024-05-14 14:34:30.277 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@__id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__id_0
2024-05-14 14:34:35.841 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 3739
2024-05-14 14:34:42.749 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:34:42.751 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:34:42.829 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__cartItem_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__cartItem_ProductId_0
2024-05-14 14:34:42.837 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 14:34:44.465 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 1709.5967ms
2024-05-14 14:34:44.467 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:34:44.471 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 8629.8365ms
2024-05-14 14:34:44.543 +05:30  INF  Executed DbCommand (49ms) [Parameters=[@p7='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = Double), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Double), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Description] = @p0, [Discount] = @p1, [ImageUrl] = @p2, [Name] = @p3, [Price] = @p4, [ProductCategoryId] = @p5, [Quantity] = @p6
OUTPUT 1
WHERE [ProductId] = @p7;
2024-05-14 14:34:44.563 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__UserId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__UserId_0
2024-05-14 14:34:44.591 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [UserProducts]
OUTPUT 1
WHERE [ProductId] = @p0 AND [userId] = @p1;
2024-05-14 14:34:44.673 +05:30  INF  Executed DbCommand (10ms) [Parameters=[@__orderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[OrderId], [t].[OrderDate], [t].[PaymentId], [t].[Status], [t].[TotalAmount], [t].[UserId], [t].[UserId0], [t].[Email], [t].[FirstName], [t].[LastName], [t].[PhoneNumber], [t].[StripeId], [t0].[OrderId], [t0].[ProductId], [t0].[OrderQty], [t0].[UnitPrice], [t0].[ProductId0], [t0].[Description], [t0].[Discount], [t0].[ImageUrl], [t0].[Name], [t0].[Price], [t0].[ProductCategoryId], [t0].[Quantity]
FROM (
    SELECT TOP(1) [o].[OrderId], [o].[OrderDate], [o].[PaymentId], [o].[Status], [o].[TotalAmount], [o].[UserId], [u].[UserId] AS [UserId0], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
    FROM [Orders] AS [o]
    INNER JOIN [Users] AS [u] ON [o].[UserId] = [u].[UserId]
    WHERE [o].[OrderId] = @__orderId_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[OrderId], [o0].[ProductId], [o0].[OrderQty], [o0].[UnitPrice], [p].[ProductId] AS [ProductId0], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
    FROM [OrderProducts] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[ProductId]
) AS [t0] ON [t].[OrderId] = [t0].[OrderId]
ORDER BY [t].[OrderId], [t].[UserId0], [t0].[OrderId], [t0].[ProductId]
2024-05-14 14:34:45.768 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 14:34:45.771 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 15564.0156ms
2024-05-14 14:34:45.774 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:34:45.776 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 15581.1088ms
2024-05-14 14:34:57.303 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/Product/all-products - null null
2024-05-14 14:34:57.309 +05:30  INF  Executing endpoint 'API.Controllers.ProductController.GetProducts (API)'
2024-05-14 14:34:57.315 +05:30  INF  Route matched with {action = "GetProducts", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[Application.DTOs.Product.ProductResponse]] GetProducts() on controller API.Controllers.ProductController (API).
2024-05-14 14:34:57.344 +05:30  INF  Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity], [p0].[CategoryId], [p0].[CategoryIcon], [p0].[CategoryName]
FROM [Products] AS [p]
INNER JOIN [ProductCategories] AS [p0] ON [p].[ProductCategoryId] = [p0].[CategoryId]
2024-05-14 14:34:57.359 +05:30  INF  Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.DTOs.Product.ProductResponse, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-14 14:34:57.373 +05:30  INF  Executed action API.Controllers.ProductController.GetProducts (API) in 49.3866ms
2024-05-14 14:34:57.375 +05:30  INF  Executed endpoint 'API.Controllers.ProductController.GetProducts (API)'
2024-05-14 14:34:57.382 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/Product/all-products - 200 null application/json; charset=utf-8 78.9797ms
2024-05-14 14:35:21.191 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/Cart/add-to-cart - application/json 38
2024-05-14 14:35:21.205 +05:30  INF  Executing endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-05-14 14:35:21.217 +05:30  INF  Route matched with {action = "AddToCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToCart(Application.DTOs.Cart.CartItemRequset) on controller API.Controllers.CartController (API).
2024-05-14 14:35:21.264 +05:30  INF  Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450), @__itemId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__userId_0 AND [u].[ProductId] = @__itemId_1
2024-05-14 14:35:21.314 +05:30  INF  Executed DbCommand (38ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserProducts] ([ProductId], [userId], [Quantity])
VALUES (@p0, @p1, @p2);
2024-05-14 14:35:21.329 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-05-14 14:35:21.332 +05:30  INF  Executed action API.Controllers.CartController.AddToCart (API) in 108.5509ms
2024-05-14 14:35:21.335 +05:30  INF  Executed endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-05-14 14:35:21.341 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/Cart/add-to-cart - 200 null text/plain; charset=utf-8 149.2949ms
2024-05-14 14:35:32.622 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/Checkout - null 0
2024-05-14 14:35:32.627 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Checkout (API)'
2024-05-14 14:35:32.629 +05:30  INF  Route matched with {action = "Checkout", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Checkout() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:35:32.650 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
FROM [Users] AS [u]
WHERE [u].[UserId] = @__userId_0
2024-05-14 14:35:32.663 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-05-14 14:35:32.676 +05:30  INF  Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([OrderDate], [PaymentId], [Status], [TotalAmount], [UserId])
OUTPUT INSERTED.[OrderId]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-05-14 14:35:32.688 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderProducts] ([OrderId], [ProductId], [OrderQty], [UnitPrice])
VALUES (@p0, @p1, @p2, @p3);
2024-05-14 14:35:33.578 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-05-14 14:35:33.582 +05:30  INF  Executed action API.Controllers.CheckoutController.Checkout (API) in 948.4744ms
2024-05-14 14:35:33.587 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Checkout (API)'
2024-05-14 14:35:33.590 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/Checkout - 200 null text/plain; charset=utf-8 968.7119ms
2024-05-14 14:35:52.943 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 3518
2024-05-14 14:35:52.949 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:35:52.951 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:35:52.956 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 14:35:52.961 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 5.8935ms
2024-05-14 14:35:52.963 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:35:52.967 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 23.9882ms
2024-05-14 14:35:52.989 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 1964
2024-05-14 14:35:52.992 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:35:52.994 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:35:53.000 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 14:35:53.002 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 2.8268ms
2024-05-14 14:35:53.006 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:35:53.009 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 19.092ms
2024-05-14 14:35:53.068 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 1920
2024-05-14 14:35:53.072 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:35:53.075 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:35:53.082 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 14:35:53.086 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 5.6248ms
2024-05-14 14:35:53.088 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:35:53.091 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 23.0513ms
2024-05-14 14:35:53.151 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 3259
2024-05-14 14:35:53.155 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:35:53.156 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:35:53.173 +05:30  INF  Executed DbCommand (4ms) [Parameters=[@__paymentResponse_OrderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[OrderId], [o].[OrderDate], [o].[PaymentId], [o].[Status], [o].[TotalAmount], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[OrderId] = @__paymentResponse_OrderId_0
2024-05-14 14:35:53.193 +05:30  INF  Executed DbCommand (6ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Orders] SET [OrderDate] = @p0, [PaymentId] = @p1, [Status] = @p2, [TotalAmount] = @p3, [UserId] = @p4
OUTPUT 1
WHERE [OrderId] = @p5;
2024-05-14 14:35:53.209 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__id_0
2024-05-14 14:35:58.010 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 3743
2024-05-14 14:35:59.901 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@__cartItem_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__cartItem_ProductId_0
2024-05-14 14:35:59.902 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:36:01.580 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:36:01.586 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 14:36:01.588 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 3.854ms
2024-05-14 14:36:01.590 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:36:01.593 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 3583.0831ms
2024-05-14 14:36:01.608 +05:30  INF  Executed DbCommand (25ms) [Parameters=[@p7='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = Double), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Double), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Description] = @p0, [Discount] = @p1, [ImageUrl] = @p2, [Name] = @p3, [Price] = @p4, [ProductCategoryId] = @p5, [Quantity] = @p6
OUTPUT 1
WHERE [ProductId] = @p7;
2024-05-14 14:36:01.622 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@__UserId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__UserId_0
2024-05-14 14:36:01.639 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [UserProducts]
OUTPUT 1
WHERE [ProductId] = @p0 AND [userId] = @p1;
2024-05-14 14:36:01.658 +05:30  INF  Executed DbCommand (7ms) [Parameters=[@__orderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[OrderId], [t].[OrderDate], [t].[PaymentId], [t].[Status], [t].[TotalAmount], [t].[UserId], [t].[UserId0], [t].[Email], [t].[FirstName], [t].[LastName], [t].[PhoneNumber], [t].[StripeId], [t0].[OrderId], [t0].[ProductId], [t0].[OrderQty], [t0].[UnitPrice], [t0].[ProductId0], [t0].[Description], [t0].[Discount], [t0].[ImageUrl], [t0].[Name], [t0].[Price], [t0].[ProductCategoryId], [t0].[Quantity]
FROM (
    SELECT TOP(1) [o].[OrderId], [o].[OrderDate], [o].[PaymentId], [o].[Status], [o].[TotalAmount], [o].[UserId], [u].[UserId] AS [UserId0], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
    FROM [Orders] AS [o]
    INNER JOIN [Users] AS [u] ON [o].[UserId] = [u].[UserId]
    WHERE [o].[OrderId] = @__orderId_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[OrderId], [o0].[ProductId], [o0].[OrderQty], [o0].[UnitPrice], [p].[ProductId] AS [ProductId0], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
    FROM [OrderProducts] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[ProductId]
) AS [t0] ON [t].[OrderId] = [t0].[OrderId]
ORDER BY [t].[OrderId], [t].[UserId0], [t0].[OrderId], [t0].[ProductId]
2024-05-14 14:36:02.379 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 14:36:02.383 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 9222.0087ms
2024-05-14 14:36:02.388 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:36:02.392 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 9240.971ms
2024-05-14 14:36:12.953 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/Get-user-payments - null null
2024-05-14 14:36:12.956 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.UserPayments (API)'
2024-05-14 14:36:12.960 +05:30  INF  Route matched with {action = "UserPayments", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UserPayments() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:36:12.982 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[OrderId], [o].[OrderDate], [o].[PaymentId], [o].[Status], [o].[TotalAmount], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[UserId] = @__userId_0
2024-05-14 14:36:12.989 +05:30  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.DTOs.Order.PaymentInfoDTO, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-14 14:36:13.001 +05:30  INF  Executed action API.Controllers.CheckoutController.UserPayments (API) in 34.8523ms
2024-05-14 14:36:13.003 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.UserPayments (API)'
2024-05-14 14:36:13.006 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/Get-user-payments - 200 null application/json; charset=utf-8 54.1142ms
2024-05-14 14:36:29.523 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/Cart/getAll-cartItems - null null
2024-05-14 14:36:29.537 +05:30  INF  Executing endpoint 'API.Controllers.CartController.GetAllCartItems (API)'
2024-05-14 14:36:29.546 +05:30  INF  Route matched with {action = "GetAllCartItems", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllCartItems() on controller API.Controllers.CartController (API).
2024-05-14 14:36:29.560 +05:30  INF  Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-05-14 14:36:29.568 +05:30  INF  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.DTOs.Cart.CartItemResponse, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-14 14:36:29.574 +05:30  INF  Executed action API.Controllers.CartController.GetAllCartItems (API) in 24.8242ms
2024-05-14 14:36:29.576 +05:30  INF  Executed endpoint 'API.Controllers.CartController.GetAllCartItems (API)'
2024-05-14 14:36:29.578 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/Cart/getAll-cartItems - 200 null application/json; charset=utf-8 54.4376ms
2024-05-14 14:36:38.134 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/Product/all-products - null null
2024-05-14 14:36:38.139 +05:30  INF  Executing endpoint 'API.Controllers.ProductController.GetProducts (API)'
2024-05-14 14:36:38.141 +05:30  INF  Route matched with {action = "GetProducts", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[Application.DTOs.Product.ProductResponse]] GetProducts() on controller API.Controllers.ProductController (API).
2024-05-14 14:36:38.155 +05:30  INF  Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity], [p0].[CategoryId], [p0].[CategoryIcon], [p0].[CategoryName]
FROM [Products] AS [p]
INNER JOIN [ProductCategories] AS [p0] ON [p].[ProductCategoryId] = [p0].[CategoryId]
2024-05-14 14:36:38.161 +05:30  INF  Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.DTOs.Product.ProductResponse, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-14 14:36:38.163 +05:30  INF  Executed action API.Controllers.ProductController.GetProducts (API) in 17.4218ms
2024-05-14 14:36:38.168 +05:30  INF  Executed endpoint 'API.Controllers.ProductController.GetProducts (API)'
2024-05-14 14:36:38.170 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/Product/all-products - 200 null application/json; charset=utf-8 35.9833ms
2024-05-14 14:37:05.399 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/Cart/add-to-cart - application/json 37
2024-05-14 14:37:05.407 +05:30  INF  Executing endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-05-14 14:37:05.412 +05:30  INF  Route matched with {action = "AddToCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToCart(Application.DTOs.Cart.CartItemRequset) on controller API.Controllers.CartController (API).
2024-05-14 14:37:05.427 +05:30  INF  Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450), @__itemId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__userId_0 AND [u].[ProductId] = @__itemId_1
2024-05-14 14:37:05.440 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserProducts] ([ProductId], [userId], [Quantity])
VALUES (@p0, @p1, @p2);
2024-05-14 14:37:05.445 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-05-14 14:37:05.446 +05:30  INF  Executed action API.Controllers.CartController.AddToCart (API) in 28.3373ms
2024-05-14 14:37:05.448 +05:30  INF  Executed endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-05-14 14:37:05.450 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/Cart/add-to-cart - 200 null text/plain; charset=utf-8 51.1108ms
2024-05-14 14:37:12.070 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/Cart/add-to-cart - application/json 37
2024-05-14 14:37:12.074 +05:30  INF  Executing endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-05-14 14:37:12.086 +05:30  INF  Route matched with {action = "AddToCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToCart(Application.DTOs.Cart.CartItemRequset) on controller API.Controllers.CartController (API).
2024-05-14 14:37:12.102 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450), @__itemId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__userId_0 AND [u].[ProductId] = @__itemId_1
2024-05-14 14:37:12.114 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserProducts] ([ProductId], [userId], [Quantity])
VALUES (@p0, @p1, @p2);
2024-05-14 14:37:12.121 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-05-14 14:37:12.122 +05:30  INF  Executed action API.Controllers.CartController.AddToCart (API) in 27.6796ms
2024-05-14 14:37:12.124 +05:30  INF  Executed endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-05-14 14:37:12.126 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/Cart/add-to-cart - 200 null text/plain; charset=utf-8 55.6673ms
2024-05-14 14:37:35.586 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/Checkout - null 0
2024-05-14 14:37:35.597 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Checkout (API)'
2024-05-14 14:37:35.601 +05:30  INF  Route matched with {action = "Checkout", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Checkout() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:37:35.614 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
FROM [Users] AS [u]
WHERE [u].[UserId] = @__userId_0
2024-05-14 14:37:35.628 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-05-14 14:37:35.644 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([OrderDate], [PaymentId], [Status], [TotalAmount], [UserId])
OUTPUT INSERTED.[OrderId]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-05-14 14:37:35.658 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderProducts] ([OrderId], [ProductId], [OrderQty], [UnitPrice])
VALUES (@p0, @p1, @p2, @p3);
2024-05-14 14:37:35.668 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderProducts] ([OrderId], [ProductId], [OrderQty], [UnitPrice])
VALUES (@p0, @p1, @p2, @p3);
2024-05-14 14:37:36.676 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-05-14 14:37:36.681 +05:30  INF  Executed action API.Controllers.CheckoutController.Checkout (API) in 1073.7965ms
2024-05-14 14:37:36.689 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Checkout (API)'
2024-05-14 14:37:36.693 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/Checkout - 200 null text/plain; charset=utf-8 1107.954ms
2024-05-14 14:37:56.327 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 3510
2024-05-14 14:37:56.336 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:37:56.343 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:37:56.351 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 14:37:56.352 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 2.4737ms
2024-05-14 14:37:56.355 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:37:56.357 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 31.3865ms
2024-05-14 14:37:56.385 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 1962
2024-05-14 14:37:56.388 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:37:56.390 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:37:56.394 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 14:37:56.396 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 3.1327ms
2024-05-14 14:37:56.398 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:37:56.399 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 14.4323ms
2024-05-14 14:37:56.460 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 1919
2024-05-14 14:37:56.465 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:37:56.467 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:37:56.472 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 14:37:56.474 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 2.6053ms
2024-05-14 14:37:56.476 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:37:56.478 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 18.155ms
2024-05-14 14:37:56.652 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 3257
2024-05-14 14:37:56.663 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:37:56.669 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:37:56.685 +05:30  INF  Executed DbCommand (4ms) [Parameters=[@__paymentResponse_OrderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[OrderId], [o].[OrderDate], [o].[PaymentId], [o].[Status], [o].[TotalAmount], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[OrderId] = @__paymentResponse_OrderId_0
2024-05-14 14:37:56.728 +05:30  INF  Executed DbCommand (31ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Orders] SET [OrderDate] = @p0, [PaymentId] = @p1, [Status] = @p2, [TotalAmount] = @p3, [UserId] = @p4
OUTPUT 1
WHERE [OrderId] = @p5;
2024-05-14 14:37:56.743 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__id_0
2024-05-14 14:38:03.698 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 3735
2024-05-14 14:38:03.710 +05:30  INF  Executed DbCommand (6ms) [Parameters=[@__cartItem_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__cartItem_ProductId_0
2024-05-14 14:38:03.711 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:38:05.643 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 14:38:05.649 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 14:38:05.651 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 3.0276ms
2024-05-14 14:38:05.654 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:38:05.656 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 1957.2152ms
2024-05-14 14:38:05.670 +05:30  INF  Executed DbCommand (23ms) [Parameters=[@p7='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = Double), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Double), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Description] = @p0, [Discount] = @p1, [ImageUrl] = @p2, [Name] = @p3, [Price] = @p4, [ProductCategoryId] = @p5, [Quantity] = @p6
OUTPUT 1
WHERE [ProductId] = @p7;
2024-05-14 14:38:07.669 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@__cartItem_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__cartItem_ProductId_0
2024-05-14 14:38:09.263 +05:30  INF  Executed DbCommand (41ms) [Parameters=[@p7='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = Double), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Double), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Description] = @p0, [Discount] = @p1, [ImageUrl] = @p2, [Name] = @p3, [Price] = @p4, [ProductCategoryId] = @p5, [Quantity] = @p6
OUTPUT 1
WHERE [ProductId] = @p7;
2024-05-14 14:38:09.275 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@__UserId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__UserId_0
2024-05-14 14:38:09.299 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [UserProducts]
OUTPUT 1
WHERE [ProductId] = @p0 AND [userId] = @p1;
DELETE FROM [UserProducts]
OUTPUT 1
WHERE [ProductId] = @p2 AND [userId] = @p3;
2024-05-14 14:38:09.325 +05:30  INF  Executed DbCommand (7ms) [Parameters=[@__orderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[OrderId], [t].[OrderDate], [t].[PaymentId], [t].[Status], [t].[TotalAmount], [t].[UserId], [t].[UserId0], [t].[Email], [t].[FirstName], [t].[LastName], [t].[PhoneNumber], [t].[StripeId], [t0].[OrderId], [t0].[ProductId], [t0].[OrderQty], [t0].[UnitPrice], [t0].[ProductId0], [t0].[Description], [t0].[Discount], [t0].[ImageUrl], [t0].[Name], [t0].[Price], [t0].[ProductCategoryId], [t0].[Quantity]
FROM (
    SELECT TOP(1) [o].[OrderId], [o].[OrderDate], [o].[PaymentId], [o].[Status], [o].[TotalAmount], [o].[UserId], [u].[UserId] AS [UserId0], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
    FROM [Orders] AS [o]
    INNER JOIN [Users] AS [u] ON [o].[UserId] = [u].[UserId]
    WHERE [o].[OrderId] = @__orderId_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[OrderId], [o0].[ProductId], [o0].[OrderQty], [o0].[UnitPrice], [p].[ProductId] AS [ProductId0], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
    FROM [OrderProducts] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[ProductId]
) AS [t0] ON [t].[OrderId] = [t0].[OrderId]
ORDER BY [t].[OrderId], [t].[UserId0], [t0].[OrderId], [t0].[ProductId]
2024-05-14 14:38:10.147 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 14:38:10.150 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 13473.9086ms
2024-05-14 14:38:10.153 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 14:38:10.155 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 13503.435ms
2024-05-14 14:38:24.167 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/Product/all-products - null null
2024-05-14 14:38:24.171 +05:30  INF  Executing endpoint 'API.Controllers.ProductController.GetProducts (API)'
2024-05-14 14:38:24.173 +05:30  INF  Route matched with {action = "GetProducts", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[Application.DTOs.Product.ProductResponse]] GetProducts() on controller API.Controllers.ProductController (API).
2024-05-14 14:38:24.186 +05:30  INF  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity], [p0].[CategoryId], [p0].[CategoryIcon], [p0].[CategoryName]
FROM [Products] AS [p]
INNER JOIN [ProductCategories] AS [p0] ON [p].[ProductCategoryId] = [p0].[CategoryId]
2024-05-14 14:38:24.192 +05:30  INF  Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.DTOs.Product.ProductResponse, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-14 14:38:24.197 +05:30  INF  Executed action API.Controllers.ProductController.GetProducts (API) in 19.8827ms
2024-05-14 14:38:24.200 +05:30  INF  Executed endpoint 'API.Controllers.ProductController.GetProducts (API)'
2024-05-14 14:38:24.201 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/Product/all-products - 200 null application/json; charset=utf-8 34.2158ms
2024-05-14 14:40:03.980 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/index.html - null null
2024-05-14 14:40:04.004 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/index.html - 200 null text/html;charset=utf-8 24.0597ms
2024-05-14 14:40:04.043 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - null null
2024-05-14 14:40:04.043 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_vs/browserLink - null null
2024-05-14 14:40:04.048 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 6.1737ms
2024-05-14 14:40:04.089 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_vs/browserLink - 200 null text/javascript; charset=UTF-8 46.4467ms
2024-05-14 14:40:04.212 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - null null
2024-05-14 14:40:04.234 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 22.7239ms
2024-05-14 15:01:07.459 +05:30  INF  User profile is available. Using 'C:\Users\iTela\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-14 15:01:07.738 +05:30  INF  Now listening on: https://localhost:7220
2024-05-14 15:01:07.742 +05:30  INF  Now listening on: http://localhost:5016
2024-05-14 15:01:07.750 +05:30  INF  Application started. Press Ctrl+C to shut down.
2024-05-14 15:01:07.754 +05:30  INF  Hosting environment: Development
2024-05-14 15:01:07.759 +05:30  INF  Content root path: C:\Users\iTela\Documents\Assignment\sample project structure\ShoppingApp\API
2024-05-14 15:01:08.233 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/index.html - null null
2024-05-14 15:01:08.490 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/index.html - 200 null text/html;charset=utf-8 262.3833ms
2024-05-14 15:01:08.530 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_vs/browserLink - null null
2024-05-14 15:01:08.530 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - null null
2024-05-14 15:01:08.551 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 21.9472ms
2024-05-14 15:01:08.592 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_vs/browserLink - 200 null text/javascript; charset=UTF-8 63.5752ms
2024-05-14 15:01:08.640 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - null null
2024-05-14 15:01:08.805 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 165.1647ms
2024-05-14 15:01:40.253 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/Cart/add-to-cart - application/json 38
2024-05-14 15:01:42.361 +05:30  INF  Executing endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-05-14 15:01:42.387 +05:30  INF  Route matched with {action = "AddToCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToCart(Application.DTOs.Cart.CartItemRequset) on controller API.Controllers.CartController (API).
2024-05-14 15:01:44.974 +05:30  INF  Executed DbCommand (51ms) [Parameters=[@__userId_0='?' (Size = 450), @__itemId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__userId_0 AND [u].[ProductId] = @__itemId_1
2024-05-14 15:01:45.150 +05:30  INF  Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserProducts] ([ProductId], [userId], [Quantity])
VALUES (@p0, @p1, @p2);
2024-05-14 15:01:45.176 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-05-14 15:01:45.182 +05:30  INF  Executed action API.Controllers.CartController.AddToCart (API) in 2787.5695ms
2024-05-14 15:01:45.186 +05:30  INF  Executed endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-05-14 15:01:45.196 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/Cart/add-to-cart - 200 null text/plain; charset=utf-8 4943.8903ms
2024-05-14 15:01:50.959 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/Cart/add-to-cart - application/json 38
2024-05-14 15:01:50.970 +05:30  INF  Executing endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-05-14 15:01:50.972 +05:30  INF  Route matched with {action = "AddToCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToCart(Application.DTOs.Cart.CartItemRequset) on controller API.Controllers.CartController (API).
2024-05-14 15:01:51.039 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450), @__itemId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__userId_0 AND [u].[ProductId] = @__itemId_1
2024-05-14 15:01:51.101 +05:30  INF  Executed DbCommand (50ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserProducts] ([ProductId], [userId], [Quantity])
VALUES (@p0, @p1, @p2);
2024-05-14 15:01:51.109 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-05-14 15:01:51.110 +05:30  INF  Executed action API.Controllers.CartController.AddToCart (API) in 133.0652ms
2024-05-14 15:01:51.112 +05:30  INF  Executed endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-05-14 15:01:51.114 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/Cart/add-to-cart - 200 null text/plain; charset=utf-8 155.3853ms
2024-05-14 15:01:52.651 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/Cart/add-to-cart - application/json 38
2024-05-14 15:01:52.668 +05:30  INF  Executing endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-05-14 15:01:52.670 +05:30  INF  Route matched with {action = "AddToCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToCart(Application.DTOs.Cart.CartItemRequset) on controller API.Controllers.CartController (API).
2024-05-14 15:01:52.701 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450), @__itemId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__userId_0 AND [u].[ProductId] = @__itemId_1
2024-05-14 15:01:52.723 +05:30  INF  Executed DbCommand (4ms) [Parameters=[@p1='?' (DbType = Int32), @p2='?' (Size = 450), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [UserProducts] SET [Quantity] = @p0
OUTPUT 1
WHERE [ProductId] = @p1 AND [userId] = @p2;
2024-05-14 15:01:52.731 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-05-14 15:01:52.733 +05:30  INF  Executed action API.Controllers.CartController.AddToCart (API) in 57.1459ms
2024-05-14 15:01:52.735 +05:30  INF  Executed endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-05-14 15:01:52.737 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/Cart/add-to-cart - 200 null text/plain; charset=utf-8 85.4927ms
2024-05-14 15:01:53.056 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/Cart/add-to-cart - application/json 38
2024-05-14 15:01:53.061 +05:30  INF  Executing endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-05-14 15:01:53.063 +05:30  INF  Route matched with {action = "AddToCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToCart(Application.DTOs.Cart.CartItemRequset) on controller API.Controllers.CartController (API).
2024-05-14 15:01:53.077 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450), @__itemId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__userId_0 AND [u].[ProductId] = @__itemId_1
2024-05-14 15:01:53.118 +05:30  INF  Executed DbCommand (29ms) [Parameters=[@p1='?' (DbType = Int32), @p2='?' (Size = 450), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [UserProducts] SET [Quantity] = @p0
OUTPUT 1
WHERE [ProductId] = @p1 AND [userId] = @p2;
2024-05-14 15:01:53.126 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-05-14 15:01:53.130 +05:30  INF  Executed action API.Controllers.CartController.AddToCart (API) in 59.1187ms
2024-05-14 15:01:53.133 +05:30  INF  Executed endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-05-14 15:01:53.135 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/Cart/add-to-cart - 200 null text/plain; charset=utf-8 79.6858ms
2024-05-14 15:02:02.686 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/Checkout - null 0
2024-05-14 15:02:02.691 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Checkout (API)'
2024-05-14 15:02:02.695 +05:30  INF  Route matched with {action = "Checkout", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Checkout() on controller API.Controllers.CheckoutController (API).
2024-05-14 15:02:02.717 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
FROM [Users] AS [u]
WHERE [u].[UserId] = @__userId_0
2024-05-14 15:02:02.802 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-05-14 15:02:02.828 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__userId_0
2024-05-14 15:02:02.846 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@__item_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__item_ProductId_0
2024-05-14 15:02:02.856 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@__item_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__item_ProductId_0
2024-05-14 15:02:02.912 +05:30  INF  Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([OrderDate], [PaymentId], [Status], [TotalAmount], [UserId])
OUTPUT INSERTED.[OrderId]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-05-14 15:02:02.959 +05:30  INF  Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderProducts] ([OrderId], [ProductId], [OrderQty], [UnitPrice])
VALUES (@p0, @p1, @p2, @p3);
2024-05-14 15:02:02.972 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderProducts] ([OrderId], [ProductId], [OrderQty], [UnitPrice])
VALUES (@p0, @p1, @p2, @p3);
2024-05-14 15:02:04.222 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-05-14 15:02:04.224 +05:30  INF  Executed action API.Controllers.CheckoutController.Checkout (API) in 1525.4568ms
2024-05-14 15:02:04.226 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Checkout (API)'
2024-05-14 15:02:04.230 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/Checkout - 200 null text/plain; charset=utf-8 1544.4858ms
2024-05-14 15:02:39.610 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 3514
2024-05-14 15:02:39.615 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 15:02:39.620 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 15:02:39.664 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 1964
2024-05-14 15:02:39.672 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 15:02:39.674 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 15:02:39.699 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 1920
2024-05-14 15:02:39.755 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 15:02:39.757 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 15:02:39.787 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 15:02:39.787 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 15:02:39.787 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 15:02:39.795 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 32.8702ms
2024-05-14 15:02:39.795 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 117.4788ms
2024-05-14 15:02:39.795 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 169.1902ms
2024-05-14 15:02:39.797 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 15:02:39.799 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 15:02:39.801 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 15:02:39.802 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 102.8271ms
2024-05-14 15:02:39.804 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 139.8919ms
2024-05-14 15:02:39.805 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 195.3634ms
2024-05-14 15:02:39.866 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 3259
2024-05-14 15:02:39.869 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 15:02:39.871 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 15:02:39.892 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__paymentResponse_OrderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[OrderId], [o].[OrderDate], [o].[PaymentId], [o].[Status], [o].[TotalAmount], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[OrderId] = @__paymentResponse_OrderId_0
2024-05-14 15:02:39.912 +05:30  INF  Executed DbCommand (5ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Orders] SET [OrderDate] = @p0, [PaymentId] = @p1, [Status] = @p2, [TotalAmount] = @p3, [UserId] = @p4
OUTPUT 1
WHERE [OrderId] = @p5;
2024-05-14 15:02:39.931 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__id_0
2024-05-14 15:02:39.944 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@__cartItem_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__cartItem_ProductId_0
2024-05-14 15:02:39.971 +05:30  INF  Executed DbCommand (4ms) [Parameters=[@p7='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = Double), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Double), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Description] = @p0, [Discount] = @p1, [ImageUrl] = @p2, [Name] = @p3, [Price] = @p4, [ProductCategoryId] = @p5, [Quantity] = @p6
OUTPUT 1
WHERE [ProductId] = @p7;
2024-05-14 15:02:39.984 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@__cartItem_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__cartItem_ProductId_0
2024-05-14 15:02:39.995 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@p7='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = Double), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Double), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Description] = @p0, [Discount] = @p1, [ImageUrl] = @p2, [Name] = @p3, [Price] = @p4, [ProductCategoryId] = @p5, [Quantity] = @p6
OUTPUT 1
WHERE [ProductId] = @p7;
2024-05-14 15:02:40.010 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@__UserId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__UserId_0
2024-05-14 15:02:40.039 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [UserProducts]
OUTPUT 1
WHERE [ProductId] = @p0 AND [userId] = @p1;
DELETE FROM [UserProducts]
OUTPUT 1
WHERE [ProductId] = @p2 AND [userId] = @p3;
2024-05-14 15:02:40.117 +05:30  INF  Executed DbCommand (9ms) [Parameters=[@__orderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[OrderId], [t].[OrderDate], [t].[PaymentId], [t].[Status], [t].[TotalAmount], [t].[UserId], [t].[UserId0], [t].[Email], [t].[FirstName], [t].[LastName], [t].[PhoneNumber], [t].[StripeId], [t0].[OrderId], [t0].[ProductId], [t0].[OrderQty], [t0].[UnitPrice], [t0].[ProductId0], [t0].[Description], [t0].[Discount], [t0].[ImageUrl], [t0].[Name], [t0].[Price], [t0].[ProductCategoryId], [t0].[Quantity]
FROM (
    SELECT TOP(1) [o].[OrderId], [o].[OrderDate], [o].[PaymentId], [o].[Status], [o].[TotalAmount], [o].[UserId], [u].[UserId] AS [UserId0], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
    FROM [Orders] AS [o]
    INNER JOIN [Users] AS [u] ON [o].[UserId] = [u].[UserId]
    WHERE [o].[OrderId] = @__orderId_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[OrderId], [o0].[ProductId], [o0].[OrderQty], [o0].[UnitPrice], [p].[ProductId] AS [ProductId0], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
    FROM [OrderProducts] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[ProductId]
) AS [t0] ON [t].[OrderId] = [t0].[OrderId]
ORDER BY [t].[OrderId], [t].[UserId0], [t0].[OrderId], [t0].[ProductId]
2024-05-14 15:02:41.130 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 15:02:41.132 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 1256.3635ms
2024-05-14 15:02:41.134 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 15:02:41.136 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 1269.9893ms
2024-05-14 15:02:42.229 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 3739
2024-05-14 15:02:42.232 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 15:02:42.233 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 15:02:42.245 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 15:02:42.246 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 7.059ms
2024-05-14 15:02:42.248 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 15:02:42.250 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 21.0155ms
2024-05-14 15:03:07.818 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/Product/all-products - null null
2024-05-14 15:03:07.822 +05:30  INF  Executing endpoint 'API.Controllers.ProductController.GetProducts (API)'
2024-05-14 15:03:07.828 +05:30  INF  Route matched with {action = "GetProducts", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[Application.DTOs.Product.ProductResponse]] GetProducts() on controller API.Controllers.ProductController (API).
2024-05-14 15:03:07.847 +05:30  INF  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity], [p0].[CategoryId], [p0].[CategoryIcon], [p0].[CategoryName]
FROM [Products] AS [p]
INNER JOIN [ProductCategories] AS [p0] ON [p].[ProductCategoryId] = [p0].[CategoryId]
2024-05-14 15:03:07.861 +05:30  INF  Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.DTOs.Product.ProductResponse, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-14 15:03:07.874 +05:30  INF  Executed action API.Controllers.ProductController.GetProducts (API) in 42.9961ms
2024-05-14 15:03:07.877 +05:30  INF  Executed endpoint 'API.Controllers.ProductController.GetProducts (API)'
2024-05-14 15:03:07.879 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/Product/all-products - 200 null application/json; charset=utf-8 61.4235ms
2024-05-14 15:03:35.501 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/Cart/add-to-cart - application/json 38
2024-05-14 15:03:35.505 +05:30  INF  Executing endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-05-14 15:03:35.507 +05:30  INF  Route matched with {action = "AddToCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToCart(Application.DTOs.Cart.CartItemRequset) on controller API.Controllers.CartController (API).
2024-05-14 15:03:35.519 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450), @__itemId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__userId_0 AND [u].[ProductId] = @__itemId_1
2024-05-14 15:03:35.576 +05:30  INF  Executed DbCommand (43ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserProducts] ([ProductId], [userId], [Quantity])
VALUES (@p0, @p1, @p2);
2024-05-14 15:03:35.585 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-05-14 15:03:35.591 +05:30  INF  Executed action API.Controllers.CartController.AddToCart (API) in 79.703ms
2024-05-14 15:03:35.596 +05:30  INF  Executed endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-05-14 15:03:35.597 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/Cart/add-to-cart - 200 null text/plain; charset=utf-8 96.914ms
2024-05-14 15:03:51.320 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/Cart/add-to-cart - application/json 38
2024-05-14 15:03:51.330 +05:30  INF  Executing endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-05-14 15:03:51.334 +05:30  INF  Route matched with {action = "AddToCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToCart(Application.DTOs.Cart.CartItemRequset) on controller API.Controllers.CartController (API).
2024-05-14 15:03:51.350 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450), @__itemId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__userId_0 AND [u].[ProductId] = @__itemId_1
2024-05-14 15:03:51.363 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserProducts] ([ProductId], [userId], [Quantity])
VALUES (@p0, @p1, @p2);
2024-05-14 15:03:51.367 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-05-14 15:03:51.370 +05:30  INF  Executed action API.Controllers.CartController.AddToCart (API) in 27.1141ms
2024-05-14 15:03:51.372 +05:30  INF  Executed endpoint 'API.Controllers.CartController.AddToCart (API)'
2024-05-14 15:03:51.374 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/Cart/add-to-cart - 200 null text/plain; charset=utf-8 54.3127ms
2024-05-14 15:03:55.862 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/Checkout - null 0
2024-05-14 15:03:55.865 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Checkout (API)'
2024-05-14 15:03:55.867 +05:30  INF  Route matched with {action = "Checkout", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Checkout() on controller API.Controllers.CheckoutController (API).
2024-05-14 15:03:55.883 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
FROM [Users] AS [u]
WHERE [u].[UserId] = @__userId_0
2024-05-14 15:03:55.892 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-05-14 15:03:55.904 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__userId_0
2024-05-14 15:03:55.914 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@__item_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__item_ProductId_0
2024-05-14 15:03:55.917 +05:30  INF  Executing BadRequestObjectResult, writing value of type 'System.String'.
2024-05-14 15:03:55.921 +05:30  INF  Executed action API.Controllers.CheckoutController.Checkout (API) in 46.3774ms
2024-05-14 15:03:55.923 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Checkout (API)'
2024-05-14 15:03:55.925 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/Checkout - 400 null text/plain; charset=utf-8 63.3316ms
2024-05-14 15:04:16.885 +05:30  INF  Request starting HTTP/2 PUT https://localhost:7220/Cart/modify-cart-item - application/json 38
2024-05-14 15:04:16.896 +05:30  INF  Executing endpoint 'API.Controllers.CartController.ModifyCart (API)'
2024-05-14 15:04:16.901 +05:30  INF  Route matched with {action = "ModifyCart", controller = "Cart"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ModifyCart(Application.DTOs.Cart.CartItemRequset) on controller API.Controllers.CartController (API).
2024-05-14 15:04:16.913 +05:30  INF  Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450), @__itemId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__userId_0 AND [u].[ProductId] = @__itemId_1
2024-05-14 15:04:16.973 +05:30  INF  Executed DbCommand (51ms) [Parameters=[@p1='?' (DbType = Int32), @p2='?' (Size = 450), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [UserProducts] SET [Quantity] = @p0
OUTPUT 1
WHERE [ProductId] = @p1 AND [userId] = @p2;
2024-05-14 15:04:16.980 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-05-14 15:04:16.982 +05:30  INF  Executed action API.Controllers.CartController.ModifyCart (API) in 78.097ms
2024-05-14 15:04:16.986 +05:30  INF  Executed endpoint 'API.Controllers.CartController.ModifyCart (API)'
2024-05-14 15:04:16.988 +05:30  INF  Request finished HTTP/2 PUT https://localhost:7220/Cart/modify-cart-item - 200 null text/plain; charset=utf-8 102.6675ms
2024-05-14 15:04:28.017 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/Checkout - null 0
2024-05-14 15:04:28.021 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Checkout (API)'
2024-05-14 15:04:28.023 +05:30  INF  Route matched with {action = "Checkout", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Checkout() on controller API.Controllers.CheckoutController (API).
2024-05-14 15:04:28.036 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
FROM [Users] AS [u]
WHERE [u].[UserId] = @__userId_0
2024-05-14 15:04:28.050 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__userId_0
2024-05-14 15:04:28.064 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__userId_0
2024-05-14 15:04:28.079 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@__item_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__item_ProductId_0
2024-05-14 15:04:28.091 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@__item_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__item_ProductId_0
2024-05-14 15:04:28.106 +05:30  INF  Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([OrderDate], [PaymentId], [Status], [TotalAmount], [UserId])
OUTPUT INSERTED.[OrderId]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-05-14 15:04:28.118 +05:30  INF  Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderProducts] ([OrderId], [ProductId], [OrderQty], [UnitPrice])
VALUES (@p0, @p1, @p2, @p3);
2024-05-14 15:04:28.129 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderProducts] ([OrderId], [ProductId], [OrderQty], [UnitPrice])
VALUES (@p0, @p1, @p2, @p3);
2024-05-14 15:04:29.127 +05:30  INF  Executing OkObjectResult, writing value of type 'System.String'.
2024-05-14 15:04:29.129 +05:30  INF  Executed action API.Controllers.CheckoutController.Checkout (API) in 1101.4061ms
2024-05-14 15:04:29.132 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Checkout (API)'
2024-05-14 15:04:29.135 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/Checkout - 200 null text/plain; charset=utf-8 1119.067ms
2024-05-14 15:04:51.121 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 3512
2024-05-14 15:04:51.121 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 1964
2024-05-14 15:04:51.166 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 15:04:51.188 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 15:04:51.192 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 15:04:51.197 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 15:04:51.211 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 15:04:51.216 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 15:04:51.219 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 9.8724ms
2024-05-14 15:04:51.222 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 6.9251ms
2024-05-14 15:04:51.224 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 15:04:51.226 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 15:04:51.227 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 106.5207ms
2024-05-14 15:04:51.228 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 107.2102ms
2024-05-14 15:04:51.260 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 1920
2024-05-14 15:04:51.264 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 15:04:51.268 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 15:04:51.272 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 15:04:51.273 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 1.9783ms
2024-05-14 15:04:51.275 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 15:04:51.276 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 16.6356ms
2024-05-14 15:04:51.296 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 3259
2024-05-14 15:04:51.300 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 15:04:51.302 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 15:04:51.315 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__paymentResponse_OrderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[OrderId], [o].[OrderDate], [o].[PaymentId], [o].[Status], [o].[TotalAmount], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[OrderId] = @__paymentResponse_OrderId_0
2024-05-14 15:04:51.326 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Double), @p4='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Orders] SET [OrderDate] = @p0, [PaymentId] = @p1, [Status] = @p2, [TotalAmount] = @p3, [UserId] = @p4
OUTPUT 1
WHERE [OrderId] = @p5;
2024-05-14 15:04:51.342 +05:30  INF  Executed DbCommand (3ms) [Parameters=[@__id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity], [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [UserProducts] AS [u]
INNER JOIN [Products] AS [p] ON [u].[ProductId] = [p].[ProductId]
WHERE [u].[userId] = @__id_0
2024-05-14 15:04:51.353 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@__cartItem_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__cartItem_ProductId_0
2024-05-14 15:04:51.369 +05:30  INF  Executed DbCommand (5ms) [Parameters=[@p7='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = Double), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Double), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Description] = @p0, [Discount] = @p1, [ImageUrl] = @p2, [Name] = @p3, [Price] = @p4, [ProductCategoryId] = @p5, [Quantity] = @p6
OUTPUT 1
WHERE [ProductId] = @p7;
2024-05-14 15:04:51.382 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@__cartItem_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__cartItem_ProductId_0
2024-05-14 15:04:51.392 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@p7='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = Double), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Double), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Description] = @p0, [Discount] = @p1, [ImageUrl] = @p2, [Name] = @p3, [Price] = @p4, [ProductCategoryId] = @p5, [Quantity] = @p6
OUTPUT 1
WHERE [ProductId] = @p7;
2024-05-14 15:04:51.403 +05:30  INF  Executed DbCommand (1ms) [Parameters=[@__UserId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[userId], [u].[ProductId], [u].[Quantity]
FROM [UserProducts] AS [u]
WHERE [u].[userId] = @__UserId_0
2024-05-14 15:04:51.421 +05:30  INF  Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [UserProducts]
OUTPUT 1
WHERE [ProductId] = @p0 AND [userId] = @p1;
DELETE FROM [UserProducts]
OUTPUT 1
WHERE [ProductId] = @p2 AND [userId] = @p3;
2024-05-14 15:04:51.438 +05:30  INF  Executed DbCommand (7ms) [Parameters=[@__orderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[OrderId], [t].[OrderDate], [t].[PaymentId], [t].[Status], [t].[TotalAmount], [t].[UserId], [t].[UserId0], [t].[Email], [t].[FirstName], [t].[LastName], [t].[PhoneNumber], [t].[StripeId], [t0].[OrderId], [t0].[ProductId], [t0].[OrderQty], [t0].[UnitPrice], [t0].[ProductId0], [t0].[Description], [t0].[Discount], [t0].[ImageUrl], [t0].[Name], [t0].[Price], [t0].[ProductCategoryId], [t0].[Quantity]
FROM (
    SELECT TOP(1) [o].[OrderId], [o].[OrderDate], [o].[PaymentId], [o].[Status], [o].[TotalAmount], [o].[UserId], [u].[UserId] AS [UserId0], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PhoneNumber], [u].[StripeId]
    FROM [Orders] AS [o]
    INNER JOIN [Users] AS [u] ON [o].[UserId] = [u].[UserId]
    WHERE [o].[OrderId] = @__orderId_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[OrderId], [o0].[ProductId], [o0].[OrderQty], [o0].[UnitPrice], [p].[ProductId] AS [ProductId0], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity]
    FROM [OrderProducts] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[ProductId]
) AS [t0] ON [t].[OrderId] = [t0].[OrderId]
ORDER BY [t].[OrderId], [t].[UserId0], [t0].[OrderId], [t0].[ProductId]
2024-05-14 15:04:52.406 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 15:04:52.408 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 1101.4201ms
2024-05-14 15:04:52.410 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 15:04:52.413 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 1117.4523ms
2024-05-14 15:04:53.592 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 3737
2024-05-14 15:04:53.596 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 15:04:53.598 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 15:04:53.605 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 15:04:53.607 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 3.5657ms
2024-05-14 15:04:53.609 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 15:04:53.611 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 19.2596ms
2024-05-14 15:05:00.929 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/Product/all-products - null null
2024-05-14 15:05:00.933 +05:30  INF  Executing endpoint 'API.Controllers.ProductController.GetProducts (API)'
2024-05-14 15:05:00.935 +05:30  INF  Route matched with {action = "GetProducts", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[Application.DTOs.Product.ProductResponse]] GetProducts() on controller API.Controllers.ProductController (API).
2024-05-14 15:05:00.949 +05:30  INF  Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity], [p0].[CategoryId], [p0].[CategoryIcon], [p0].[CategoryName]
FROM [Products] AS [p]
INNER JOIN [ProductCategories] AS [p0] ON [p].[ProductCategoryId] = [p0].[CategoryId]
2024-05-14 15:05:00.955 +05:30  INF  Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.DTOs.Product.ProductResponse, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-14 15:05:00.958 +05:30  INF  Executed action API.Controllers.ProductController.GetProducts (API) in 17.8053ms
2024-05-14 15:05:00.960 +05:30  INF  Executed endpoint 'API.Controllers.ProductController.GetProducts (API)'
2024-05-14 15:05:00.966 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/Product/all-products - 200 null application/json; charset=utf-8 37.6568ms
2024-05-14 15:12:02.822 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/index.html - null null
2024-05-14 15:12:02.866 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/index.html - 200 null text/html;charset=utf-8 45.1616ms
2024-05-14 15:12:02.882 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - null null
2024-05-14 15:12:02.883 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_vs/browserLink - null null
2024-05-14 15:12:02.888 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 5.9926ms
2024-05-14 15:12:02.929 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_vs/browserLink - 200 null text/javascript; charset=UTF-8 46.6912ms
2024-05-14 15:12:03.043 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - null null
2024-05-14 15:12:03.066 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 23.2773ms
2024-05-14 15:18:52.699 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/index.html - null null
2024-05-14 15:18:52.721 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/index.html - 200 null text/html;charset=utf-8 21.8787ms
2024-05-14 15:18:52.761 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - null null
2024-05-14 15:18:52.766 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 4.8615ms
2024-05-14 15:18:52.772 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_vs/browserLink - null null
2024-05-14 15:18:52.793 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_vs/browserLink - 200 null text/javascript; charset=UTF-8 21.3258ms
2024-05-14 15:18:52.856 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - null null
2024-05-14 15:18:52.867 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 11.3792ms
2024-05-14 15:19:35.261 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/index.html - null null
2024-05-14 15:19:35.290 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/index.html - 200 null text/html;charset=utf-8 28.5955ms
2024-05-14 15:19:35.329 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - null null
2024-05-14 15:19:35.333 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_vs/browserLink - null null
2024-05-14 15:19:35.336 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 6.9458ms
2024-05-14 15:19:35.355 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_vs/browserLink - 200 null text/javascript; charset=UTF-8 22.1457ms
2024-05-14 15:19:35.406 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - null null
2024-05-14 15:19:35.416 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 10.3411ms
2024-05-14 15:19:52.124 +05:30  INF  User profile is available. Using 'C:\Users\iTela\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-14 15:19:52.468 +05:30  INF  Now listening on: https://localhost:7220
2024-05-14 15:19:52.473 +05:30  INF  Now listening on: http://localhost:5016
2024-05-14 15:19:52.481 +05:30  INF  Application started. Press Ctrl+C to shut down.
2024-05-14 15:19:52.488 +05:30  INF  Hosting environment: Development
2024-05-14 15:19:52.492 +05:30  INF  Content root path: C:\Users\iTela\Documents\Assignment\sample project structure\ShoppingApp\API
2024-05-14 15:19:53.020 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/index.html - null null
2024-05-14 15:19:53.348 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/index.html - 200 null text/html;charset=utf-8 334.7038ms
2024-05-14 15:19:53.366 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - null null
2024-05-14 15:19:53.366 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_vs/browserLink - null null
2024-05-14 15:19:53.375 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 9.6835ms
2024-05-14 15:19:53.419 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_vs/browserLink - 200 null text/javascript; charset=UTF-8 53.6528ms
2024-05-14 15:19:53.489 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - null null
2024-05-14 15:19:53.677 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 189.2464ms
2024-05-14 15:32:59.158 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/index.html - null null
2024-05-14 15:32:59.211 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/index.html - 200 null text/html;charset=utf-8 53.4322ms
2024-05-14 15:32:59.327 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - null null
2024-05-14 15:32:59.327 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_vs/browserLink - null null
2024-05-14 15:32:59.333 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 5.6011ms
2024-05-14 15:32:59.367 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_vs/browserLink - 200 null text/javascript; charset=UTF-8 40.1025ms
2024-05-14 15:32:59.452 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - null null
2024-05-14 15:32:59.467 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 15.883ms
2024-05-14 15:33:57.397 +05:30  INF  User profile is available. Using 'C:\Users\iTela\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-14 15:33:57.681 +05:30  INF  Now listening on: https://localhost:7220
2024-05-14 15:33:57.685 +05:30  INF  Now listening on: http://localhost:5016
2024-05-14 15:33:57.691 +05:30  INF  Application started. Press Ctrl+C to shut down.
2024-05-14 15:33:57.694 +05:30  INF  Hosting environment: Development
2024-05-14 15:33:57.697 +05:30  INF  Content root path: C:\Users\iTela\Documents\Assignment\sample project structure\ShoppingApp\API
2024-05-14 15:33:58.306 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/index.html - null null
2024-05-14 15:33:58.609 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/index.html - 200 null text/html;charset=utf-8 310.5156ms
2024-05-14 15:33:58.629 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_vs/browserLink - null null
2024-05-14 15:33:58.629 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - null null
2024-05-14 15:33:58.650 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 22.1395ms
2024-05-14 15:33:58.691 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_vs/browserLink - 200 null text/javascript; charset=UTF-8 61.3274ms
2024-05-14 15:33:58.913 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - null null
2024-05-14 15:33:59.077 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 163.5011ms
2024-05-14 15:36:23.330 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/index.html - null null
2024-05-14 15:36:23.356 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/index.html - 200 null text/html;charset=utf-8 26.6734ms
2024-05-14 15:36:23.394 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_vs/browserLink - null null
2024-05-14 15:36:23.394 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - null null
2024-05-14 15:36:23.409 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 15.2657ms
2024-05-14 15:36:23.426 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_vs/browserLink - 200 null text/javascript; charset=UTF-8 32.1073ms
2024-05-14 15:36:23.488 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - null null
2024-05-14 15:36:23.506 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 18.6193ms
2024-05-14 15:36:32.383 +05:30  INF  User profile is available. Using 'C:\Users\iTela\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-14 15:36:32.776 +05:30  INF  Now listening on: https://localhost:7220
2024-05-14 15:36:32.781 +05:30  INF  Now listening on: http://localhost:5016
2024-05-14 15:36:32.789 +05:30  INF  Application started. Press Ctrl+C to shut down.
2024-05-14 15:36:32.793 +05:30  INF  Hosting environment: Development
2024-05-14 15:36:32.798 +05:30  INF  Content root path: C:\Users\iTela\Documents\Assignment\sample project structure\ShoppingApp\API
2024-05-14 15:36:36.241 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/index.html - null null
2024-05-14 15:36:36.687 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/index.html - 200 null text/html;charset=utf-8 456.1513ms
2024-05-14 15:36:36.712 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - null null
2024-05-14 15:36:36.712 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_vs/browserLink - null null
2024-05-14 15:36:36.727 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 16.4467ms
2024-05-14 15:36:36.790 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_vs/browserLink - 200 null text/javascript; charset=UTF-8 77.8522ms
2024-05-14 15:36:36.866 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - null null
2024-05-14 15:36:37.041 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 174.7766ms
2024-05-14 15:38:35.449 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/index.html - null null
2024-05-14 15:38:35.500 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/index.html - 200 null text/html;charset=utf-8 52.3123ms
2024-05-14 15:38:35.524 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_vs/browserLink - null null
2024-05-14 15:38:35.524 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - null null
2024-05-14 15:38:35.537 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 13.2405ms
2024-05-14 15:38:35.555 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_vs/browserLink - 200 null text/javascript; charset=UTF-8 30.8938ms
2024-05-14 15:38:35.602 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - null null
2024-05-14 15:38:35.634 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 32.3657ms
2024-05-14 15:39:09.800 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/index.html - null null
2024-05-14 15:39:09.815 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/index.html - 200 null text/html;charset=utf-8 15.6072ms
2024-05-14 15:39:09.848 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - null null
2024-05-14 15:39:09.849 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_vs/browserLink - null null
2024-05-14 15:39:09.854 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 6.7824ms
2024-05-14 15:39:09.885 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_vs/browserLink - 200 null text/javascript; charset=UTF-8 35.6912ms
2024-05-14 15:39:09.927 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - null null
2024-05-14 15:39:09.953 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 25.7851ms
2024-05-14 15:39:58.082 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/index.html - null null
2024-05-14 15:39:58.098 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/index.html - 200 null text/html;charset=utf-8 16.1189ms
2024-05-14 15:39:58.133 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - null null
2024-05-14 15:39:58.134 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_vs/browserLink - null null
2024-05-14 15:39:58.138 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 4.8524ms
2024-05-14 15:39:58.155 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_vs/browserLink - 200 null text/javascript; charset=UTF-8 21.7915ms
2024-05-14 15:39:58.209 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - null null
2024-05-14 15:39:58.223 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 14.563ms
2024-05-14 15:40:19.985 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/index.html - null null
2024-05-14 15:40:20.004 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/index.html - 200 null text/html;charset=utf-8 19.5527ms
2024-05-14 15:40:20.036 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_vs/browserLink - null null
2024-05-14 15:40:20.039 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - null null
2024-05-14 15:40:20.052 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 13.2722ms
2024-05-14 15:40:20.071 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_vs/browserLink - 200 null text/javascript; charset=UTF-8 34.9863ms
2024-05-14 15:40:20.100 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - null null
2024-05-14 15:40:20.122 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 22.8802ms
2024-05-14 15:40:40.718 +05:30  INF  User profile is available. Using 'C:\Users\iTela\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-14 15:40:41.031 +05:30  INF  Now listening on: https://localhost:7220
2024-05-14 15:40:41.035 +05:30  INF  Now listening on: http://localhost:5016
2024-05-14 15:40:41.041 +05:30  INF  Application started. Press Ctrl+C to shut down.
2024-05-14 15:40:41.044 +05:30  INF  Hosting environment: Development
2024-05-14 15:40:41.048 +05:30  INF  Content root path: C:\Users\iTela\Documents\Assignment\sample project structure\ShoppingApp\API
2024-05-14 15:40:44.951 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/index.html - null null
2024-05-14 15:40:45.277 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/index.html - 200 null text/html;charset=utf-8 332.1866ms
2024-05-14 15:40:45.297 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - null null
2024-05-14 15:40:45.297 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_vs/browserLink - null null
2024-05-14 15:40:45.306 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 9.136ms
2024-05-14 15:40:45.370 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_vs/browserLink - 200 null text/javascript; charset=UTF-8 73.1883ms
2024-05-14 15:40:45.451 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - null null
2024-05-14 15:40:45.636 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 185.4813ms
2024-05-14 16:14:42.819 +05:30  INF  User profile is available. Using 'C:\Users\iTela\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-14 16:14:43.158 +05:30  INF  Now listening on: https://localhost:7220
2024-05-14 16:14:43.163 +05:30  INF  Now listening on: http://localhost:5016
2024-05-14 16:14:43.171 +05:30  INF  Application started. Press Ctrl+C to shut down.
2024-05-14 16:14:43.176 +05:30  INF  Hosting environment: Development
2024-05-14 16:14:43.180 +05:30  INF  Content root path: C:\Users\iTela\Documents\Assignment\sample project structure\ShoppingApp\API
2024-05-14 16:14:49.767 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/index.html - null null
2024-05-14 16:14:50.220 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/index.html - 200 null text/html;charset=utf-8 459.6465ms
2024-05-14 16:14:50.244 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - null null
2024-05-14 16:14:50.244 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_vs/browserLink - null null
2024-05-14 16:14:50.263 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 18.6631ms
2024-05-14 16:14:50.360 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_vs/browserLink - 200 null text/javascript; charset=UTF-8 116.4124ms
2024-05-14 16:14:50.450 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - null null
2024-05-14 16:14:50.670 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 223.8499ms
2024-05-14 16:32:04.248 +05:30  INF  User profile is available. Using 'C:\Users\iTela\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-14 16:32:04.569 +05:30  INF  Now listening on: https://localhost:7220
2024-05-14 16:32:04.573 +05:30  INF  Now listening on: http://localhost:5016
2024-05-14 16:32:04.579 +05:30  INF  Application started. Press Ctrl+C to shut down.
2024-05-14 16:32:04.583 +05:30  INF  Hosting environment: Development
2024-05-14 16:32:04.586 +05:30  INF  Content root path: C:\Users\iTela\Documents\Assignment\sample project structure\ShoppingApp\API
2024-05-14 16:32:06.778 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/index.html - null null
2024-05-14 16:32:07.699 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/index.html - 200 null text/html;charset=utf-8 929.2362ms
2024-05-14 16:32:07.709 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - null null
2024-05-14 16:32:07.709 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/_vs/browserLink - null null
2024-05-14 16:32:07.732 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_framework/aspnetcore-browser-refresh.js - 200 13742 application/javascript; charset=utf-8 22.6244ms
2024-05-14 16:32:07.992 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/_vs/browserLink - 200 null text/javascript; charset=UTF-8 283.2149ms
2024-05-14 16:32:08.111 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - null null
2024-05-14 16:32:08.387 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 276.0822ms
2024-05-14 16:35:44.924 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/User - application/json 99
2024-05-14 16:35:45.022 +05:30  INF  Executing endpoint 'API.Controllers.UserController.Signup (API)'
2024-05-14 16:35:45.057 +05:30  INF  Route matched with {action = "Signup", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Signup(Application.DTOs.SignUpDTO) on controller API.Controllers.UserController (API).
2024-05-14 16:35:47.975 +05:30  INF  Request starting HTTP/1.1 POST https://localhost:7220/webHook - application/json; charset=utf-8 1119
2024-05-14 16:35:47.983 +05:30  INF  Executing endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 16:35:47.990 +05:30  INF  Route matched with {action = "Index", controller = "Checkout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller API.Controllers.CheckoutController (API).
2024-05-14 16:35:48.819 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 16:35:48.835 +05:30  INF  Executed action API.Controllers.CheckoutController.Index (API) in 837.4155ms
2024-05-14 16:35:48.837 +05:30  INF  Executed endpoint 'API.Controllers.CheckoutController.Index (API)'
2024-05-14 16:35:48.846 +05:30  INF  Request finished HTTP/1.1 POST https://localhost:7220/webHook - 200 null application/json; charset=utf-8 870.8986ms
2024-05-14 16:35:50.336 +05:30  INF  Executed DbCommand (77ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([UserId], [Email], [FirstName], [LastName], [PhoneNumber], [StripeId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2024-05-14 16:35:50.371 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 16:35:50.374 +05:30  INF  Executed action API.Controllers.UserController.Signup (API) in 5313.1645ms
2024-05-14 16:35:50.378 +05:30  INF  Executed endpoint 'API.Controllers.UserController.Signup (API)'
2024-05-14 16:35:50.386 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/User - 200 null application/json; charset=utf-8 5462.6327ms
2024-05-14 16:37:03.176 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/User/login - application/json 78
2024-05-14 16:37:03.194 +05:30  INF  Executing endpoint 'API.Controllers.UserController.Login (API)'
2024-05-14 16:37:03.203 +05:30  INF  Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Application.DTOs.LoginDTO) on controller API.Controllers.UserController (API).
2024-05-14 16:37:06.622 +05:30  INF  Executing OkObjectResult, writing value of type '<>f__AnonymousType0`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-05-14 16:37:06.626 +05:30  INF  Executed action API.Controllers.UserController.Login (API) in 3419.2901ms
2024-05-14 16:37:06.629 +05:30  INF  Executed endpoint 'API.Controllers.UserController.Login (API)'
2024-05-14 16:37:06.631 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/User/login - 200 null application/json; charset=utf-8 3455.0494ms
2024-05-14 16:39:09.602 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/User/addAddress - application/json 72
2024-05-14 16:39:10.404 +05:30  INF  Executing endpoint 'API.Controllers.UserController.Address (API)'
2024-05-14 16:39:10.410 +05:30  INF  Route matched with {action = "Address", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Address(Application.DTOs.AddressDTO) on controller API.Controllers.UserController (API).
2024-05-14 16:39:10.609 +05:30  INF  Executed DbCommand (22ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Addresses] ([City], [PostalCode], [StreetName], [UserId])
OUTPUT INSERTED.[AddressId]
VALUES (@p0, @p1, @p2, @p3);
2024-05-14 16:39:10.639 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 16:39:10.641 +05:30  INF  Executed action API.Controllers.UserController.Address (API) in 227.0711ms
2024-05-14 16:39:10.643 +05:30  INF  Executed endpoint 'API.Controllers.UserController.Address (API)'
2024-05-14 16:39:10.646 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/User/addAddress - 200 null application/json; charset=utf-8 1043.3475ms
2024-05-14 16:40:22.624 +05:30  INF  Request starting HTTP/2 GET https://localhost:7220/Product/all-products - null null
2024-05-14 16:40:22.641 +05:30  INF  Executing endpoint 'API.Controllers.ProductController.GetProducts (API)'
2024-05-14 16:40:22.645 +05:30  INF  Route matched with {action = "GetProducts", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[Application.DTOs.Product.ProductResponse]] GetProducts() on controller API.Controllers.ProductController (API).
2024-05-14 16:40:23.089 +05:30  INF  Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity], [p0].[CategoryId], [p0].[CategoryIcon], [p0].[CategoryName]
FROM [Products] AS [p]
INNER JOIN [ProductCategories] AS [p0] ON [p].[ProductCategoryId] = [p0].[CategoryId]
2024-05-14 16:40:23.110 +05:30  INF  Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.DTOs.Product.ProductResponse, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-14 16:40:23.126 +05:30  INF  Executed action API.Controllers.ProductController.GetProducts (API) in 477.9015ms
2024-05-14 16:40:23.129 +05:30  INF  Executed endpoint 'API.Controllers.ProductController.GetProducts (API)'
2024-05-14 16:40:23.132 +05:30  INF  Request finished HTTP/2 GET https://localhost:7220/Product/all-products - 200 null application/json; charset=utf-8 509.5406ms
2024-05-14 16:42:24.463 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/Product/products-by-category - application/json 21
2024-05-14 16:42:24.479 +05:30  INF  Executing endpoint 'API.Controllers.ProductController.GetProductsVyCategory (API)'
2024-05-14 16:42:24.484 +05:30  INF  Route matched with {action = "GetProductsVyCategory", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[Application.DTOs.Product.ProductResponse]] GetProductsVyCategory(Application.DTOs.Product.CategoryRequest) on controller API.Controllers.ProductController (API).
2024-05-14 16:42:24.578 +05:30  INF  Executed DbCommand (52ms) [Parameters=[@__categoryId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[ProductId], [p].[Description], [p].[Discount], [p].[ImageUrl], [p].[Name], [p].[Price], [p].[ProductCategoryId], [p].[Quantity], [p0].[CategoryId], [p0].[CategoryIcon], [p0].[CategoryName]
FROM [Products] AS [p]
INNER JOIN [ProductCategories] AS [p0] ON [p].[ProductCategoryId] = [p0].[CategoryId]
WHERE [p].[ProductCategoryId] = @__categoryId_0
2024-05-14 16:42:24.584 +05:30  INF  Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.DTOs.Product.ProductResponse, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-14 16:42:24.587 +05:30  INF  Executed action API.Controllers.ProductController.GetProductsVyCategory (API) in 94.3556ms
2024-05-14 16:42:24.589 +05:30  INF  Executed endpoint 'API.Controllers.ProductController.GetProductsVyCategory (API)'
2024-05-14 16:42:24.591 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/Product/products-by-category - 200 null application/json; charset=utf-8 127.8224ms
2024-05-14 16:55:53.779 +05:30  INF  Request starting HTTP/2 POST https://localhost:7220/User/addAddress - application/json 72
2024-05-14 16:55:53.792 +05:30  INF  Executing endpoint 'API.Controllers.UserController.Address (API)'
2024-05-14 16:55:53.793 +05:30  INF  Route matched with {action = "Address", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Address(Application.DTOs.AddressDTO) on controller API.Controllers.UserController (API).
2024-05-14 16:55:54.841 +05:30  INF  Executed DbCommand (9ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Addresses] ([City], [PostalCode], [StreetName], [UserId])
OUTPUT INSERTED.[AddressId]
VALUES (@p0, @p1, @p2, @p3);
2024-05-14 16:55:54.846 +05:30  INF  Executing OkObjectResult, writing value of type 'Application.DTOs.ServiceResponse'.
2024-05-14 16:55:54.849 +05:30  INF  Executed action API.Controllers.UserController.Address (API) in 1052.7285ms
2024-05-14 16:55:54.859 +05:30  INF  Executed endpoint 'API.Controllers.UserController.Address (API)'
2024-05-14 16:55:54.860 +05:30  INF  Request finished HTTP/2 POST https://localhost:7220/User/addAddress - 200 null application/json; charset=utf-8 1084.0293ms
